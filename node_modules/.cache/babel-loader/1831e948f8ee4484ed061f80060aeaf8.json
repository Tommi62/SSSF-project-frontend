{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tommivainio/Projektit/chatApp/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tommivainio/Projektit/chatApp/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tommivainio/Projektit/chatApp/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable react-hooks/exhaustive-deps */import{Link as RouterLink}from'react-router-dom';import{AppBar,makeStyles,Toolbar,Link,Button}from'@material-ui/core';import ExitToAppIcon from'@material-ui/icons/ExitToApp';import{useUsers}from'../hooks/apiHooks';import{useContext,useEffect}from'react';import{useState}from'react';import{MediaContext}from'../contexts/mediaContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{appBar:{zIndex:theme.zIndex.drawer+1,backgroundColor:'#5F4B8BFF',width:'100vw'},root:{flexGrow:1},menuButton:{marginRight:theme.spacing(2)},title:{flexGrow:1,paddingRight:'24px'},toolbar:{display:'flex',justifyContent:'flex-end'},itemPack:{display:'flex',alignItems:'center'},logo:{position:'absolute',display:'flex',alignItems:'center',left:'71px',transform:'translate(-50%)'}};});var Nav=function Nav(){var classes=useStyles();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),logged=_useState2[0],setLogged=_useState2[1];var _useContext=useContext(MediaContext),user=_useContext.user,setUser=_useContext.setUser;var _useUsers=useUsers(),getIsLoggedIn=_useUsers.getIsLoggedIn;useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var isLoggedIn;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;console.log('NAV');_context.next=4;return getIsLoggedIn();case 4:isLoggedIn=_context.sent;if(isLoggedIn.success){setLogged(true);setUser(isLoggedIn.id);}else{setLogged(false);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}))();},[user]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(AppBar,{className:classes.appBar,children:/*#__PURE__*/_jsxs(Toolbar,{className:classes.toolbar,children:[/*#__PURE__*/_jsx(Link,{component:RouterLink,to:\"/\",className:classes.logo,color:\"inherit\",style:{textDecoration:'none'},children:/*#__PURE__*/_jsx(\"h2\",{children:\"ChatApp\"})}),/*#__PURE__*/_jsx(\"div\",{className:classes.itemPack,children:logged?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{color:\"inherit\",component:RouterLink,to:\"/logout\",children:\"Logout\"})}):/*#__PURE__*/_jsx(Button,{color:\"inherit\",startIcon:/*#__PURE__*/_jsx(ExitToAppIcon,{}),component:RouterLink,to:\"/login\",children:\"Login\"})})]})})});};export default Nav;","map":{"version":3,"sources":["/Users/tommivainio/Projektit/chatApp/my-app/src/components/nav.tsx"],"names":["Link","RouterLink","AppBar","makeStyles","Toolbar","Button","ExitToAppIcon","useUsers","useContext","useEffect","useState","MediaContext","useStyles","theme","appBar","zIndex","drawer","backgroundColor","width","root","flexGrow","menuButton","marginRight","spacing","title","paddingRight","toolbar","display","justifyContent","itemPack","alignItems","logo","position","left","transform","Nav","classes","logged","setLogged","user","setUser","getIsLoggedIn","console","log","isLoggedIn","success","id","message","textDecoration"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport {\r\n    AppBar,\r\n    makeStyles,\r\n    Toolbar,\r\n    Link,\r\n    Button,\r\n} from '@material-ui/core';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport { useUsers } from '../hooks/apiHooks';\r\nimport { useContext, useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport { MediaContext } from '../contexts/mediaContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    appBar: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        backgroundColor: '#5F4B8BFF',\r\n        width: '100vw',\r\n    },\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n        paddingRight: '24px',\r\n    },\r\n    toolbar: {\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n    },\r\n    itemPack: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    logo: {\r\n        position: 'absolute',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        left: '71px',\r\n        transform: 'translate(-50%)',\r\n    },\r\n}));\r\n\r\nconst Nav = () => {\r\n    const classes = useStyles();\r\n    const [logged, setLogged] = useState(false);\r\n    const { user, setUser } = useContext(MediaContext);\r\n    const { getIsLoggedIn } = useUsers();\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                console.log('NAV');\r\n                const isLoggedIn = await getIsLoggedIn()\r\n                if (isLoggedIn.success) {\r\n                    setLogged(true);\r\n                    setUser(isLoggedIn.id);\r\n                } else {\r\n                    setLogged(false);\r\n                }\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        })();\r\n    }, [user]);\r\n\r\n    return (\r\n        <>\r\n            <AppBar className={classes.appBar}>\r\n                <Toolbar className={classes.toolbar}>\r\n                    <Link\r\n                        component={RouterLink}\r\n                        to=\"/\"\r\n                        className={classes.logo}\r\n                        color=\"inherit\"\r\n                        style={{ textDecoration: 'none' }}\r\n                    >\r\n                        <h2>ChatApp</h2>\r\n                    </Link>\r\n                    <div className={classes.itemPack}>\r\n                        {logged ? (\r\n                            <div>\r\n                                <Button\r\n                                    color=\"inherit\"\r\n                                    component={RouterLink}\r\n                                    to=\"/logout\"\r\n                                >\r\n                                    Logout\r\n                                </Button>\r\n                            </div>\r\n                        ) : (\r\n                            <Button\r\n                                color=\"inherit\"\r\n                                startIcon={<ExitToAppIcon />}\r\n                                component={RouterLink}\r\n                                to=\"/login\"\r\n                            >\r\n                                Login\r\n                            </Button>\r\n                        )}\r\n\r\n                    </div>\r\n                </Toolbar>\r\n            </AppBar>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Nav;"]},"metadata":{},"sourceType":"module"}