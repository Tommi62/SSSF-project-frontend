{"code":"(this[\"webpackJsonpmy-app\"]=this[\"webpackJsonpmy-app\"]||[]).push([[0],{139:function(e,t,n){},161:function(e,t,n){\"use strict\";n.r(t);var r=n(0),a=n.n(r),s=n(17),c=n.n(s),o=(n(139),n(12)),i=n(234),u=n(40),l=n(18),d=n(210),m=n(5),p=n.n(m),b=n(11),j=n(9),h=n(213),g=n(215),f=n(216),O=n(217),x=n(113),v=n.n(x),w={backendUrl:\"https://something.com\"},y=function(){var e=Object(b.a)(p.a.mark((function e(t){var n,r,a,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,fetch(w.backendUrl+t,n);case 3:return r=e.sent,e.next=6,r.json();case 6:if(!(a=e.sent).error){e.next=11;break}throw new Error(a.message+\": \"+a.error);case 11:if(r.ok){e.next=15;break}throw new Error(\"doFetch failed\");case 15:return e.abrupt(\"return\",a);case 16:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){return{getUsers:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:\"GET\",credentials:\"include\"},e.prev=1,e.next=4,y(\"/users\",t);case 4:return e.abrupt(\"return\",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0.message);case 10:case\"end\":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),getUserAvailable:function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(\"/users/username/\"+t);case 3:return e.abrupt(\"return\",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case\"end\":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getUsernameById:function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(\"/user/\"+t);case 3:return e.abrupt(\"return\",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case\"end\":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),register:function(){var e=Object(b.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(t),credentials:\"include\"},e.prev=1,e.next=4,y(\"/user\",n);case 4:return r=e.sent,console.log(\"RegisterResult\",r.message),e.abrupt(\"return\",r.message);case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0.message);case 12:case\"end\":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),getIsLoggedIn:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:\"GET\",credentials:\"include\"},e.prev=1,e.next=4,y(\"/isloggedin\",t);case 4:return e.abrupt(\"return\",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0.message);case 10:case\"end\":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),postLogin:function(){var e=Object(b.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(t),credentials:\"include\"},e.prev=1,e.next=4,y(\"/login\",n);case 4:return r=e.sent,e.abrupt(\"return\",r);case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.message);case 11:case\"end\":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),logout:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:\"DELETE\",credentials:\"include\"},e.prev=1,e.next=4,y(\"/logout\",t);case 4:return e.abrupt(\"return\",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0.message);case 10:case\"end\":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),getProfile:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:\"GET\",credentials:\"include\"},e.prev=1,e.next=4,y(\"/profile\",t);case 4:return e.abrupt(\"return\",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0.message);case 10:case\"end\":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}},S=function(){return{getThreadIds:function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(\"/threads/\"+t);case 3:return e.abrupt(\"return\",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case\"end\":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getUserIds:function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(\"/threadusers/\"+t);case 3:return e.abrupt(\"return\",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case\"end\":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getThreadName:function(){var e=Object(b.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(\"/thread/\"+t);case 3:return n=e.sent,e.abrupt(\"return\",n.name);case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case\"end\":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),postMessage:function(){var e=Object(b.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:t,credentials:\"include\"},e.prev=1,e.next=4,y(\"/message\",n);case 4:return r=e.sent,e.abrupt(\"return\",r.success);case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.message);case 11:case\"end\":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),getMessages:function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(\"/messages/\"+t);case 3:return e.abrupt(\"return\",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case\"end\":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getAllMessages:function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(\"/all_messages/\"+t);case 3:return e.abrupt(\"return\",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case\"end\":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getLastMessage:function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(\"/last_message/\"+t);case 3:return e.abrupt(\"return\",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case\"end\":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),createNewChatThread:function(){var e=Object(b.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:t,credentials:\"include\"},e.prev=1,e.next=4,y(\"/new_thread\",n);case 4:return r=e.sent,e.abrupt(\"return\",r);case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.message);case 11:case\"end\":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}},T=n(2),C={user:0,setUser:function(){}},I=a.a.createContext(C),F=function(e){var t=e.children,n=Object(r.useState)(C.user),a=Object(j.a)(n,2),s=a[0],c=a[1];return Object(T.jsx)(I.Provider,{value:{user:s,setUser:c},children:t})},B=Object(d.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:\"#5F4B8BFF\",width:\"100vw\"},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,paddingRight:\"24px\"},toolbar:{display:\"flex\",justifyContent:\"flex-end\"},itemPack:{display:\"flex\",alignItems:\"center\"},logo:{position:\"absolute\",display:\"flex\",alignItems:\"center\",left:\"71px\",transform:\"translate(-50%)\"}}})),N=function(){var e=B(),t=Object(r.useState)(!1),n=Object(j.a)(t,2),a=n[0],s=n[1],c=Object(r.useContext)(I),o=c.user,i=c.setUser,l=k().getIsLoggedIn;return Object(r.useEffect)((function(){Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(\"NAV\"),e.next=4,l();case 4:(t=e.sent).success?(s(!0),i(t.id)):s(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case\"end\":return e.stop()}}),e,null,[[0,8]])})))()}),[o]),Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(h.a,{className:e.appBar,children:Object(T.jsxs)(g.a,{className:e.toolbar,children:[Object(T.jsx)(f.a,{component:u.b,to:\"/\",className:e.logo,color:\"inherit\",style:{textDecoration:\"none\"},children:Object(T.jsx)(\"h2\",{children:\"ChatApp\"})}),Object(T.jsx)(\"div\",{className:e.itemPack,children:a?Object(T.jsx)(\"div\",{children:Object(T.jsx)(O.a,{color:\"inherit\",component:u.b,to:\"/logout\",children:\"Logout\"})}):Object(T.jsx)(O.a,{color:\"inherit\",startIcon:Object(T.jsx)(v.a,{}),component:u.b,to:\"/login\",children:\"Login\"})})]})})})},E={websocket:void 0,setWebsocket:function(){}},M=a.a.createContext(E),_=function(e){var t=e.children,n=Object(r.useState)(),a=Object(j.a)(n,2),s=a[0],c=a[1];return Object(T.jsx)(M.Provider,{value:{websocket:s,setWebsocket:c},children:t})},A=n(25),W=n(218),L=n(71),D=n(227),U=n(106),R=n(119),P=n.n(R),z=n(231),Y=n(163),H=n(219),V=n(48),q=n.n(V),J=Object(d.a)((function(e){var t,n;return{message:(t={backgroundColor:\"lightGrey\",marginBottom:0,borderRadius:\"1rem\",padding:\"0.5rem\",maxWidth:\"60%\"},Object(o.a)(t,e.breakpoints.down(1e3),{maxWidth:\"75%\"}),Object(o.a)(t,e.breakpoints.down(1e3),{maxWidth:\"85%\"}),t),ownMessage:(n={backgroundColor:\"#5F4B8BFF\",color:\"white\",marginBottom:0,borderRadius:\"1rem\",padding:\"0.5rem\",maxWidth:\"60%\"},Object(o.a)(n,e.breakpoints.down(1e3),{maxWidth:\"75%\"}),Object(o.a)(n,e.breakpoints.down(600),{maxWidth:\"85%\"}),n),inline:{display:\"inline\"},inlineOwn:{display:\"inline\",color:\"white\"},timestamp:{fontSize:\"0.7rem\",marginLeft:\"2rem\"},dateIndicator:{background:\"rgb(95, 75, 139, .2)\",borderRadius:\"0.3rem\",padding:\"0.2rem\",marginBottom:\"0.5rem\",textAlign:\"center\"}}})),G=function(e){var t=e.message_id,n=e.user_id,a=e.contents,s=e.timestamp,c=e.setMessageId,o=e.usernames,i=e.index,u=e.messageArray,l=J(),d=Object(r.useState)(\"\"),m=Object(j.a)(d,2),p=m[0],b=m[1],h=Object(r.useState)(\"\"),g=Object(j.a)(h,2),f=g[0],O=g[1],x=Object(r.useState)(!1),v=Object(j.a)(x,2),w=v[0],y=v[1],k=Object(r.useState)(!1),S=Object(j.a)(k,2),C=S[0],F=S[1],B=Object(r.useContext)(I).user,N=q()(s).format(\"DD.MM.YYYY\");return Object(r.useEffect)((function(){try{for(var e=0;e<o.length;e++)o[e].user_id===n&&b(o[e].username);if(0!==i){var r=q()(u[i-1].timestamp).format(\"DD.MM.YYYY\");N!==r&&F(!0)}else F(!0);var a=new Date(s),l=a.getHours().toString(),d=a.getMinutes().toString();a.getHours()<10&&(l=\"0\"+l),a.getMinutes()<10&&(d=\"0\"+d),O(l+\".\"+d),y(n===B),c(t)}catch(m){console.log(m.message)}}),[t]),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(Y.a,{style:{width:\"100%\",display:\"flex\",flexDirection:\"column\"},children:[C&&Object(T.jsx)(W.a,{container:!0,justifyContent:\"center\",children:Object(T.jsx)(L.a,{className:l.dateIndicator,component:\"h6\",variant:\"body1\",children:N})}),w?Object(T.jsx)(W.a,{container:!0,justify:\"flex-end\",children:Object(T.jsx)(W.a,{item:!0,className:l.ownMessage,children:Object(T.jsx)(H.a,{primary:Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(W.a,{container:!0,justify:\"space-between\",children:[Object(T.jsx)(L.a,{component:\"h2\",children:p}),Object(T.jsx)(L.a,{component:\"span\",variant:\"subtitle1\",className:l.timestamp,children:f})]})}),secondary:Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(L.a,{component:\"span\",variant:\"body2\",className:l.inlineOwn,children:a})})})})}):Object(T.jsx)(W.a,{container:!0,justify:\"flex-start\",children:Object(T.jsx)(W.a,{item:!0,className:l.message,children:Object(T.jsx)(H.a,{primary:Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(W.a,{container:!0,justify:\"space-between\",children:[Object(T.jsx)(L.a,{component:\"h2\",children:p}),Object(T.jsx)(L.a,{component:\"span\",variant:\"subtitle1\",className:l.timestamp,children:f})]})}),secondary:Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(L.a,{component:\"span\",variant:\"body2\",className:l.inline,color:\"textPrimary\",children:a})})})})})]})})},Q=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}};function K(){var e=Object(r.useState)(Q()),t=Object(j.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){function e(){a(Q())}return window.addEventListener(\"resize\",e),function(){return window.removeEventListener(\"resize\",e)}}),[]),n}var X=n(67),Z=n(115),$=n.n(Z),ee=Object(d.a)((function(e){return{textField:Object(o.a)({width:\"70%\",backgroundColor:\"white\",borderRadius:\"0.5rem\"},e.breakpoints.down(600),{marginTop:\"0.27rem\"}),sendButton:Object(o.a)({marginTop:\"0.25rem\",padding:\"12px 0 12px 12px\"},e.breakpoints.down(600),{marginTop:0}),thread:Object(o.a)({padding:\"0 6rem\",backgroundColor:\"#E69A8DFF\",height:\"90%\",overflowX:\"hidden\",overflowY:\"auto\"},e.breakpoints.down(1e3),{padding:\"0 1rem\"}),arrowBack:{position:\"absolute\",top:\"58px\",left:0,zIndex:10,padding:0}}})),te=function(e){var t=e.messages,n=e.id,a=e.websocket,s=e.messageAmount,c=e.setMessageAmount,o=e.setThreadOpen,i=e.setThreadId,u=ee(),l=Object(r.useState)(\"\"),d=Object(j.a)(l,2),m=d[0],h=d[1],g=Object(r.useState)(0),f=Object(j.a)(g,2),x=f[0],v=f[1],w=Object(r.useState)(!1),y=Object(j.a)(w,2),C=y[0],F=y[1],B=Object(r.useState)([]),N=Object(j.a)(B,2),E=N[0],M=N[1],_=Object(r.useState)([]),A=Object(j.a)(_,2),L=A[0],R=A[1],Y=Object(r.useState)(!1),H=Object(j.a)(Y,2),V=H[0],q=H[1],J=Object(r.useState)(!1),Q=Object(j.a)(J,2),Z=Q[0],te=Q[1],ne=Object(r.useState)(0),re=Object(j.a)(ne,2),ae=re[0],se=re[1],ce=Object(r.useContext)(I).user,oe=S(),ie=oe.postMessage,ue=oe.getUserIds,le=oe.getAllMessages,de=k().getUsernameById,me=K().height,pe=Object(r.useState)(me-64),be=Object(j.a)(pe,2),je=be[0],he=be[1],ge=Object(r.useRef)(null),fe=Object(r.useRef)(null),Oe=Object(X.useMediaQuery)({query:\"(max-width: 600px)\"});Object(r.useEffect)((function(){try{he(Oe?me-56:me-64)}catch(e){console.log(e.message)}}),[Oe]);var xe=function(e){var t,n;1===e?null===(t=ge.current)||void 0===t||t.scrollIntoView():(null===(n=fe.current)||void 0===n||n.scrollIntoView(),te(!0))};Object(r.useEffect)((function(){Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{xe(V&&!Z?2:1)}catch(t){console.log(t.message)}case 1:case\"end\":return e.stop()}}),e)})))()}),[x]),Object(r.useEffect)((function(){Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{ae!==n&&(q(!1),te(!1),c(50)),se(n),console.log(\"messageUpdate\"),t.length>=50&&!V?F(!0):F(!1)}catch(r){console.log(r.message)}case 1:case\"end\":return e.stop()}}),e)})))()}),[t]),Object(r.useEffect)((function(){Object(b.a)(p.a.mark((function e(){var t,r,a,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M([]),console.log(\"USERNAMELIST\"),e.next=5,ue(n);case 5:t=e.sent,r=[],a=0;case 8:if(!(a<t.length)){e.next=17;break}return e.next=11,de(t[a].user_id);case 11:s=e.sent,c={user_id:t[a].user_id,username:s.username},r.push(c);case 14:a++,e.next=8;break;case 17:M(r),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0.message);case 23:case\"end\":return e.stop()}}),e,null,[[0,20]])})))()}),[n]);var ve=function(){var e=Object(b.a)(p.a.mark((function e(t){var r,s,c,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,\"\"===m){e.next=14;break}return r=6e4*(new Date).getTimezoneOffset(),s=new Date(Date.now()-r).toISOString().slice(0,-1),console.log(\"TIMEST: \",s),c=JSON.stringify({contents:m,timestamp:s,user_id:ce,thread_id:n}),e.next=9,ie(c);case 9:o=e.sent,console.log(\"SUCCESS: \",o),i={type:\"message\",contents:m,timestamp:s,user_id:ce,thread_id:n},void 0!==a&&a.send(JSON.stringify(i)),h(\"\");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0.message);case 19:case\"end\":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(b.a)(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ae!==n?(c(50),t=50):t=s,e.next=4,le(n);case 4:r=e.sent,console.log(\"MESSAGE AMOUNT\",s,r),r.splice(r.length-t,t),R(r),q(!0),F(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:case\"end\":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)(T.Fragment,{children:[Oe&&Object(T.jsxs)(O.a,{className:u.arrowBack,onClick:function(){try{o(!1),i(0)}catch(e){console.log(e.message)}},children:[Object(T.jsx)($.a,{}),\" Back\"]}),Object(T.jsxs)(W.a,{container:!0,justify:\"center\",direction:\"column\",style:{height:je},children:[Object(T.jsxs)(W.a,{item:!0,justify:\"center\",className:u.thread,children:[V&&Object(T.jsxs)(D.a,{children:[L.map((function(e,t){return Object(T.jsx)(G,{message_id:e.id,user_id:e.user_id,contents:e.contents,timestamp:e.timestamp,setMessageId:v,usernames:E,index:t,messageArray:L})})),\" \",Object(T.jsx)(\"div\",{ref:fe})]}),C&&Object(T.jsx)(O.a,{onClick:we,children:\"Load all messages\"}),E.length>0&&Object(T.jsxs)(D.a,{children:[t.map((function(e,n){return Object(T.jsx)(G,{message_id:e.id,user_id:e.user_id,contents:e.contents,timestamp:e.timestamp,setMessageId:v,usernames:E,index:n,messageArray:t})})),\" \",Object(T.jsx)(\"div\",{ref:ge})]})]}),Object(T.jsx)(W.a,{item:!0,container:!0,justify:\"center\",direction:\"column\",style:{height:\"10%\",backgroundColor:\"lightgray\"},children:Object(T.jsx)(W.a,{item:!0,children:Object(T.jsxs)(\"form\",{onSubmit:ve,children:[Oe?Object(T.jsx)(U.a,{value:m,variant:\"outlined\",label:\"Say something!\",onInput:function(e){return h(e.target.value)},className:u.textField,size:\"small\"}):Object(T.jsx)(U.a,{value:m,variant:\"outlined\",label:\"Say something!\",onInput:function(e){return h(e.target.value)},className:u.textField}),Object(T.jsx)(z.a,{type:\"submit\",color:\"default\",className:u.sendButton,children:Object(T.jsx)(P.a,{style:{fill:\"#5F4B8BFF\"}})})]})})})]})]})},ne=Object(d.a)((function(e){return{text:{color:\"white\",width:\"100%\",padding:\"1rem\"},inline:{display:\"inline\"},lastMessage:{display:\"block\",overflow:\"hidden\",textOverflow:\"ellipsis\",whiteSpace:\"nowrap\",fontSize:\"0.7rem\"},timestamp:{fontSize:\"0.5rem\",marginLeft:\"2rem\"},button:Object(o.a)({width:\"100%\",maxWidth:\"30vw\",padding:\"0 0.7rem\",borderBottom:\"1px solid #5F4B8BFF\",cursor:\"pointer\",\"&:hover\":{background:\"#f0f0f0\"}},e.breakpoints.down(600),{maxWidth:\"none\",width:\"100vw\"})}})),re=function(e){var t=e.id,n=e.setThreadOpen,a=e.setThreadId,s=e.threadOpen,c=e.threadId,o=e.updateThreadButtonInfos,i=S(),u=i.getThreadName,l=i.getLastMessage,d=k().getUsernameById,m=Object(r.useState)(\"\"),h=Object(j.a)(m,2),g=h[0],f=h[1],O=Object(r.useState)({username:\"\",contents:\"\",timestamp:\"\"}),x=Object(j.a)(O,2),v=x[0],w=x[1],y=Object(r.useContext)(M).websocket,C=ne();Object(r.useEffect)((function(){Object(b.a)(p.a.mark((function e(){var n,r,a,s,c,o,i,m,b,j,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(t);case 3:return n=e.sent,f(n),e.next=7,l(t);case 7:if(0===(r=e.sent).length){e.next=20;break}return e.next=11,d(r[0].user_id);case 11:a=e.sent,s=q()().startOf(\"day\"),c=q()(r[0].timestamp).startOf(\"day\"),0===(o=s.diff(c,\"days\"))?(m=new Date(r[0].timestamp),b=m.getHours().toString(),j=m.getMinutes().toString(),m.getHours()<10&&(b=\"0\"+b),m.getMinutes()<10&&(j=\"0\"+j),i=b+\".\"+j):i=1===o?\"Yesterday\":q()(r[0].timestamp).format(\"DD.MM.YYYY\"),h={username:a.username+\":\",contents:r[0].contents,timestamp:i},w(h),e.next=22;break;case 20:w({username:\"No messages yet.\",contents:\"\",timestamp:\"\"});case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.log(e.t0.message);case 27:case\"end\":return e.stop()}}),e,null,[[0,24]])})))()}),[t,o]);return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(Y.a,{onClick:function(){try{s?(c===t?(n(!1),a(0)):a(t),void 0!==y&&y.close()):(n(!0),a(t))}catch(e){console.log(e.message)}},className:C.button,children:Object(T.jsx)(H.a,{primary:Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(W.a,{container:!0,justify:\"space-between\",children:[Object(T.jsx)(L.a,{component:\"h1\",children:g}),Object(T.jsx)(L.a,{component:\"span\",variant:\"subtitle1\",className:C.timestamp,children:v.timestamp})]})}),secondary:Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(L.a,{component:\"span\",variant:\"body2\",className:C.lastMessage,children:[v.username,\" \",v.contents]})})})})})},ae=n(239),se=n(236),ce=n(121),oe=n.n(ce),ie=n(230),ue=n(241),le=n(235),de=n(232),me=n(36),pe=n(70),be=function(e,t){var n=Object(r.useState)(t),a=Object(j.a)(n,2),s=a[0],c=a[1];return{inputs:s,handleSubmit:function(t){t&&t.preventDefault(),e()},handleInputChange:function(e){e.persist(),c((function(t){return Object(pe.a)(Object(pe.a)({},t),{},Object(o.a)({},e.target.name,e.target.value))}))},handleFileChange:function(e){e.persist(),c((function(t){return Object(pe.a)(Object(pe.a)({},t),{},Object(o.a)({},e.target.name,e.target.files[0]))}))},setInputs:c}},je=Object(d.a)((function(e){return{select:{minWidth:\"5rem\"},formControl:{marginTop:\"0.5rem\"},header:Object(o.a)({textAlign:\"center\"},e.breakpoints.down(600),{fontSize:\"1.3rem\"}),createButton:{backgroundColor:\"#5F4B8BFF\",marginTop:\"2rem\",marginBottom:\"0.5rem\",\"&:hover\":{backgroundColor:\"#7159a6\"}}}})),he=function(e){var t=e.websocket,n=e.setModalOpen,a=e.setThreadOpen,s=e.setThreadId,c=je(),o=Object(r.useContext)(I).user,i=S().createNewChatThread,u=k().getUsers,l=Object(r.useState)([]),d=Object(j.a)(l,2),m=d[0],h=d[1],g=Object(r.useState)(0),f=Object(j.a)(g,2),x=f[0],v=f[1],w=be(function(){var e=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,\"\"===y.user2){e.next=10;break}return t=JSON.stringify({name:y.threadName,user_id:o,user2_id:y.user2}),e.next=5,i(t);case 5:n=e.sent,console.log(\"SUCCESS: \",n.success),v(n.id),e.next=11;break;case 10:alert(\"Choose a user with whom you want to chat!\");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0.message);case 16:case\"end\":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),{threadName:\"\",user2:\"\"}),y=w.inputs,C=w.handleInputChange,F=w.handleSubmit;return Object(r.useEffect)((function(){try{if(0!==x){console.log(\"NEWTHREADID\",x);var e={type:\"newThread\",user_id:o,user2_id:y.user2,thread_id:x};void 0!==t&&(t.send(JSON.stringify(e)),a(!0),s(x),n(!1))}}catch(r){console.log(r.message)}}),[x]),Object(r.useEffect)((function(){Object(b.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u();case 3:for(t=e.sent,n=[],r=0;r<t.length;r++)t[r].id!==o&&n.push(t[r]);h(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case\"end\":return e.stop()}}),e,null,[[0,9]])})))()}),[]),Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(W.a,{container:!0,justifyContent:\"center\",direction:\"column\",children:[Object(T.jsx)(L.a,{variant:\"h4\",className:c.header,children:\"Create a new chat thread\"}),Object(T.jsxs)(me.ValidatorForm,{onSubmit:F,children:[Object(T.jsx)(W.a,{container:!0,item:!0,justifyContent:\"center\",children:Object(T.jsx)(me.TextValidator,{type:\"text\",name:\"threadName\",label:\"Thread name\",onChange:C,value:y.threadName,validators:[\"required\",\"minStringLength: 3\",\"maxStringLength: 25\"],errorMessages:[\"Required field\",\"Minimum of 3 characters\",\"Too many characters!\"]})}),Object(T.jsx)(W.a,{container:!0,item:!0,justifyContent:\"center\",children:Object(T.jsxs)(ie.a,{className:c.formControl,children:[Object(T.jsx)(ue.a,{children:\"User\"}),Object(T.jsxs)(le.a,{name:\"user2\",value:y.user2,label:\"User\",onChange:C,autoWidth:!0,className:c.select,children:[m.map((function(e){return Object(T.jsx)(de.a,{value:e.id,children:e.username})})),\" \"]})]})}),Object(T.jsx)(W.a,{container:!0,item:!0,justifyContent:\"center\",children:Object(T.jsx)(O.a,{className:c.createButton,color:\"primary\",type:\"submit\",variant:\"contained\",children:\"Create\"})})]})]})})},ge=Object(d.a)((function(e){return{box:Object(o.a)({},e.breakpoints.down(600),{maxWidth:\"none!important\",maxHeight:\"95vh!important\",width:\"75vw!important\"}),closeButton:{position:\"absolute\",top:1,right:1,fontSize:\"1.1rem!important\",cursor:\"pointer\"}}})),fe=function(e){var t=e.modalOpen,n=e.setModalOpen,r=e.websocket,a=e.setThreadOpen,s=e.setThreadId,c=ge(),o=function(){n(!1)};return Object(T.jsx)(se.a,{open:t,onClose:o,\"aria-labelledby\":\"modal-modal-title\",\"aria-describedby\":\"modal-modal-description\",children:Object(T.jsxs)(ae.a,{sx:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",maxWidth:\"40vw\",bgcolor:\"background.paper\",border:\"2px solid #000\",boxShadow:24,p:4},className:c.box,children:[Object(T.jsx)(oe.a,{className:c.closeButton,onClick:o}),Object(T.jsx)(he,{websocket:r,setModalOpen:n,setThreadOpen:a,setThreadId:s})]})})},Oe=n(237),xe=Object(d.a)((function(e){var t;return{newThreadButton:(t={backgroundColor:\"#5F4B8BFF\",marginTop:\"1rem\",\"&:hover\":{backgroundColor:\"#7159a6\"}},Object(o.a)(t,e.breakpoints.down(1e3),{fontSize:\"0.8rem\",padding:\"6px 10px\"}),Object(o.a)(t,e.breakpoints.down(800),{fontSize:\"0.7rem\",padding:\"6px 6px\"}),Object(o.a)(t,e.breakpoints.down(600),{fontSize:\"0.875rem\",padding:\"6px 16px\"}),t),desktopContainer:Object(o.a)({},e.breakpoints.up(1280),{width:\"70vw\"}),mobileWelcomeCard:{maxWidth:\"15rem\",margin:\"auto\",marginTop:\"1rem\"},mobileSubtitle:{fontSize:\"0.9rem\"}}})),ve=function(e){var t=e.history,n=xe(),a=Object(r.useContext)(I),s=a.user,c=a.setUser,o=Object(r.useState)(\"\"),i=Object(j.a)(o,2),u=i[0],l=i[1],d=Object(r.useContext)(M),m=d.websocket,h=d.setWebsocket,g=k(),f=g.getIsLoggedIn,x=g.getUsernameById,v=S(),w=v.getThreadIds,y=v.getMessages,C=K().height,F=Object(r.useState)(C-64),B=Object(j.a)(F,2),N=B[0],E=B[1],_=Object(r.useState)([]),U=Object(j.a)(_,2),R=U[0],P=U[1],z=Object(r.useState)([]),Y=Object(j.a)(z,2),H=Y[0],V=Y[1],q=Object(r.useState)(!1),J=Object(j.a)(q,2),G=J[0],Q=J[1],Z=Object(r.useState)(0),$=Object(j.a)(Z,2),ee=$[0],ne=$[1],ae=Object(r.useState)([]),se=Object(j.a)(ae,2),ce=se[0],oe=se[1],ie=Object(r.useState)(Date.now()),ue=Object(j.a)(ie,2),le=ue[0],de=ue[1],me=Object(r.useState)(Date.now()),pe=Object(j.a)(me,2),be=pe[0],je=pe[1],he=Object(r.useState)(Date.now()),ge=Object(j.a)(he,2),ve=ge[0],we=ge[1],ye=Object(r.useState)(50),ke=Object(j.a)(ye,2),Se=ke[0],Te=ke[1],Ce=Object(r.useState)(!1),Ie=Object(j.a)(Ce,2),Fe=Ie[0],Be=Ie[1],Ne=Object(r.useState)({type:\"\",contents:\"\",timestamp:new Date,user_id:0,thread_id:0}),Ee=Object(j.a)(Ne,2),Me=Ee[0],_e=Ee[1],Ae=Object(X.useMediaQuery)({query:\"(max-width: 600px)\"}),We=Object(X.useMediaQuery)({query:\"(min-width: 1280px)\"});Object(r.useEffect)((function(){try{E(Ae?C-56:C-64)}catch(e){console.log(e.message)}}),[Ae]),Object(r.useEffect)((function(){Object(b.a)(p.a.mark((function e(){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(\"USER: \",s),e.next=4,f();case 4:return(n=e.sent).success||t.push(\"/login\"),c(n.id),e.next=9,x(n.id);case 9:if(r=e.sent,l(r.username),console.log(\"Logged user: \",s,n.id),0===s){e.next=17;break}return e.next=15,w(n.id);case 15:(a=e.sent).length>0?P(a):P([{thread_id:0}]);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0.message);case 22:case\"end\":return e.stop()}}),e,null,[[0,19]])})))()}),[s,be]),Object(r.useEffect)((function(){Object(b.a)(p.a.mark((function e(){var t,n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(R.length>0)){e.next=17;break}if(0===R[0].thread_id){e.next=17;break}t=[],n=0;case 5:if(!(n<R.length)){e.next=14;break}return e.next=8,y(R[n].thread_id);case 8:r=e.sent,a={id:R[n].thread_id,timestamp:r.length>0?r[0].timestamp:\"1999-02-06T05:47:00\"},t.push(a);case 11:n++,e.next=5;break;case 14:t.sort((function(e,t){return e.timestamp<t.timestamp?1:t.timestamp<e.timestamp?-1:0})),console.log(\"IDARRAY\",t),V(t);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0.message);case 22:case\"end\":return e.stop()}}),e,null,[[0,19]])})))()}),[R,ve]),Object(r.useEffect)((function(){Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,0===ee){e.next=7;break}return e.next=4,y(ee);case 4:t=e.sent,n=t.reverse(),oe(n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case\"end\":return e.stop()}}),e,null,[[0,9]])})))()}),[ee,le]),Object(r.useEffect)((function(){try{if(\"\"!==Me.type&&Me.thread_id===ee){var e={id:Date.now(),user_id:Me.user_id,contents:Me.contents,timestamp:Me.timestamp};oe((function(t){return[].concat(Object(A.a)(t),[e])})),Te(Se+1)}}catch(t){console.log(t.message)}}),[Me]),Object(r.useEffect)((function(){try{if(0!==R.length&&(void 0===m||2===m.readyState||3===m.readyState)){console.log(\"READYSTATE \",null===m||void 0===m?void 0:m.readyState);var e=new WebSocket(\"ws://localhost:3001\");e.addEventListener(\"open\",(function(t){try{console.log(\"Server is opened.\");var n={type:\"client\",user_id:s,threads:R};e.send(JSON.stringify(n))}catch(r){console.log(r.message)}})),e.addEventListener(\"message\",(function(t){try{if(\"ping\"!==t.data){console.log(\"Message from server \",JSON.parse(t.data).thread_id);var n=JSON.parse(t.data);\"message\"===n.type?(_e(n),we(Date.now())):\"newThread\"===n.type&&je(Date.now())}else setTimeout((function(){return e.send(\"pong\")}),1e3)}catch(r){console.log(r.message)}})),e.addEventListener(\"close\",(function(e){try{console.log(\"Websocket connection closed.\"),de(Date.now())}catch(t){console.log(t.message)}})),h(e),console.log(\"NEW SOCKET\")}}catch(t){console.log(t.message)}}),[le,R]);var Le=function(){Be(!0)};return Object(T.jsxs)(T.Fragment,{children:[Ae?Object(T.jsx)(W.a,{container:!0,direction:\"column\",style:{height:N},children:G?Object(T.jsx)(W.a,{item:!0,children:Object(T.jsx)(te,{messages:ce,id:ee,websocket:m,messageAmount:Se,setMessageAmount:Te,setThreadOpen:Q,setThreadId:ne})}):Object(T.jsxs)(W.a,{item:!0,children:[Object(T.jsx)(Oe.a,{className:n.mobileWelcomeCard,children:Object(T.jsxs)(W.a,{container:!0,alignItems:\"center\",justify:\"center\",direction:\"column\",children:[Object(T.jsxs)(L.a,{component:\"h6\",variant:\"h6\",children:[\"Welcome \",u,\"!\"]}),Object(T.jsx)(L.a,{className:n.mobileSubtitle,component:\"div\",variant:\"body1\",children:\"This is Chat App made by Tommi.\"})]})}),Object(T.jsx)(O.a,{onClick:Le,color:\"primary\",variant:\"contained\",className:n.newThreadButton,children:\"Create a new chat thread\"}),Object(T.jsx)(W.a,{container:!0,style:{borderTop:\"1px solid #5F4B8BFF\",marginTop:\"1rem\"},children:Object(T.jsxs)(D.a,{style:{padding:0,width:\"100vw\"},children:[H.map((function(e){return Object(T.jsx)(re,{id:e.id,setThreadOpen:Q,setThreadId:ne,threadOpen:G,threadId:ee,updateThreadButtonInfos:ve})})),\" \"]})})]})}):Object(T.jsx)(T.Fragment,{children:We?Object(T.jsx)(Oe.a,{style:{width:\"70vw\",margin:\"auto\"},children:Object(T.jsxs)(W.a,{container:!0,direction:\"row\",style:{height:N},className:n.desktopContainer,children:[Object(T.jsxs)(W.a,{item:!0,style:{width:\"30%\",borderRight:\"1px solid #5F4B8BFF\",maxHeight:N,overflowY:\"auto\"},children:[Object(T.jsx)(O.a,{onClick:Le,color:\"primary\",variant:\"contained\",className:n.newThreadButton,children:\"Create a new chat thread\"}),Object(T.jsx)(W.a,{container:!0,style:{borderTop:\"1px solid #5F4B8BFF\",marginTop:\"1rem\"},children:Object(T.jsxs)(D.a,{style:{padding:0,width:\"100%\"},children:[H.map((function(e){return Object(T.jsx)(re,{id:e.id,setThreadOpen:Q,setThreadId:ne,threadOpen:G,threadId:ee,updateThreadButtonInfos:ve})})),\" \"]})})]}),Object(T.jsx)(W.a,{item:!0,style:{width:\"70%\"},children:G?Object(T.jsx)(te,{messages:ce,id:ee,websocket:m,messageAmount:Se,setMessageAmount:Te,setThreadOpen:Q,setThreadId:ne}):Object(T.jsxs)(W.a,{container:!0,alignItems:\"center\",justify:\"center\",direction:\"column\",children:[Object(T.jsxs)(L.a,{component:\"h1\",variant:\"h2\",children:[\"Welcome \",u,\"!\"]}),Object(T.jsx)(L.a,{component:\"div\",variant:\"body1\",children:\"This is Chat App made by Tommi.\"})]})})]})}):Object(T.jsxs)(W.a,{container:!0,direction:\"row\",style:{height:N},className:n.desktopContainer,children:[Object(T.jsxs)(W.a,{item:!0,style:{width:\"30%\",borderRight:\"1px solid #5F4B8BFF\",maxHeight:N,overflowY:\"auto\"},children:[Object(T.jsx)(O.a,{onClick:Le,color:\"primary\",variant:\"contained\",className:n.newThreadButton,children:\"Create a new chat thread\"}),Object(T.jsx)(W.a,{container:!0,style:{borderTop:\"1px solid #5F4B8BFF\",marginTop:\"1rem\"},children:Object(T.jsxs)(D.a,{style:{padding:0,width:\"100%\"},children:[H.map((function(e){return Object(T.jsx)(re,{id:e.id,setThreadOpen:Q,setThreadId:ne,threadOpen:G,threadId:ee,updateThreadButtonInfos:ve})})),\" \"]})})]}),Object(T.jsx)(W.a,{item:!0,style:{width:\"70%\"},children:G?Object(T.jsx)(te,{messages:ce,id:ee,websocket:m,messageAmount:Se,setMessageAmount:Te,setThreadOpen:Q,setThreadId:ne}):Object(T.jsxs)(W.a,{container:!0,alignItems:\"center\",justify:\"center\",direction:\"column\",children:[Object(T.jsxs)(L.a,{component:\"h1\",variant:\"h2\",children:[\"Welcome \",u,\"!\"]}),Object(T.jsx)(L.a,{component:\"div\",variant:\"body1\",children:\"This is Chat App made by Tommi.\"})]})})]})}),Object(T.jsx)(fe,{modalOpen:Fe,setModalOpen:Be,websocket:m,setThreadOpen:Q,setThreadId:ne})]})},we=Object(d.a)((function(e){return{loginHeader:Object(o.a)({},e.breakpoints.down(600),{fontSize:\"2rem\"}),loginButton:{backgroundColor:\"#5F4B8BFF\",marginTop:\"2rem\",marginBottom:\"0.5rem\",\"&:hover\":{backgroundColor:\"#7159a6\"}}}})),ye=Object(l.g)((function(e){var t=e.history,n=we(),r=k().postLogin,a=be(function(){var e=Object(b.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(s);case 3:n=e.sent,localStorage.setItem(\"id\",n.id),t.push(\"/\"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(\"doLogin\",e.t0.message);case 11:case\"end\":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),{username:\"\",password:\"\"}),s=a.inputs,c=a.handleInputChange,o=a.handleSubmit;return Object(T.jsxs)(W.a,{container:!0,children:[Object(T.jsx)(W.a,{container:!0,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",children:Object(T.jsx)(L.a,{className:n.loginHeader,component:\"h3\",variant:\"h3\",gutterBottom:!0,children:\"Login\"})}),Object(T.jsx)(W.a,{container:!0,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",children:Object(T.jsx)(\"form\",{onSubmit:o,children:Object(T.jsxs)(W.a,{container:!0,direction:\"column\",children:[Object(T.jsx)(W.a,{container:!0,item:!0,children:Object(T.jsx)(U.a,{type:\"text\",name:\"username\",label:\"Username\",onChange:c,value:s.username})}),Object(T.jsx)(W.a,{container:!0,item:!0,children:Object(T.jsx)(U.a,{type:\"password\",name:\"password\",label:\"Password\",onChange:c,value:s.password})}),Object(T.jsx)(W.a,{container:!0,item:!0,children:Object(T.jsx)(O.a,{fullWidth:!0,className:n.loginButton,color:\"primary\",type:\"submit\",variant:\"contained\",children:\"Login\"})})]})})})]})})),ke=Object(d.a)((function(e){return{registerHeader:Object(o.a)({},e.breakpoints.down(600),{fontSize:\"2rem\"}),registerButton:{backgroundColor:\"#5F4B8BFF\",marginTop:\"2rem\",marginBottom:\"0.5rem\",\"&:hover\":{backgroundColor:\"#7159a6\"}}}})),Se=function(e){var t=e.setToggle,n=ke(),a=k(),s=a.register,c=a.getUserAvailable,o={username:[\"required\",\"minStringLength: 3\",\"maxStringLength: 15\",\"isAvailable\"],password:[\"required\",\"minStringLength: 5\"],confirm:[\"required\",\"isPasswordMatch\"]},i={username:[\"Required field\",\"Minimum of 3 characters\",\"Too many characters!\",\"Username is not available\"],password:[\"Required field\",\"Minimum of 5 characters\"],confirm:[\"Required field\",\"Passwords do not match\"]},u=be(function(){var e=Object(b.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(l.username);case 3:if(!e.sent){e.next=10;break}return delete l.confirm,e.next=8,s(l);case 8:(n=e.sent).length>0&&(alert(n),t(!0));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:case\"end\":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),{username:\"\",password:\"\",confirm:\"\"}),l=u.inputs,d=u.handleInputChange,m=u.handleSubmit;return Object(r.useEffect)((function(){me.ValidatorForm.addValidationRule(\"isAvailable\",function(){var e=Object(b.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>2)){e.next=12;break}return e.prev=1,e.next=4,c(t);case 4:return n=e.sent,e.abrupt(\"return\",n);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0.message),e.abrupt(\"return\",!0);case 12:case\"end\":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),me.ValidatorForm.addValidationRule(\"isPasswordMatch\",(function(e){return e===l.password}))}),[l]),Object(T.jsxs)(W.a,{container:!0,alignItems:\"center\",children:[Object(T.jsx)(W.a,{container:!0,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",children:Object(T.jsx)(L.a,{className:n.registerHeader,component:\"h3\",variant:\"h3\",gutterBottom:!0,children:\"Register\"})}),Object(T.jsx)(W.a,{item:!0,xs:12,container:!0,direction:\"column\",alignItems:\"center\",children:Object(T.jsx)(me.ValidatorForm,{onSubmit:m,children:Object(T.jsxs)(W.a,{container:!0,direction:\"column\",children:[Object(T.jsx)(W.a,{container:!0,item:!0,children:Object(T.jsx)(me.TextValidator,{fullWidth:!0,type:\"text\",name:\"username\",label:\"Username\",onChange:d,value:l.username,validators:o.username,errorMessages:i.username})}),Object(T.jsx)(W.a,{container:!0,item:!0,children:Object(T.jsx)(me.TextValidator,{fullWidth:!0,type:\"password\",name:\"password\",label:\"Password\",onChange:d,value:l.password,validators:o.password,errorMessages:i.password})}),Object(T.jsx)(W.a,{container:!0,item:!0,children:Object(T.jsx)(me.TextValidator,{fullWidth:!0,type:\"password\",name:\"confirm\",label:\"Confirm password\",onChange:d,value:l.confirm,validators:o.confirm,errorMessages:i.confirm})}),Object(T.jsx)(W.a,{container:!0,item:!0,children:Object(T.jsx)(O.a,{fullWidth:!0,className:n.registerButton,color:\"primary\",type:\"submit\",variant:\"contained\",children:\"Register\"})})]})})})]})},Te=n(233),Ce=function(){var e=Object(r.useState)(!0),t=Object(j.a)(e,2),n=t[0],a=t[1];return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(W.a,{container:!0,justify:\"center\",children:Object(T.jsxs)(Te.a,{style:{margin:\"5rem 2rem 3rem 2rem\",padding:\"3rem\",maxWidth:\"18rem\"},children:[n?Object(T.jsx)(ye,{}):Object(T.jsx)(Se,{setToggle:a}),Object(T.jsx)(W.a,{container:!0,justify:\"center\",children:Object(T.jsx)(O.a,{onClick:function(){a(!n)},children:n?\"or register\":\"or login\"})})]})})})},Ie=function(e){e.history;var t=k().logout,n=Object(r.useContext)(I),a=n.user,s=n.setUser,c=Object(r.useContext)(M).websocket;return Object(r.useEffect)((function(){Object(b.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(\"USER:\",a),e.next=4,t();case 4:n=e.sent,s(0),void 0!==c&&c.close(),console.log(\"Logout success: \",n.success,a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case\"end\":return e.stop()}}),e,null,[[0,10]])})))()})),Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(l.a,{to:\"/login\"})})},Fe=function(){var e=Object(r.useState)({id:\"\",username:\"\"}),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(r.useContext)(M).websocket,c=k().getProfile;return Object(r.useEffect)((function(){Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,void 0!==s&&s.close(),e.next=4,c();case 4:t=e.sent,console.log(\"Profile: \",t),a(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case\"end\":return e.stop()}}),e,null,[[0,9]])})))()}),[]),Object(T.jsx)(\"div\",{style:{whiteSpace:\"pre-line\"},children:Object(T.jsx)(\"h1\",{children:n?n.username+\"\\n\"+n.id:\"Loading...\"})})},Be=Object(d.a)((function(e){return{content:Object(o.a)({paddingTop:64,textAlign:\"center\",width:\"100vw\"},e.breakpoints.down(600),{paddingTop:56})}})),Ne=function(){var e=Be();return Object(T.jsx)(u.a,{children:Object(T.jsx)(F,{children:Object(T.jsx)(_,{children:Object(T.jsxs)(i.a,{maxWidth:\"xl\",style:{margin:0,padding:0},children:[Object(T.jsx)(N,{}),Object(T.jsx)(\"main\",{className:e.content,children:Object(T.jsxs)(l.d,{children:[Object(T.jsx)(l.b,{path:\"/\",exact:!0,component:ve}),Object(T.jsx)(l.b,{path:\"/login\",component:Ce}),Object(T.jsx)(l.b,{path:\"/logout\",component:Ie}),Object(T.jsx)(l.b,{path:\"/profile\",component:Fe})]})})]})})})})},Ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,243)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(T.jsx)(a.a.StrictMode,{children:Object(T.jsx)(Ne,{})}),document.getElementById(\"root\")),Ee()}},[[161,1,2]]]);","name":"static/js/main.f1307848.chunk.js","map":{"version":3,"sources":["static/js/main.f1307848.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","defineProperty","Container","react_router_dom","react_router","makeStyles","regenerator","regenerator_default","asyncToGenerator","slicedToArray","AppBar","Toolbar","Link","Button","ExitToApp","ExitToApp_default","config","backendUrl","doFetch","_ref","Object","a","mark","_callee","url","options","response","json","_args","arguments","wrap","_context","prev","next","length","undefined","fetch","sent","error","Error","message","ok","abrupt","stop","_x","apply","apiHooks_useUsers","getUsers","_ref2","_callee2","fetchOptions","_context2","method","credentials","t0","getUserAvailable","_ref3","_callee3","username","_context3","alert","_x2","getUsernameById","_ref4","_callee4","id","_context4","_x3","register","_ref5","_callee5","inputs","result","_context5","headers","body","JSON","stringify","console","log","_x4","getIsLoggedIn","_ref6","_callee6","_context6","postLogin","_ref7","_callee7","_context7","_x5","logout","_ref8","_callee8","_context8","getProfile","_ref9","_callee9","_context9","apiHooks_useChats","getThreadIds","_ref10","_callee10","userId","_context10","_x6","getUserIds","_ref11","_callee11","_context11","_x7","getThreadName","_ref12","_callee12","threadId","thread","_context12","name","_x8","postMessage","_ref13","_callee13","messageObject","_context13","success","_x9","getMessages","_ref14","_callee14","_context14","_x10","getAllMessages","_ref15","_callee15","_context15","_x11","getLastMessage","_ref16","_callee16","_context16","_x12","createNewChatThread","_ref17","_callee17","chatThreadObject","_context17","_x13","jsx_runtime","contextDefaultValues","user","setUser","MediaContext","createContext","mediaContext_MediaProvider","children","_useState","_useState2","Provider","value","useStyles","theme","appBar","zIndex","drawer","backgroundColor","width","root","flexGrow","menuButton","marginRight","spacing","title","paddingRight","toolbar","display","justifyContent","itemPack","alignItems","logo","position","left","transform","nav","classes","logged","setLogged","_useContext","isLoggedIn","className","component","to","color","style","textDecoration","startIcon","websocketContext_contextDefaultValues","websocket","setWebsocket","WebsocketContext","websocketContext_WebsocketProvider","toConsumableArray","Grid","Typography","List","TextField","Send","Send_default","IconButton","ListItem","ListItemText","moment","moment_default","message_useStyles","_message","_ownMessage","marginBottom","borderRadius","padding","maxWidth","breakpoints","down","ownMessage","inline","inlineOwn","timestamp","fontSize","marginLeft","dateIndicator","background","textAlign","components_message","message_id","user_id","contents","setMessageId","usernames","index","messageArray","setUsername","_useState3","_useState4","time","setTime","_useState5","_useState6","setOwnMessage","_useState7","_useState8","showDate","setShowDate","formattedTimestamp","format","i","formattedPreviousTimestamp","d","Date","hours","getHours","toString","minutes","getMinutes","e","flexDirection","container","variant","justify","item","primary","secondary","getWindowDimensions","_window","window","innerWidth","height","innerHeight","useWindowDimensions","windowDimensions","setWindowDimensions","handleResize","addEventListener","removeEventListener","react_responsive","ArrowBack","ArrowBack_default","thread_useStyles","textField","marginTop","sendButton","overflowX","overflowY","arrowBack","top","components_thread","messages","messageAmount","setMessageAmount","setThreadOpen","setThreadId","setMessage","messageId","showButton","setShowButton","setUsernames","_useState9","_useState10","moreMessages","setMoreMessages","_useState11","_useState12","loadMore","setLoadMore","_useState13","_useState14","messageScroll","setMessageScroll","_useState15","_useState16","currentThread","setCurrentThread","_useChats","_useState17","_useState18","heightCorrected","setHeightCorrected","messagesEndRef","messagesEndRef2","isMobile","query","scrollToBottom","number","_messagesEndRef$curre","_messagesEndRef2$curr","current","scrollIntoView","userIds","usernameArray","_user","userObject","handleSubmit","event","tzoffset","localISOTime","webSocketUpdate","preventDefault","getTimezoneOffset","now","toISOString","slice","thread_id","type","send","loadAllMessages","amount","allMessages","splice","onClick","direction","map","ref","onSubmit","label","onInput","target","size","fill","threadButton_useStyles","text","lastMessage","overflow","textOverflow","whiteSpace","button","borderBottom","cursor","threadButton","threadOpen","updateThreadButtonInfos","setName","setLastMessage","threadName","lastMessageData","formatedDate","difference","formatedTime","_lastMessageObject","startOf","diff","close","Box","Modal_Modal","Close","Close_default","FormControl","InputLabel","Select","MenuItem","lib","objectSpread2","formHooks","callback","initState","setInputs","handleInputChange","persist","handleFileChange","files","threadForm_useStyles","select","minWidth","formControl","header","createButton","threadForm","setModalOpen","usersArray","setUsersArray","newThreadId","setNewThreadId","_useForm","user2","user2_id","users","arrayForUsers","onChange","validators","errorMessages","autoWidth","modal_useStyles","box","maxHeight","closeButton","right","modal","modalOpen","handleClose","open","onClose","sx","bgcolor","border","boxShadow","p","Card","home_useStyles","_newThreadButton","newThreadButton","desktopContainer","up","mobileWelcomeCard","margin","mobileSubtitle","home","history","setusername","_useContext2","_useUsers","threads","setThreads","sortedThreads","setSortedThreads","setMessages","updateState","setUpdateState","updateThreadButtons","setUpdateThreadButtons","_useState19","_useState20","setUpdateThreadButtonInfos","_useState21","_useState22","_useState23","_useState24","_useState25","_useState26","wsMessage","setWsMessage","isDesktop","chatThreads","idArray","threadMessages","threadIdObject","sort","b","reversedArray","reverse","newMessageObject","concat","readyState","socket","WebSocket","client","data","parse","setTimeout","setCreateNewChatThreadOpen","borderTop","borderRight","loginForm_useStyles","loginHeader","loginButton","loginForm","userdata","localStorage","setItem","password","gutterBottom","fullWidth","registerForm_useStyles","registerHeader","registerButton","registerForm","setToggle","confirm","addValidationRule","available","xs","Card_Card","login","toggle","views_logout","profile","App_useStyles","content","paddingTop","src_App","path","exact","src_reportWebVitals","onPerfEntry","Function","then","bind","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpmy-app\"] = this[\"webpackJsonpmy-app\"] || []).push([[0],{\n\n/***/ 139:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 161:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(17);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(139);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Container/Container.js\nvar Container = __webpack_require__(234);\n\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(40);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(18);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/styles/makeStyles.js\nvar makeStyles = __webpack_require__(210);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(5);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 1 modules\nvar slicedToArray = __webpack_require__(9);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/AppBar/AppBar.js\nvar AppBar = __webpack_require__(213);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Toolbar/Toolbar.js\nvar Toolbar = __webpack_require__(215);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Link/Link.js\nvar Link = __webpack_require__(216);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Button/Button.js\nvar Button = __webpack_require__(217);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/icons/ExitToApp.js\nvar ExitToApp = __webpack_require__(113);\nvar ExitToApp_default = /*#__PURE__*/__webpack_require__.n(ExitToApp);\n\n// CONCATENATED MODULE: ./src/config.ts\nvar env= true?'production':undefined;var envConfig={development:{backendUrl:'http://localhost:3001'},production:{backendUrl:'https://something.com'}};/* harmony default export */ var config = (envConfig[env]);\n// CONCATENATED MODULE: ./src/hooks/apiHooks.tsx\nvar doFetch=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(url){var options,response,json,_args=arguments;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options=_args.length>1&&_args[1]!==undefined?_args[1]:{};_context.next=3;return fetch(config.backendUrl+url,options);case 3:response=_context.sent;_context.next=6;return response.json();case 6:json=_context.sent;if(!json.error){_context.next=11;break;}throw new Error(json.message+': '+json.error);case 11:if(response.ok){_context.next=15;break;}throw new Error('doFetch failed');case 15:return _context.abrupt(\"return\",json);case 16:case\"end\":return _context.stop();}}},_callee);}));return function doFetch(_x){return _ref.apply(this,arguments);};}();var apiHooks_useUsers=function useUsers(){var getUsers=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var fetchOptions;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetchOptions={method:'GET',credentials:'include'};_context2.prev=1;_context2.next=4;return doFetch('/users',fetchOptions);case 4:return _context2.abrupt(\"return\",_context2.sent);case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](1);throw new Error(_context2.t0.message);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[1,7]]);}));return function getUsers(){return _ref2.apply(this,arguments);};}();var getUserAvailable=/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(username){return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return doFetch('/users/username/'+username);case 3:return _context3.abrupt(\"return\",_context3.sent);case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);alert(_context3.t0.message);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function getUserAvailable(_x2){return _ref3.apply(this,arguments);};}();var getUsernameById=/*#__PURE__*/function(){var _ref4=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(id){return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return doFetch('/user/'+id);case 3:return _context4.abrupt(\"return\",_context4.sent);case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](0);alert(_context4.t0.message);case 9:case\"end\":return _context4.stop();}}},_callee4,null,[[0,6]]);}));return function getUsernameById(_x3){return _ref4.apply(this,arguments);};}();var register=/*#__PURE__*/function(){var _ref5=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(inputs){var fetchOptions,result;return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:fetchOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(inputs),credentials:'include'};_context5.prev=1;_context5.next=4;return doFetch('/user',fetchOptions);case 4:result=_context5.sent;console.log('RegisterResult',result.message);return _context5.abrupt(\"return\",result.message);case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](1);alert(_context5.t0.message);case 12:case\"end\":return _context5.stop();}}},_callee5,null,[[1,9]]);}));return function register(_x4){return _ref5.apply(this,arguments);};}();var getIsLoggedIn=/*#__PURE__*/function(){var _ref6=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee6(){var fetchOptions;return regenerator_default.a.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:fetchOptions={method:'GET',credentials:'include'};_context6.prev=1;_context6.next=4;return doFetch('/isloggedin',fetchOptions);case 4:return _context6.abrupt(\"return\",_context6.sent);case 7:_context6.prev=7;_context6.t0=_context6[\"catch\"](1);throw new Error(_context6.t0.message);case 10:case\"end\":return _context6.stop();}}},_callee6,null,[[1,7]]);}));return function getIsLoggedIn(){return _ref6.apply(this,arguments);};}();var postLogin=/*#__PURE__*/function(){var _ref7=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee7(inputs){var fetchOptions,result;return regenerator_default.a.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:fetchOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(inputs),credentials:'include'};_context7.prev=1;_context7.next=4;return doFetch('/login',fetchOptions);case 4:result=_context7.sent;return _context7.abrupt(\"return\",result);case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](1);alert(_context7.t0.message);case 11:case\"end\":return _context7.stop();}}},_callee7,null,[[1,8]]);}));return function postLogin(_x5){return _ref7.apply(this,arguments);};}();var logout=/*#__PURE__*/function(){var _ref8=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee8(){var fetchOptions;return regenerator_default.a.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:fetchOptions={method:'DELETE',credentials:'include'};_context8.prev=1;_context8.next=4;return doFetch('/logout',fetchOptions);case 4:return _context8.abrupt(\"return\",_context8.sent);case 7:_context8.prev=7;_context8.t0=_context8[\"catch\"](1);throw new Error(_context8.t0.message);case 10:case\"end\":return _context8.stop();}}},_callee8,null,[[1,7]]);}));return function logout(){return _ref8.apply(this,arguments);};}();var getProfile=/*#__PURE__*/function(){var _ref9=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee9(){var fetchOptions;return regenerator_default.a.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:fetchOptions={method:'GET',credentials:'include'};_context9.prev=1;_context9.next=4;return doFetch('/profile',fetchOptions);case 4:return _context9.abrupt(\"return\",_context9.sent);case 7:_context9.prev=7;_context9.t0=_context9[\"catch\"](1);throw new Error(_context9.t0.message);case 10:case\"end\":return _context9.stop();}}},_callee9,null,[[1,7]]);}));return function getProfile(){return _ref9.apply(this,arguments);};}();return{getUsers:getUsers,getUserAvailable:getUserAvailable,getUsernameById:getUsernameById,register:register,getIsLoggedIn:getIsLoggedIn,postLogin:postLogin,logout:logout,getProfile:getProfile};};var apiHooks_useChats=function useChats(){var getThreadIds=/*#__PURE__*/function(){var _ref10=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee10(userId){return regenerator_default.a.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.prev=0;_context10.next=3;return doFetch('/threads/'+userId);case 3:return _context10.abrupt(\"return\",_context10.sent);case 6:_context10.prev=6;_context10.t0=_context10[\"catch\"](0);alert(_context10.t0.message);case 9:case\"end\":return _context10.stop();}}},_callee10,null,[[0,6]]);}));return function getThreadIds(_x6){return _ref10.apply(this,arguments);};}();var getUserIds=/*#__PURE__*/function(){var _ref11=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee11(userId){return regenerator_default.a.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.prev=0;_context11.next=3;return doFetch('/threadusers/'+userId);case 3:return _context11.abrupt(\"return\",_context11.sent);case 6:_context11.prev=6;_context11.t0=_context11[\"catch\"](0);alert(_context11.t0.message);case 9:case\"end\":return _context11.stop();}}},_callee11,null,[[0,6]]);}));return function getUserIds(_x7){return _ref11.apply(this,arguments);};}();var getThreadName=/*#__PURE__*/function(){var _ref12=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee12(threadId){var thread;return regenerator_default.a.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.prev=0;_context12.next=3;return doFetch('/thread/'+threadId);case 3:thread=_context12.sent;return _context12.abrupt(\"return\",thread.name);case 7:_context12.prev=7;_context12.t0=_context12[\"catch\"](0);alert(_context12.t0.message);case 10:case\"end\":return _context12.stop();}}},_callee12,null,[[0,7]]);}));return function getThreadName(_x8){return _ref12.apply(this,arguments);};}();var postMessage=/*#__PURE__*/function(){var _ref13=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee13(messageObject){var fetchOptions,result;return regenerator_default.a.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:fetchOptions={method:'POST',headers:{'Content-Type':'application/json'},body:messageObject,credentials:'include'};_context13.prev=1;_context13.next=4;return doFetch('/message',fetchOptions);case 4:result=_context13.sent;return _context13.abrupt(\"return\",result.success);case 8:_context13.prev=8;_context13.t0=_context13[\"catch\"](1);alert(_context13.t0.message);case 11:case\"end\":return _context13.stop();}}},_callee13,null,[[1,8]]);}));return function postMessage(_x9){return _ref13.apply(this,arguments);};}();var getMessages=/*#__PURE__*/function(){var _ref14=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee14(threadId){return regenerator_default.a.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.prev=0;_context14.next=3;return doFetch('/messages/'+threadId);case 3:return _context14.abrupt(\"return\",_context14.sent);case 6:_context14.prev=6;_context14.t0=_context14[\"catch\"](0);alert(_context14.t0.message);case 9:case\"end\":return _context14.stop();}}},_callee14,null,[[0,6]]);}));return function getMessages(_x10){return _ref14.apply(this,arguments);};}();var getAllMessages=/*#__PURE__*/function(){var _ref15=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee15(threadId){return regenerator_default.a.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.prev=0;_context15.next=3;return doFetch('/all_messages/'+threadId);case 3:return _context15.abrupt(\"return\",_context15.sent);case 6:_context15.prev=6;_context15.t0=_context15[\"catch\"](0);alert(_context15.t0.message);case 9:case\"end\":return _context15.stop();}}},_callee15,null,[[0,6]]);}));return function getAllMessages(_x11){return _ref15.apply(this,arguments);};}();var getLastMessage=/*#__PURE__*/function(){var _ref16=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee16(id){return regenerator_default.a.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.prev=0;_context16.next=3;return doFetch('/last_message/'+id);case 3:return _context16.abrupt(\"return\",_context16.sent);case 6:_context16.prev=6;_context16.t0=_context16[\"catch\"](0);alert(_context16.t0.message);case 9:case\"end\":return _context16.stop();}}},_callee16,null,[[0,6]]);}));return function getLastMessage(_x12){return _ref16.apply(this,arguments);};}();var createNewChatThread=/*#__PURE__*/function(){var _ref17=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee17(chatThreadObject){var fetchOptions,result;return regenerator_default.a.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:fetchOptions={method:'POST',headers:{'Content-Type':'application/json'},body:chatThreadObject,credentials:'include'};_context17.prev=1;_context17.next=4;return doFetch('/new_thread',fetchOptions);case 4:result=_context17.sent;return _context17.abrupt(\"return\",result);case 8:_context17.prev=8;_context17.t0=_context17[\"catch\"](1);alert(_context17.t0.message);case 11:case\"end\":return _context17.stop();}}},_callee17,null,[[1,8]]);}));return function createNewChatThread(_x13){return _ref17.apply(this,arguments);};}();return{getThreadIds:getThreadIds,getUserIds:getUserIds,getThreadName:getThreadName,postMessage:postMessage,getMessages:getMessages,getAllMessages:getAllMessages,getLastMessage:getLastMessage,createNewChatThread:createNewChatThread};};\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/contexts/mediaContext.tsx\nvar contextDefaultValues={user:0,setUser:function setUser(){}};var MediaContext=/*#__PURE__*/react_default.a.createContext(contextDefaultValues);var mediaContext_MediaProvider=function MediaProvider(_ref){var children=_ref.children;var _useState=Object(react[\"useState\"])(contextDefaultValues.user),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),user=_useState2[0],setUser=_useState2[1];return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MediaContext.Provider,{value:{user:user,setUser:setUser},children:children});};\n// CONCATENATED MODULE: ./src/components/nav.tsx\n/* eslint-disable react-hooks/exhaustive-deps */var useStyles=Object(makeStyles[\"a\" /* default */])(function(theme){return{appBar:{zIndex:theme.zIndex.drawer+1,backgroundColor:'#5F4B8BFF',width:'100vw'},root:{flexGrow:1},menuButton:{marginRight:theme.spacing(2)},title:{flexGrow:1,paddingRight:'24px'},toolbar:{display:'flex',justifyContent:'flex-end'},itemPack:{display:'flex',alignItems:'center'},logo:{position:'absolute',display:'flex',alignItems:'center',left:'71px',transform:'translate(-50%)'}};});var nav_Nav=function Nav(){var classes=useStyles();var _useState=Object(react[\"useState\"])(false),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),logged=_useState2[0],setLogged=_useState2[1];var _useContext=Object(react[\"useContext\"])(MediaContext),user=_useContext.user,setUser=_useContext.setUser;var _useUsers=apiHooks_useUsers(),getIsLoggedIn=_useUsers.getIsLoggedIn;Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var isLoggedIn;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;console.log('NAV');_context.next=4;return getIsLoggedIn();case 4:isLoggedIn=_context.sent;if(isLoggedIn.success){setLogged(true);setUser(isLoggedIn.id);}else{setLogged(false);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}))();},[user]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AppBar[\"a\" /* default */],{className:classes.appBar,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Toolbar[\"a\" /* default */],{className:classes.toolbar,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Link[\"a\" /* default */],{component:react_router_dom[\"b\" /* Link */],to:\"/\",className:classes.logo,color:\"inherit\",style:{textDecoration:'none'},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"ChatApp\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:classes.itemPack,children:logged?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{color:\"inherit\",component:react_router_dom[\"b\" /* Link */],to:\"/logout\",children:\"Logout\"})}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{color:\"inherit\",startIcon:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ExitToApp_default.a,{}),component:react_router_dom[\"b\" /* Link */],to:\"/login\",children:\"Login\"})})]})})});};/* harmony default export */ var nav = (nav_Nav);\n// CONCATENATED MODULE: ./src/contexts/websocketContext.tsx\nvar websocketContext_contextDefaultValues={websocket:undefined,setWebsocket:function setWebsocket(){}};var WebsocketContext=/*#__PURE__*/react_default.a.createContext(websocketContext_contextDefaultValues);var websocketContext_WebsocketProvider=function WebsocketProvider(_ref){var children=_ref.children;var _useState=Object(react[\"useState\"])(),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),websocket=_useState2[0],setWebsocket=_useState2[1];return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WebsocketContext.Provider,{value:{websocket:websocket,setWebsocket:setWebsocket},children:children});};\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 2 modules\nvar toConsumableArray = __webpack_require__(25);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Grid/Grid.js\nvar Grid = __webpack_require__(218);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Typography/Typography.js\nvar Typography = __webpack_require__(71);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/List/List.js\nvar List = __webpack_require__(227);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/TextField/TextField.js + 1 modules\nvar TextField = __webpack_require__(106);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/icons/Send.js\nvar Send = __webpack_require__(119);\nvar Send_default = /*#__PURE__*/__webpack_require__.n(Send);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/IconButton/IconButton.js\nvar IconButton = __webpack_require__(231);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/ListItem/ListItem.js\nvar ListItem = __webpack_require__(163);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/ListItemText/ListItemText.js\nvar ListItemText = __webpack_require__(219);\n\n// EXTERNAL MODULE: ./node_modules/moment/moment.js\nvar moment = __webpack_require__(48);\nvar moment_default = /*#__PURE__*/__webpack_require__.n(moment);\n\n// CONCATENATED MODULE: ./src/components/message.tsx\nvar message_useStyles=Object(makeStyles[\"a\" /* default */])(function(theme){var _message,_ownMessage;return{message:(_message={backgroundColor:'lightGrey',marginBottom:0,borderRadius:'1rem',padding:'0.5rem',maxWidth:'60%'},Object(defineProperty[\"a\" /* default */])(_message,theme.breakpoints.down(1000),{maxWidth:'75%'}),Object(defineProperty[\"a\" /* default */])(_message,theme.breakpoints.down(1000),{maxWidth:'85%'}),_message),ownMessage:(_ownMessage={backgroundColor:'#5F4B8BFF',color:'white',marginBottom:0,borderRadius:'1rem',padding:'0.5rem',maxWidth:'60%'},Object(defineProperty[\"a\" /* default */])(_ownMessage,theme.breakpoints.down(1000),{maxWidth:'75%'}),Object(defineProperty[\"a\" /* default */])(_ownMessage,theme.breakpoints.down(600),{maxWidth:'85%'}),_ownMessage),inline:{display:'inline'},inlineOwn:{display:'inline',color:'white'},timestamp:{fontSize:'0.7rem',marginLeft:'2rem'},dateIndicator:{background:'rgb(95, 75, 139, .2)',borderRadius:'0.3rem',padding:'0.2rem',marginBottom:'0.5rem',textAlign:'center'}};});var message_Message=function Message(_ref){var message_id=_ref.message_id,user_id=_ref.user_id,contents=_ref.contents,timestamp=_ref.timestamp,setMessageId=_ref.setMessageId,usernames=_ref.usernames,index=_ref.index,messageArray=_ref.messageArray;var classes=message_useStyles();var _useState=Object(react[\"useState\"])(''),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=Object(react[\"useState\"])(''),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),time=_useState4[0],setTime=_useState4[1];var _useState5=Object(react[\"useState\"])(false),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),ownMessage=_useState6[0],setOwnMessage=_useState6[1];var _useState7=Object(react[\"useState\"])(false),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),showDate=_useState8[0],setShowDate=_useState8[1];var _useContext=Object(react[\"useContext\"])(MediaContext),user=_useContext.user;var formattedTimestamp=moment_default()(timestamp).format('DD.MM.YYYY');Object(react[\"useEffect\"])(function(){try{for(var i=0;i<usernames.length;i++){if(usernames[i].user_id===user_id){setUsername(usernames[i].username);}}if(index!==0){var formattedPreviousTimestamp=moment_default()(messageArray[index-1].timestamp).format('DD.MM.YYYY');if(formattedTimestamp!==formattedPreviousTimestamp){setShowDate(true);}}else{setShowDate(true);}var d=new Date(timestamp);var hours=d.getHours().toString();var minutes=d.getMinutes().toString();if(d.getHours()<10){hours='0'+hours;}if(d.getMinutes()<10){minutes='0'+minutes;}var formatedTime=hours+'.'+minutes;setTime(formatedTime);if(user_id===user){setOwnMessage(true);}else{setOwnMessage(false);}setMessageId(message_id);}catch(e){console.log(e.message);}},[message_id]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ListItem[\"a\" /* default */],{style:{width:'100%',display:'flex',flexDirection:'column'},children:[showDate&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,justifyContent:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{className:classes.dateIndicator,component:\"h6\",variant:\"body1\",children:formattedTimestamp})}),ownMessage?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,justify:\"flex-end\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,className:classes.ownMessage,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ListItemText[\"a\" /* default */],{primary:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,justify:\"space-between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"h2\",children:username}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"span\",variant:\"subtitle1\",className:classes.timestamp,children:time})]})}),secondary:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"span\",variant:\"body2\",className:classes.inlineOwn,children:contents})})})})}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,justify:\"flex-start\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,className:classes.message,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ListItemText[\"a\" /* default */],{primary:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,justify:\"space-between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"h2\",children:username}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"span\",variant:\"subtitle1\",className:classes.timestamp,children:time})]})}),secondary:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"span\",variant:\"body2\",className:classes.inline,color:\"textPrimary\",children:contents})})})})})]})});};/* harmony default export */ var components_message = (message_Message);\n// CONCATENATED MODULE: ./src/hooks/windowDimensionsHook.tsx\nvar getWindowDimensions=function getWindowDimensions(){var _window=window,width=_window.innerWidth,height=_window.innerHeight;return{width:width,height:height};};function useWindowDimensions(){var _useState=Object(react[\"useState\"])(getWindowDimensions()),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),windowDimensions=_useState2[0],setWindowDimensions=_useState2[1];Object(react[\"useEffect\"])(function(){function handleResize(){setWindowDimensions(getWindowDimensions());}window.addEventListener('resize',handleResize);return function(){return window.removeEventListener('resize',handleResize);};},[]);return windowDimensions;}\n// EXTERNAL MODULE: ./node_modules/react-responsive/dist/react-responsive.js\nvar react_responsive = __webpack_require__(67);\n\n// EXTERNAL MODULE: ./node_modules/@mui/icons-material/ArrowBack.js\nvar ArrowBack = __webpack_require__(115);\nvar ArrowBack_default = /*#__PURE__*/__webpack_require__.n(ArrowBack);\n\n// CONCATENATED MODULE: ./src/components/thread.tsx\nvar thread_useStyles=Object(makeStyles[\"a\" /* default */])(function(theme){return{textField:Object(defineProperty[\"a\" /* default */])({width:'70%',backgroundColor:'white',borderRadius:'0.5rem'},theme.breakpoints.down(600),{marginTop:'0.27rem'}),sendButton:Object(defineProperty[\"a\" /* default */])({marginTop:'0.25rem',padding:'12px 0 12px 12px'},theme.breakpoints.down(600),{marginTop:0}),thread:Object(defineProperty[\"a\" /* default */])({padding:'0 6rem',backgroundColor:'#E69A8DFF',height:'90%',overflowX:'hidden',overflowY:'auto'},theme.breakpoints.down(1000),{padding:'0 1rem'}),arrowBack:{position:'absolute',top:'58px',left:0,zIndex:10,padding:0}};});var thread_Thread=function Thread(_ref){var messages=_ref.messages,id=_ref.id,websocket=_ref.websocket,messageAmount=_ref.messageAmount,setMessageAmount=_ref.setMessageAmount,setThreadOpen=_ref.setThreadOpen,setThreadId=_ref.setThreadId;var classes=thread_useStyles();var _useState=Object(react[\"useState\"])(''),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=Object(react[\"useState\"])(0),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),messageId=_useState4[0],setMessageId=_useState4[1];var _useState5=Object(react[\"useState\"])(false),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),showButton=_useState6[0],setShowButton=_useState6[1];var _useState7=Object(react[\"useState\"])([]),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),usernames=_useState8[0],setUsernames=_useState8[1];var _useState9=Object(react[\"useState\"])([]),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),moreMessages=_useState10[0],setMoreMessages=_useState10[1];var _useState11=Object(react[\"useState\"])(false),_useState12=Object(slicedToArray[\"a\" /* default */])(_useState11,2),loadMore=_useState12[0],setLoadMore=_useState12[1];var _useState13=Object(react[\"useState\"])(false),_useState14=Object(slicedToArray[\"a\" /* default */])(_useState13,2),messageScroll=_useState14[0],setMessageScroll=_useState14[1];var _useState15=Object(react[\"useState\"])(0),_useState16=Object(slicedToArray[\"a\" /* default */])(_useState15,2),currentThread=_useState16[0],setCurrentThread=_useState16[1];var _useContext=Object(react[\"useContext\"])(MediaContext),user=_useContext.user;var _useChats=apiHooks_useChats(),postMessage=_useChats.postMessage,getUserIds=_useChats.getUserIds,getAllMessages=_useChats.getAllMessages;var _useUsers=apiHooks_useUsers(),getUsernameById=_useUsers.getUsernameById;var _useWindowDimensions=useWindowDimensions(),height=_useWindowDimensions.height;var _useState17=Object(react[\"useState\"])(height-64),_useState18=Object(slicedToArray[\"a\" /* default */])(_useState17,2),heightCorrected=_useState18[0],setHeightCorrected=_useState18[1];var messagesEndRef=Object(react[\"useRef\"])(null);var messagesEndRef2=Object(react[\"useRef\"])(null);var isMobile=Object(react_responsive[\"useMediaQuery\"])({query:'(max-width: 600px)'});Object(react[\"useEffect\"])(function(){try{if(isMobile){setHeightCorrected(height-56);}else{setHeightCorrected(height-64);}}catch(e){console.log(e.message);}},[isMobile]);var scrollToBottom=function scrollToBottom(number){if(number===1){var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView();}else{var _messagesEndRef2$curr;(_messagesEndRef2$curr=messagesEndRef2.current)===null||_messagesEndRef2$curr===void 0?void 0:_messagesEndRef2$curr.scrollIntoView();setMessageScroll(true);}};Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:try{if(loadMore&&!messageScroll){scrollToBottom(2);}else{scrollToBottom(1);}}catch(e){console.log(e.message);}case 1:case\"end\":return _context.stop();}}},_callee);}))();},[messageId]);Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:try{if(currentThread!==id){setLoadMore(false);setMessageScroll(false);setMessageAmount(50);}setCurrentThread(id);console.log('messageUpdate');if(messages.length>=50&&!loadMore){setShowButton(true);}else{setShowButton(false);}}catch(e){console.log(e.message);}case 1:case\"end\":return _context2.stop();}}},_callee2);}))();},[messages]);Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(){var userIds,usernameArray,i,_user,userObject;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;setUsernames([]);console.log('USERNAMELIST');_context3.next=5;return getUserIds(id);case 5:userIds=_context3.sent;usernameArray=[];i=0;case 8:if(!(i<userIds.length)){_context3.next=17;break;}_context3.next=11;return getUsernameById(userIds[i].user_id);case 11:_user=_context3.sent;userObject={user_id:userIds[i].user_id,username:_user.username};usernameArray.push(userObject);case 14:i++;_context3.next=8;break;case 17:setUsernames(usernameArray);_context3.next=23;break;case 20:_context3.prev=20;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0.message);case 23:case\"end\":return _context3.stop();}}},_callee3,null,[[0,20]]);}))();},[id]);var handleSubmit=/*#__PURE__*/function(){var _ref5=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(event){var tzoffset,localISOTime,messageObject,success,webSocketUpdate;return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:event.preventDefault();_context4.prev=1;if(!(message!=='')){_context4.next=14;break;}tzoffset=new Date().getTimezoneOffset()*60000;localISOTime=new Date(Date.now()-tzoffset).toISOString().slice(0,-1);console.log('TIMEST: ',localISOTime);messageObject=JSON.stringify({contents:message,timestamp:localISOTime,user_id:user,thread_id:id});_context4.next=9;return postMessage(messageObject);case 9:success=_context4.sent;console.log('SUCCESS: ',success);webSocketUpdate={type:'message',contents:message,timestamp:localISOTime,user_id:user,thread_id:id};if(websocket!==undefined){websocket.send(JSON.stringify(webSocketUpdate));}setMessage('');case 14:_context4.next=19;break;case 16:_context4.prev=16;_context4.t0=_context4[\"catch\"](1);console.log(_context4.t0.message);case 19:case\"end\":return _context4.stop();}}},_callee4,null,[[1,16]]);}));return function handleSubmit(_x){return _ref5.apply(this,arguments);};}();var loadAllMessages=/*#__PURE__*/function(){var _ref6=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(){var amount,allMessages;return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;if(currentThread!==id){setMessageAmount(50);amount=50;}else{amount=messageAmount;}_context5.next=4;return getAllMessages(id);case 4:allMessages=_context5.sent;console.log('MESSAGE AMOUNT',messageAmount,allMessages);allMessages.splice(allMessages.length-amount,amount);setMoreMessages(allMessages);setLoadMore(true);setShowButton(false);_context5.next=15;break;case 12:_context5.prev=12;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0.message);case 15:case\"end\":return _context5.stop();}}},_callee5,null,[[0,12]]);}));return function loadAllMessages(){return _ref6.apply(this,arguments);};}();var closeThread=function closeThread(){try{setThreadOpen(false);setThreadId(0);}catch(e){console.log(e.message);}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[isMobile&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Button[\"a\" /* default */],{className:classes.arrowBack,onClick:closeThread,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ArrowBack_default.a,{}),\" Back\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,justify:\"center\",direction:\"column\",style:{height:heightCorrected},children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{item:true,justify:\"center\",className:classes.thread,children:[loadMore&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(List[\"a\" /* default */],{children:[moreMessages.map(function(item,index){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_message,{message_id:item.id,user_id:item.user_id,contents:item.contents,timestamp:item.timestamp,setMessageId:setMessageId,usernames:usernames,index:index,messageArray:moreMessages});}),' ',/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{ref:messagesEndRef2})]}),showButton&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{onClick:loadAllMessages,children:\"Load all messages\"}),usernames.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(List[\"a\" /* default */],{children:[messages.map(function(item,index){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_message,{message_id:item.id,user_id:item.user_id,contents:item.contents,timestamp:item.timestamp,setMessageId:setMessageId,usernames:usernames,index:index,messageArray:messages});}),' ',/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{ref:messagesEndRef})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,container:true,justify:\"center\",direction:\"column\",style:{height:'10%',backgroundColor:'lightgray'},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{onSubmit:handleSubmit,children:[isMobile?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField[\"a\" /* default */],{value:message,variant:\"outlined\",label:\"Say something!\",onInput:function onInput(event){return setMessage(event.target.value);},className:classes.textField,size:\"small\"}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField[\"a\" /* default */],{value:message,variant:\"outlined\",label:\"Say something!\",onInput:function onInput(event){return setMessage(event.target.value);},className:classes.textField}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(IconButton[\"a\" /* default */],{type:\"submit\",color:\"default\",className:classes.sendButton,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Send_default.a,{style:{fill:'#5F4B8BFF'}})})]})})})]})]});};/* harmony default export */ var components_thread = (thread_Thread);\n// CONCATENATED MODULE: ./src/components/threadButton.tsx\n/* eslint-disable react-hooks/exhaustive-deps */var threadButton_useStyles=Object(makeStyles[\"a\" /* default */])(function(theme){return{text:{color:'white',width:'100%',padding:'1rem'},inline:{display:'inline'},lastMessage:{display:'block',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap',fontSize:'0.7rem'},timestamp:{fontSize:'0.5rem',marginLeft:'2rem'},button:Object(defineProperty[\"a\" /* default */])({width:'100%',maxWidth:'30vw',padding:'0 0.7rem',borderBottom:'1px solid #5F4B8BFF',cursor:'pointer','&:hover':{background:\"#f0f0f0\"}},theme.breakpoints.down(600),{maxWidth:'none',width:'100vw'})};});var threadButton_ThreadButton=function ThreadButton(_ref){var id=_ref.id,setThreadOpen=_ref.setThreadOpen,setThreadId=_ref.setThreadId,threadOpen=_ref.threadOpen,threadId=_ref.threadId,updateThreadButtonInfos=_ref.updateThreadButtonInfos;var _useChats=apiHooks_useChats(),getThreadName=_useChats.getThreadName,getLastMessage=_useChats.getLastMessage;var _useUsers=apiHooks_useUsers(),getUsernameById=_useUsers.getUsernameById;var _useState=Object(react[\"useState\"])(''),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=Object(react[\"useState\"])({username:'',contents:'',timestamp:''}),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),lastMessage=_useState4[0],setLastMessage=_useState4[1];var _useContext=Object(react[\"useContext\"])(WebsocketContext),websocket=_useContext.websocket;var classes=threadButton_useStyles();Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var threadName,lastMessageData,username,now,formatedDate,difference,formatedTime,d,hours,minutes,_lastMessageObject,noLastMessageObject;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getThreadName(id);case 3:threadName=_context.sent;setName(threadName);_context.next=7;return getLastMessage(id);case 7:lastMessageData=_context.sent;if(!(lastMessageData.length!==0)){_context.next=20;break;}_context.next=11;return getUsernameById(lastMessageData[0].user_id);case 11:username=_context.sent;now=moment_default()().startOf('day');formatedDate=moment_default()(lastMessageData[0].timestamp).startOf('day');difference=now.diff(formatedDate,'days');if(difference===0){d=new Date(lastMessageData[0].timestamp);hours=d.getHours().toString();minutes=d.getMinutes().toString();if(d.getHours()<10){hours='0'+hours;}if(d.getMinutes()<10){minutes='0'+minutes;}formatedTime=hours+'.'+minutes;}else if(difference===1){formatedTime='Yesterday';}else{formatedTime=moment_default()(lastMessageData[0].timestamp).format('DD.MM.YYYY');}_lastMessageObject={username:username.username+':',contents:lastMessageData[0].contents,timestamp:formatedTime};setLastMessage(_lastMessageObject);_context.next=22;break;case 20:noLastMessageObject={username:'No messages yet.',contents:'',timestamp:''};setLastMessage(noLastMessageObject);case 22:_context.next=27;break;case 24:_context.prev=24;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 27:case\"end\":return _context.stop();}}},_callee,null,[[0,24]]);}))();},[id,updateThreadButtonInfos]);var openThread=function openThread(){try{if(!threadOpen){setThreadOpen(true);setThreadId(id);}else{if(threadId===id){setThreadOpen(false);setThreadId(0);}else{setThreadId(id);}if(websocket!==undefined){websocket.close();}}}catch(e){console.log(e.message);}};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ListItem[\"a\" /* default */],{onClick:openThread,className:classes.button,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ListItemText[\"a\" /* default */],{primary:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,justify:\"space-between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"h1\",children:name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"span\",variant:\"subtitle1\",className:classes.timestamp,children:lastMessage.timestamp})]})}),secondary:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Typography[\"a\" /* default */],{component:\"span\",variant:\"body2\",className:classes.lastMessage,children:[lastMessage.username,\" \",lastMessage.contents]})})})})});};/* harmony default export */ var threadButton = (threadButton_ThreadButton);\n// EXTERNAL MODULE: ./node_modules/@mui/material/Box/Box.js + 2 modules\nvar Box = __webpack_require__(239);\n\n// EXTERNAL MODULE: ./node_modules/@mui/material/Modal/Modal.js + 14 modules\nvar Modal_Modal = __webpack_require__(236);\n\n// EXTERNAL MODULE: ./node_modules/@mui/icons-material/Close.js\nvar Close = __webpack_require__(121);\nvar Close_default = /*#__PURE__*/__webpack_require__.n(Close);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/FormControl/FormControl.js\nvar FormControl = __webpack_require__(230);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/InputLabel/InputLabel.js + 1 modules\nvar InputLabel = __webpack_require__(241);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Select/Select.js + 16 modules\nvar Select = __webpack_require__(235);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/MenuItem/MenuItem.js\nvar MenuItem = __webpack_require__(232);\n\n// EXTERNAL MODULE: ./node_modules/react-material-ui-form-validator/lib/index.js\nvar lib = __webpack_require__(36);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(70);\n\n// CONCATENATED MODULE: ./src/hooks/formHooks.tsx\nvar formHooks_useForm=function useForm(callback,initState){var _useState=Object(react[\"useState\"])(initState),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),inputs=_useState2[0],setInputs=_useState2[1];var handleSubmit=function handleSubmit(event){if(event){event.preventDefault();}callback();};var handleInputChange=function handleInputChange(event){event.persist();setInputs(function(inputs){return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},inputs),{},Object(defineProperty[\"a\" /* default */])({},event.target.name,event.target.value));});};var handleFileChange=function handleFileChange(event){event.persist();setInputs(function(inputs){return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},inputs),{},Object(defineProperty[\"a\" /* default */])({},event.target.name,event.target.files[0]));});};return{inputs:inputs,handleSubmit:handleSubmit,handleInputChange:handleInputChange,handleFileChange:handleFileChange,setInputs:setInputs};};/* harmony default export */ var formHooks = (formHooks_useForm);\n// CONCATENATED MODULE: ./src/components/threadForm.tsx\nvar threadForm_useStyles=Object(makeStyles[\"a\" /* default */])(function(theme){return{select:{minWidth:'5rem'},formControl:{marginTop:'0.5rem'},header:Object(defineProperty[\"a\" /* default */])({textAlign:'center'},theme.breakpoints.down(600),{fontSize:'1.3rem'}),createButton:{backgroundColor:'#5F4B8BFF',marginTop:'2rem',marginBottom:'0.5rem','&:hover':{backgroundColor:'#7159a6'}}};});var threadForm_ThreadForm=function ThreadForm(_ref){var websocket=_ref.websocket,setModalOpen=_ref.setModalOpen,setThreadOpen=_ref.setThreadOpen,setThreadId=_ref.setThreadId;var classes=threadForm_useStyles();var _useContext=Object(react[\"useContext\"])(MediaContext),user=_useContext.user;var _useChats=apiHooks_useChats(),createNewChatThread=_useChats.createNewChatThread;var _useUsers=apiHooks_useUsers(),getUsers=_useUsers.getUsers;var _useState=Object(react[\"useState\"])([]),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),usersArray=_useState2[0],setUsersArray=_useState2[1];var _useState3=Object(react[\"useState\"])(0),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),newThreadId=_useState4[0],setNewThreadId=_useState4[1];var validators={threadName:['required','minStringLength: 3','maxStringLength: 25']};var errorMessages={threadName:['Required field','Minimum of 3 characters','Too many characters!']};var createNewThread=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var chatThreadObject,success;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!(inputs.user2!=='')){_context.next=10;break;}chatThreadObject=JSON.stringify({name:inputs.threadName,user_id:user,user2_id:inputs.user2});_context.next=5;return createNewChatThread(chatThreadObject);case 5:success=_context.sent;console.log('SUCCESS: ',success.success);setNewThreadId(success.id);_context.next=11;break;case 10:alert('Choose a user with whom you want to chat!');case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function createNewThread(){return _ref2.apply(this,arguments);};}();var _useForm=formHooks(createNewThread,{threadName:'',user2:''}),inputs=_useForm.inputs,handleInputChange=_useForm.handleInputChange,handleSubmit=_useForm.handleSubmit;Object(react[\"useEffect\"])(function(){try{if(newThreadId!==0){console.log('NEWTHREADID',newThreadId);var webSocketUpdate={type:'newThread',user_id:user,user2_id:inputs.user2,thread_id:newThreadId};if(websocket!==undefined){websocket.send(JSON.stringify(webSocketUpdate));setThreadOpen(true);setThreadId(newThreadId);setModalOpen(false);}}}catch(e){console.log(e.message);}},[newThreadId]);Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var users,arrayForUsers,i;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return getUsers();case 3:users=_context2.sent;arrayForUsers=[];for(i=0;i<users.length;i++){if(users[i].id!==user){arrayForUsers.push(users[i]);}}setUsersArray(arrayForUsers);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0.message);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}))();},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,justifyContent:\"center\",direction:\"column\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{variant:\"h4\",className:classes.header,children:\"Create a new chat thread\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(lib[\"ValidatorForm\"],{onSubmit:handleSubmit,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,justifyContent:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(lib[\"TextValidator\"],{type:\"text\",name:\"threadName\",label:\"Thread name\",onChange:handleInputChange,value:inputs.threadName,validators:validators.threadName,errorMessages:errorMessages.threadName})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,justifyContent:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(FormControl[\"a\" /* default */],{className:classes.formControl,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InputLabel[\"a\" /* default */],{children:\"User\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Select[\"a\" /* default */],{name:\"user2\",value:inputs.user2,label:\"User\",onChange:handleInputChange,autoWidth:true,className:classes.select,children:[usersArray.map(function(item){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MenuItem[\"a\" /* default */],{value:item.id,children:item.username});}),' ']})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,justifyContent:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{className:classes.createButton,color:\"primary\",type:\"submit\",variant:\"contained\",children:\"Create\"})})]})]})});};/* harmony default export */ var threadForm = (threadForm_ThreadForm);\n// CONCATENATED MODULE: ./src/components/modal.tsx\nvar modal_useStyles=Object(makeStyles[\"a\" /* default */])(function(theme){return{box:Object(defineProperty[\"a\" /* default */])({},theme.breakpoints.down(600),{maxWidth:\"none!important\",maxHeight:'95vh!important',width:'75vw!important'}),closeButton:{position:'absolute',top:1,right:1,fontSize:'1.1rem!important',cursor:'pointer'}};});var modal_Modal=function Modal(_ref){var modalOpen=_ref.modalOpen,setModalOpen=_ref.setModalOpen,websocket=_ref.websocket,setThreadOpen=_ref.setThreadOpen,setThreadId=_ref.setThreadId;var classes=modal_useStyles();var handleClose=function handleClose(){setModalOpen(false);};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Modal_Modal[\"a\" /* default */],{open:modalOpen,onClose:handleClose,\"aria-labelledby\":\"modal-modal-title\",\"aria-describedby\":\"modal-modal-description\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Box[\"a\" /* default */],{sx:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",maxWidth:\"40vw\",bgcolor:\"background.paper\",border:\"2px solid #000\",boxShadow:24,p:4},className:classes.box,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Close_default.a,{className:classes.closeButton,onClick:handleClose}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(threadForm,{websocket:websocket,setModalOpen:setModalOpen,setThreadOpen:setThreadOpen,setThreadId:setThreadId})]})});};/* harmony default export */ var modal = (modal_Modal);\n// EXTERNAL MODULE: ./node_modules/@mui/material/Card/Card.js + 3 modules\nvar Card = __webpack_require__(237);\n\n// CONCATENATED MODULE: ./src/views/home.tsx\n/* eslint-disable react-hooks/exhaustive-deps */var home_useStyles=Object(makeStyles[\"a\" /* default */])(function(theme){var _newThreadButton;return{newThreadButton:(_newThreadButton={backgroundColor:'#5F4B8BFF',marginTop:'1rem','&:hover':{backgroundColor:'#7159a6'}},Object(defineProperty[\"a\" /* default */])(_newThreadButton,theme.breakpoints.down(1000),{fontSize:'0.8rem',padding:'6px 10px'}),Object(defineProperty[\"a\" /* default */])(_newThreadButton,theme.breakpoints.down(800),{fontSize:'0.7rem',padding:'6px 6px'}),Object(defineProperty[\"a\" /* default */])(_newThreadButton,theme.breakpoints.down(600),{fontSize:'0.875rem',padding:'6px 16px'}),_newThreadButton),desktopContainer:Object(defineProperty[\"a\" /* default */])({},theme.breakpoints.up(1280),{width:'70vw'}),mobileWelcomeCard:{maxWidth:'15rem',margin:'auto',marginTop:'1rem'},mobileSubtitle:{fontSize:'0.9rem'}};});var home_Home=function Home(_ref){var history=_ref.history;var classes=home_useStyles();var _useContext=Object(react[\"useContext\"])(MediaContext),user=_useContext.user,setUser=_useContext.setUser;var _useState=Object(react[\"useState\"])(''),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),username=_useState2[0],setusername=_useState2[1];var _useContext2=Object(react[\"useContext\"])(WebsocketContext),websocket=_useContext2.websocket,setWebsocket=_useContext2.setWebsocket;var _useUsers=apiHooks_useUsers(),getIsLoggedIn=_useUsers.getIsLoggedIn,getUsernameById=_useUsers.getUsernameById;var _useChats=apiHooks_useChats(),getThreadIds=_useChats.getThreadIds,getMessages=_useChats.getMessages;var _useWindowDimensions=useWindowDimensions(),height=_useWindowDimensions.height;var _useState3=Object(react[\"useState\"])(height-64),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),heightCorrected=_useState4[0],setHeightCorrected=_useState4[1];var _useState5=Object(react[\"useState\"])([]),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),threads=_useState6[0],setThreads=_useState6[1];var _useState7=Object(react[\"useState\"])([]),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),sortedThreads=_useState8[0],setSortedThreads=_useState8[1];var _useState9=Object(react[\"useState\"])(false),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),threadOpen=_useState10[0],setThreadOpen=_useState10[1];var _useState11=Object(react[\"useState\"])(0),_useState12=Object(slicedToArray[\"a\" /* default */])(_useState11,2),threadId=_useState12[0],setThreadId=_useState12[1];var _useState13=Object(react[\"useState\"])([]),_useState14=Object(slicedToArray[\"a\" /* default */])(_useState13,2),messages=_useState14[0],setMessages=_useState14[1];var _useState15=Object(react[\"useState\"])(Date.now()),_useState16=Object(slicedToArray[\"a\" /* default */])(_useState15,2),updateState=_useState16[0],setUpdateState=_useState16[1];var _useState17=Object(react[\"useState\"])(Date.now()),_useState18=Object(slicedToArray[\"a\" /* default */])(_useState17,2),updateThreadButtons=_useState18[0],setUpdateThreadButtons=_useState18[1];var _useState19=Object(react[\"useState\"])(Date.now()),_useState20=Object(slicedToArray[\"a\" /* default */])(_useState19,2),updateThreadButtonInfos=_useState20[0],setUpdateThreadButtonInfos=_useState20[1];var _useState21=Object(react[\"useState\"])(50),_useState22=Object(slicedToArray[\"a\" /* default */])(_useState21,2),messageAmount=_useState22[0],setMessageAmount=_useState22[1];var _useState23=Object(react[\"useState\"])(false),_useState24=Object(slicedToArray[\"a\" /* default */])(_useState23,2),modalOpen=_useState24[0],setModalOpen=_useState24[1];var _useState25=Object(react[\"useState\"])({type:'',contents:'',timestamp:new Date(),user_id:0,thread_id:0}),_useState26=Object(slicedToArray[\"a\" /* default */])(_useState25,2),wsMessage=_useState26[0],setWsMessage=_useState26[1];var isMobile=Object(react_responsive[\"useMediaQuery\"])({query:'(max-width: 600px)'});var isDesktop=Object(react_responsive[\"useMediaQuery\"])({query:'(min-width: 1280px)'});Object(react[\"useEffect\"])(function(){try{if(isMobile){setHeightCorrected(height-56);}else{setHeightCorrected(height-64);}}catch(e){console.log(e.message);}},[isMobile]);Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var isLoggedIn,name,chatThreads;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;console.log('USER: ',user);_context.next=4;return getIsLoggedIn();case 4:isLoggedIn=_context.sent;if(!isLoggedIn.success){history.push('/login');}setUser(isLoggedIn.id);_context.next=9;return getUsernameById(isLoggedIn.id);case 9:name=_context.sent;setusername(name.username);console.log('Logged user: ',user,isLoggedIn.id);if(!(user!==0)){_context.next=17;break;}_context.next=15;return getThreadIds(isLoggedIn.id);case 15:chatThreads=_context.sent;if(chatThreads.length>0){setThreads(chatThreads);}else{setThreads([{thread_id:0}]);}case 17:_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 22:case\"end\":return _context.stop();}}},_callee,null,[[0,19]]);}))();},[user,updateThreadButtons]);Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var idArray,i,threadMessages,threadIdObject;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(!(threads.length>0)){_context2.next=17;break;}if(!(threads[0].thread_id!==0)){_context2.next=17;break;}idArray=[];i=0;case 5:if(!(i<threads.length)){_context2.next=14;break;}_context2.next=8;return getMessages(threads[i].thread_id);case 8:threadMessages=_context2.sent;threadIdObject={id:threads[i].thread_id,timestamp:threadMessages.length>0?threadMessages[0].timestamp:'1999-02-06T05:47:00'};idArray.push(threadIdObject);case 11:i++;_context2.next=5;break;case 14:idArray.sort(function(a,b){return a.timestamp<b.timestamp?1:b.timestamp<a.timestamp?-1:0;});console.log('IDARRAY',idArray);setSortedThreads(idArray);case 17:_context2.next=22;break;case 19:_context2.prev=19;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0.message);case 22:case\"end\":return _context2.stop();}}},_callee2,null,[[0,19]]);}))();},[threads,updateThreadButtonInfos]);Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(){var threadMessages,reversedArray;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;if(!(threadId!==0)){_context3.next=7;break;}_context3.next=4;return getMessages(threadId);case 4:threadMessages=_context3.sent;reversedArray=threadMessages.reverse();setMessages(reversedArray);case 7:_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0.message);case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}))();},[threadId,updateState]);Object(react[\"useEffect\"])(function(){try{if(wsMessage.type!==''&&wsMessage.thread_id===threadId){var newMessageObject={id:Date.now(),user_id:wsMessage.user_id,contents:wsMessage.contents,timestamp:wsMessage.timestamp};setMessages(function(messages){return[].concat(Object(toConsumableArray[\"a\" /* default */])(messages),[newMessageObject]);});setMessageAmount(messageAmount+1);}}catch(e){console.log(e.message);}},[wsMessage]);Object(react[\"useEffect\"])(function(){try{if(threads.length!==0){if(websocket===undefined||websocket.readyState===2||websocket.readyState===3){console.log('READYSTATE ',websocket===null||websocket===void 0?void 0:websocket.readyState);var socket=new WebSocket('ws://localhost:3001');socket.addEventListener('open',function(event){try{console.log('Server is opened.');var client={type:'client',user_id:user,threads:threads};socket.send(JSON.stringify(client));}catch(e){console.log(e.message);}});socket.addEventListener('message',function(event){try{if(event.data!=='ping'){console.log('Message from server ',JSON.parse(event.data).thread_id);var message=JSON.parse(event.data);if(message.type==='message'){setWsMessage(message);setUpdateThreadButtonInfos(Date.now());}else if(message.type==='newThread'){setUpdateThreadButtons(Date.now());}}else{setTimeout(function(){return socket.send('pong');},1000);}}catch(e){console.log(e.message);}});socket.addEventListener('close',function(event){try{console.log('Websocket connection closed.');setUpdateState(Date.now());}catch(e){console.log(e.message);}});setWebsocket(socket);console.log('NEW SOCKET');}}}catch(e){console.log(e.message);};},[updateState,threads]);var setCreateNewChatThreadOpen=function setCreateNewChatThreadOpen(){setModalOpen(true);};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[isMobile?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,direction:\"column\",style:{height:heightCorrected},children:threadOpen?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_thread,{messages:messages,id:threadId,websocket:websocket,messageAmount:messageAmount,setMessageAmount:setMessageAmount,setThreadOpen:setThreadOpen,setThreadId:setThreadId})}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{item:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Card[\"a\" /* default */],{className:classes.mobileWelcomeCard,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,alignItems:\"center\",justify:\"center\",direction:\"column\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Typography[\"a\" /* default */],{component:\"h6\",variant:\"h6\",children:[\"Welcome \",username,\"!\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{className:classes.mobileSubtitle,component:\"div\",variant:\"body1\",children:\"This is Chat App made by Tommi.\"})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{onClick:setCreateNewChatThreadOpen,color:\"primary\",variant:\"contained\",className:classes.newThreadButton,children:\"Create a new chat thread\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,style:{borderTop:'1px solid #5F4B8BFF',marginTop:'1rem'},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(List[\"a\" /* default */],{style:{padding:0,width:'100vw'},children:[sortedThreads.map(function(item){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(threadButton,{id:item.id,setThreadOpen:setThreadOpen,setThreadId:setThreadId,threadOpen:threadOpen,threadId:threadId,updateThreadButtonInfos:updateThreadButtonInfos});}),' ']})})]})}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:isDesktop?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Card[\"a\" /* default */],{style:{width:'70vw',margin:'auto'},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,direction:\"row\",style:{height:heightCorrected},className:classes.desktopContainer,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{item:true,style:{width:'30%',borderRight:'1px solid #5F4B8BFF',maxHeight:heightCorrected,overflowY:'auto'},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{onClick:setCreateNewChatThreadOpen,color:\"primary\",variant:\"contained\",className:classes.newThreadButton,children:\"Create a new chat thread\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,style:{borderTop:'1px solid #5F4B8BFF',marginTop:'1rem'},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(List[\"a\" /* default */],{style:{padding:0,width:'100%'},children:[sortedThreads.map(function(item){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(threadButton,{id:item.id,setThreadOpen:setThreadOpen,setThreadId:setThreadId,threadOpen:threadOpen,threadId:threadId,updateThreadButtonInfos:updateThreadButtonInfos});}),' ']})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,style:{width:'70%'},children:threadOpen?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_thread,{messages:messages,id:threadId,websocket:websocket,messageAmount:messageAmount,setMessageAmount:setMessageAmount,setThreadOpen:setThreadOpen,setThreadId:setThreadId}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,alignItems:\"center\",justify:\"center\",direction:\"column\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Typography[\"a\" /* default */],{component:\"h1\",variant:\"h2\",children:[\"Welcome \",username,\"!\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"div\",variant:\"body1\",children:\"This is Chat App made by Tommi.\"})]})})]})}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,direction:\"row\",style:{height:heightCorrected},className:classes.desktopContainer,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{item:true,style:{width:'30%',borderRight:'1px solid #5F4B8BFF',maxHeight:heightCorrected,overflowY:'auto'},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{onClick:setCreateNewChatThreadOpen,color:\"primary\",variant:\"contained\",className:classes.newThreadButton,children:\"Create a new chat thread\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,style:{borderTop:'1px solid #5F4B8BFF',marginTop:'1rem'},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(List[\"a\" /* default */],{style:{padding:0,width:'100%'},children:[sortedThreads.map(function(item){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(threadButton,{id:item.id,setThreadOpen:setThreadOpen,setThreadId:setThreadId,threadOpen:threadOpen,threadId:threadId,updateThreadButtonInfos:updateThreadButtonInfos});}),' ']})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,style:{width:'70%'},children:threadOpen?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_thread,{messages:messages,id:threadId,websocket:websocket,messageAmount:messageAmount,setMessageAmount:setMessageAmount,setThreadOpen:setThreadOpen,setThreadId:setThreadId}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,alignItems:\"center\",justify:\"center\",direction:\"column\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Typography[\"a\" /* default */],{component:\"h1\",variant:\"h2\",children:[\"Welcome \",username,\"!\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"div\",variant:\"body1\",children:\"This is Chat App made by Tommi.\"})]})})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(modal,{modalOpen:modalOpen,setModalOpen:setModalOpen,websocket:websocket,setThreadOpen:setThreadOpen,setThreadId:setThreadId})]});};/* harmony default export */ var home = (home_Home);\n// CONCATENATED MODULE: ./src/components/loginForm.tsx\nvar loginForm_useStyles=Object(makeStyles[\"a\" /* default */])(function(theme){return{loginHeader:Object(defineProperty[\"a\" /* default */])({},theme.breakpoints.down(600),{fontSize:'2rem'}),loginButton:{backgroundColor:'#5F4B8BFF',marginTop:'2rem',marginBottom:'0.5rem','&:hover':{backgroundColor:'#7159a6'}}};});var loginForm_LoginForm=function LoginForm(_ref){var history=_ref.history;var classes=loginForm_useStyles();var _useUsers=apiHooks_useUsers(),postLogin=_useUsers.postLogin;var doLogin=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var userdata;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return postLogin(inputs);case 3:userdata=_context.sent;localStorage.setItem('id',userdata.id);history.push('/');_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log('doLogin',_context.t0.message);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function doLogin(){return _ref2.apply(this,arguments);};}();var _useForm=formHooks(doLogin,{username:'',password:''}),inputs=_useForm.inputs,handleInputChange=_useForm.handleInputChange,handleSubmit=_useForm.handleSubmit;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{className:classes.loginHeader,component:\"h3\",variant:\"h3\",gutterBottom:true,children:\"Login\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,direction:\"column\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField[\"a\" /* default */],{type:\"text\",name:\"username\",label:\"Username\",onChange:handleInputChange,value:inputs.username})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField[\"a\" /* default */],{type:\"password\",name:\"password\",label:\"Password\",onChange:handleInputChange,value:inputs.password})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{fullWidth:true,className:classes.loginButton,color:\"primary\",type:\"submit\",variant:\"contained\",children:\"Login\"})})]})})})]});};/* harmony default export */ var loginForm = (Object(react_router[\"g\" /* withRouter */])(loginForm_LoginForm));\n// CONCATENATED MODULE: ./src/components/registerForm.tsx\n/* eslint-disable react-hooks/exhaustive-deps */var registerForm_useStyles=Object(makeStyles[\"a\" /* default */])(function(theme){return{registerHeader:Object(defineProperty[\"a\" /* default */])({},theme.breakpoints.down(600),{fontSize:'2rem'}),registerButton:{backgroundColor:'#5F4B8BFF',marginTop:'2rem',marginBottom:'0.5rem','&:hover':{backgroundColor:'#7159a6'}}};});var registerForm_RegisterForm=function RegisterForm(_ref){var setToggle=_ref.setToggle;var classes=registerForm_useStyles();var _useUsers=apiHooks_useUsers(),register=_useUsers.register,getUserAvailable=_useUsers.getUserAvailable;var validators={username:['required','minStringLength: 3','maxStringLength: 15','isAvailable'],password:['required','minStringLength: 5'],confirm:['required','isPasswordMatch']};var errorMessages={username:['Required field','Minimum of 3 characters','Too many characters!','Username is not available'],password:['Required field','Minimum of 5 characters'],confirm:['Required field','Passwords do not match']};var doRegister=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var available,result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getUserAvailable(inputs.username);case 3:available=_context.sent;if(!available){_context.next=10;break;}delete inputs.confirm;_context.next=8;return register(inputs);case 8:result=_context.sent;if(result.length>0){alert(result);setToggle(true);}case 10:_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function doRegister(){return _ref2.apply(this,arguments);};}();var _useForm=formHooks(doRegister,{username:'',password:'',confirm:''}),inputs=_useForm.inputs,handleInputChange=_useForm.handleInputChange,handleSubmit=_useForm.handleSubmit;Object(react[\"useEffect\"])(function(){lib[\"ValidatorForm\"].addValidationRule('isAvailable',/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(value){var available;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(value.length>2)){_context2.next=12;break;}_context2.prev=1;_context2.next=4;return getUserAvailable(value);case 4:available=_context2.sent;return _context2.abrupt(\"return\",available);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0.message);return _context2.abrupt(\"return\",true);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x){return _ref3.apply(this,arguments);};}());lib[\"ValidatorForm\"].addValidationRule('isPasswordMatch',function(value){return value===inputs.password;});},[inputs]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,alignItems:\"center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{className:classes.registerHeader,component:\"h3\",variant:\"h3\",gutterBottom:true,children:\"Register\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,xs:12,container:true,direction:\"column\",alignItems:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(lib[\"ValidatorForm\"],{onSubmit:handleSubmit,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,direction:\"column\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(lib[\"TextValidator\"],{fullWidth:true,type:\"text\",name:\"username\",label:\"Username\",onChange:handleInputChange,value:inputs.username,validators:validators.username,errorMessages:errorMessages.username})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(lib[\"TextValidator\"],{fullWidth:true,type:\"password\",name:\"password\",label:\"Password\",onChange:handleInputChange,value:inputs.password,validators:validators.password,errorMessages:errorMessages.password})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(lib[\"TextValidator\"],{fullWidth:true,type:\"password\",name:\"confirm\",label:\"Confirm password\",onChange:handleInputChange,value:inputs.confirm,validators:validators.confirm,errorMessages:errorMessages.confirm})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{fullWidth:true,className:classes.registerButton,color:\"primary\",type:\"submit\",variant:\"contained\",children:\"Register\"})})]})})})]});};/* harmony default export */ var registerForm = (registerForm_RegisterForm);\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Card/Card.js\nvar Card_Card = __webpack_require__(233);\n\n// CONCATENATED MODULE: ./src/views/login.tsx\nvar login_Login=function Login(){var _useState=Object(react[\"useState\"])(true),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),toggle=_useState2[0],setToggle=_useState2[1];var showHide=function showHide(){setToggle(!toggle);};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,justify:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Card_Card[\"a\" /* default */],{style:{margin:'5rem 2rem 3rem 2rem',padding:'3rem',maxWidth:'18rem'},children:[toggle?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(loginForm,{}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(registerForm,{setToggle:setToggle}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,justify:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{onClick:showHide,children:toggle?'or register':'or login'})})]})})});};/* harmony default export */ var login = (login_Login);\n// CONCATENATED MODULE: ./src/views/logout.tsx\nvar logout_Logout=function Logout(_ref){var history=_ref.history;var _useUsers=apiHooks_useUsers(),logout=_useUsers.logout;var _useContext=Object(react[\"useContext\"])(MediaContext),user=_useContext.user,setUser=_useContext.setUser;var _useContext2=Object(react[\"useContext\"])(WebsocketContext),websocket=_useContext2.websocket;Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var isLoggedIn;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;console.log('USER:',user);_context.next=4;return logout();case 4:isLoggedIn=_context.sent;setUser(0);if(websocket!==undefined){websocket.close();}console.log('Logout success: ',isLoggedIn.success,user);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}))();});return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Redirect */],{to:'/login'})});};/* harmony default export */ var views_logout = (logout_Logout);\n// CONCATENATED MODULE: ./src/views/profile.tsx\n/* eslint-disable react-hooks/exhaustive-deps */var profile_Profile=function Profile(){var _useState=Object(react[\"useState\"])({id:'',username:''}),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useContext=Object(react[\"useContext\"])(WebsocketContext),websocket=_useContext.websocket;var _useUsers=apiHooks_useUsers(),getProfile=_useUsers.getProfile;Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(websocket!==undefined){websocket.close();}_context.next=4;return getProfile();case 4:result=_context.sent;console.log('Profile: ',result);setUser(result);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}))();},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{whiteSpace:'pre-line'},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:!user?\"Loading...\":user.username+'\\n'+user.id})});};/* harmony default export */ var profile = (profile_Profile);\n// CONCATENATED MODULE: ./src/App.tsx\nvar App_useStyles=Object(makeStyles[\"a\" /* default */])(function(theme){return{content:Object(defineProperty[\"a\" /* default */])({paddingTop:64,textAlign:'center',width:'100vw'},theme.breakpoints.down(600),{paddingTop:56})};});var App_App=function App(){var classes=App_useStyles();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(mediaContext_MediaProvider,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(websocketContext_WebsocketProvider,{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Container[\"a\" /* default */],{maxWidth:\"xl\",style:{margin:0,padding:0},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(nav,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"main\",{className:classes.content,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router[\"d\" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/\",exact:true,component:home}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/login\",component:login}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/logout\",component:views_logout}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/profile\",component:profile})]})})]})})})});};/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/reportWebVitals.ts\nvar reportWebVitals=function reportWebVitals(onPerfEntry){if(onPerfEntry&&onPerfEntry instanceof Function){__webpack_require__.e(/* import() */ 3).then(__webpack_require__.bind(null, 243)).then(function(_ref){var getCLS=_ref.getCLS,getFID=_ref.getFID,getFCP=_ref.getFCP,getLCP=_ref.getLCP,getTTFB=_ref.getTTFB;getCLS(onPerfEntry);getFID(onPerfEntry);getFCP(onPerfEntry);getLCP(onPerfEntry);getTTFB(onPerfEntry);});}};/* harmony default export */ var src_reportWebVitals = (reportWebVitals);\n// CONCATENATED MODULE: ./src/index.tsx\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById('root'));// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nsrc_reportWebVitals();\n\n/***/ })\n\n},[[161,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/tommivainio/Projektit/chatApp/my-app/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/tommivainio/Projektit/chatApp/my-app/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/tommivainio/Projektit/chatApp/my-app/node_modules/postcss-loader/src/index.js??postcss!/Users/tommivainio/Projektit/chatApp/my-app/src/index.css","/Users/tommivainio/Projektit/chatApp/my-app/src/config.ts","/Users/tommivainio/Projektit/chatApp/my-app/src/hooks/apiHooks.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/contexts/mediaContext.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/components/nav.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/contexts/websocketContext.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/components/message.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/hooks/windowDimensionsHook.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/components/thread.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/components/threadButton.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/hooks/formHooks.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/components/threadForm.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/components/modal.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/views/home.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/components/loginForm.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/components/registerForm.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/views/login.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/views/logout.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/views/profile.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/App.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/reportWebVitals.ts","/Users/tommivainio/Projektit/chatApp/my-app/src/index.tsx"],"names":["env","process","envConfig","development","backendUrl","production","doFetch","url","options","fetch","config","response","json","error","Error","message","ok","useUsers","getUsers","fetchOptions","method","credentials","getUserAvailable","username","alert","getUsernameById","id","register","inputs","headers","body","JSON","stringify","result","console","log","getIsLoggedIn","postLogin","logout","getProfile","useChats","getThreadIds","userId","getUserIds","getThreadName","threadId","thread","name","postMessage","messageObject","success","getMessages","getAllMessages","getLastMessage","createNewChatThread","chatThreadObject","contextDefaultValues","user","setUser","MediaContext","React","createContext","MediaProvider","children","useState","useStyles","makeStyles","theme","appBar","zIndex","drawer","backgroundColor","width","root","flexGrow","menuButton","marginRight","spacing","title","paddingRight","toolbar","display","justifyContent","itemPack","alignItems","logo","position","left","transform","Nav","classes","logged","setLogged","useContext","useEffect","isLoggedIn","RouterLink","textDecoration","websocket","undefined","setWebsocket","WebsocketContext","WebsocketProvider","marginBottom","borderRadius","padding","maxWidth","breakpoints","down","ownMessage","color","inline","inlineOwn","timestamp","fontSize","marginLeft","dateIndicator","background","textAlign","Message","message_id","user_id","contents","setMessageId","usernames","index","messageArray","setUsername","time","setTime","setOwnMessage","showDate","setShowDate","formattedTimestamp","moment","format","i","length","formattedPreviousTimestamp","d","Date","hours","getHours","toString","minutes","getMinutes","formatedTime","e","flexDirection","getWindowDimensions","window","innerWidth","height","innerHeight","useWindowDimensions","windowDimensions","setWindowDimensions","handleResize","addEventListener","removeEventListener","textField","marginTop","sendButton","overflowX","overflowY","arrowBack","top","Thread","messages","messageAmount","setMessageAmount","setThreadOpen","setThreadId","setMessage","messageId","showButton","setShowButton","setUsernames","moreMessages","setMoreMessages","loadMore","setLoadMore","messageScroll","setMessageScroll","currentThread","setCurrentThread","heightCorrected","setHeightCorrected","messagesEndRef","useRef","messagesEndRef2","isMobile","useMediaQuery","query","scrollToBottom","number","current","scrollIntoView","userIds","usernameArray","userObject","push","handleSubmit","event","preventDefault","tzoffset","getTimezoneOffset","localISOTime","now","toISOString","slice","thread_id","webSocketUpdate","type","send","loadAllMessages","amount","allMessages","splice","closeThread","map","item","target","value","fill","text","lastMessage","overflow","textOverflow","whiteSpace","button","borderBottom","cursor","ThreadButton","threadOpen","updateThreadButtonInfos","setName","setLastMessage","threadName","lastMessageData","startOf","formatedDate","difference","diff","lastMessageObject","noLastMessageObject","openThread","close","useForm","callback","initState","setInputs","handleInputChange","persist","handleFileChange","files","select","minWidth","formControl","header","createButton","ThreadForm","setModalOpen","usersArray","setUsersArray","newThreadId","setNewThreadId","validators","errorMessages","createNewThread","user2","user2_id","users","arrayForUsers","box","maxHeight","closeButton","right","Modal","modalOpen","handleClose","bgcolor","border","boxShadow","p","newThreadButton","desktopContainer","up","mobileWelcomeCard","margin","mobileSubtitle","Home","history","setusername","threads","setThreads","sortedThreads","setSortedThreads","setMessages","updateState","setUpdateState","updateThreadButtons","setUpdateThreadButtons","setUpdateThreadButtonInfos","wsMessage","setWsMessage","isDesktop","chatThreads","idArray","threadMessages","threadIdObject","sort","a","b","reversedArray","reverse","newMessageObject","readyState","socket","WebSocket","client","data","parse","setTimeout","setCreateNewChatThreadOpen","borderTop","borderRight","loginHeader","loginButton","LoginForm","doLogin","userdata","localStorage","setItem","password","withRouter","registerHeader","registerButton","RegisterForm","setToggle","confirm","doRegister","available","ValidatorForm","addValidationRule","Login","toggle","showHide","Logout","Profile","content","paddingTop","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","const env = process.env.NODE_ENV === 'production' ? 'production' : 'development'\r\n\r\nconst envConfig = {\r\n    development: {\r\n        backendUrl: 'http://localhost:3001'\r\n    },\r\n    production: {\r\n        backendUrl: 'https://something.com'\r\n    }\r\n}\r\n\r\nexport default envConfig[env]","import config from '../config'\r\n\r\nconst doFetch = async (url: string, options = {}) => {\r\n    const response = await fetch(config.backendUrl + url, options);\r\n    const json = await response.json();\r\n    if (json.error) {\r\n        // if API response contains error message (use Postman to get further details)\r\n        throw new Error(json.message + ': ' + json.error);\r\n    } else if (!response.ok) {\r\n        // if API response does not contain error message, but there is some other error\r\n        throw new Error('doFetch failed');\r\n    } else {\r\n        // if all goes well\r\n        return json;\r\n    }\r\n};\r\n\r\nconst useUsers = () => {\r\n\r\n    const getUsers = async () => {\r\n        const fetchOptions = {\r\n            method: 'GET',\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            return await doFetch('/users', fetchOptions);\r\n        } catch (e) {\r\n            throw new Error(e.message);\r\n        }\r\n    };\r\n\r\n    const getUserAvailable = async (username: String) => {\r\n        try {\r\n            return await doFetch('/users/username/' + username);\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const getUsernameById = async (id: number) => {\r\n        try {\r\n            return await doFetch('/user/' + id);\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const register = async (inputs: Object) => {\r\n        const fetchOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(inputs),\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            const result = await doFetch('/user', fetchOptions);\r\n            console.log('RegisterResult', result.message)\r\n            return result.message\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const getIsLoggedIn = async () => {\r\n        const fetchOptions = {\r\n            method: 'GET',\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            return await doFetch('/isloggedin', fetchOptions);\r\n        } catch (e) {\r\n            throw new Error(e.message);\r\n        }\r\n    };\r\n\r\n    const postLogin = async (inputs: Object) => {\r\n        const fetchOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(inputs),\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            const result = await doFetch('/login', fetchOptions);\r\n            return result\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const logout = async () => {\r\n        const fetchOptions = {\r\n            method: 'DELETE',\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            return await doFetch('/logout', fetchOptions);\r\n        } catch (e) {\r\n            throw new Error(e.message);\r\n        }\r\n    }\r\n\r\n    const getProfile = async () => {\r\n        const fetchOptions = {\r\n            method: 'GET',\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            return await doFetch('/profile', fetchOptions);\r\n        } catch (e) {\r\n            throw new Error(e.message);\r\n        }\r\n    };\r\n\r\n    return { getUsers, getUserAvailable, getUsernameById, register, getIsLoggedIn, postLogin, logout, getProfile };\r\n};\r\n\r\nconst useChats = () => {\r\n\r\n    const getThreadIds = async (userId: number) => {\r\n        try {\r\n            return await doFetch('/threads/' + userId);\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const getUserIds = async (userId: number) => {\r\n        try {\r\n            return await doFetch('/threadusers/' + userId);\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const getThreadName = async (threadId: number) => {\r\n        try {\r\n            const thread = await doFetch('/thread/' + threadId);\r\n            return thread.name;\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const postMessage = async (messageObject: Object) => {\r\n        const fetchOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: messageObject,\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            const result = await doFetch('/message', fetchOptions);\r\n            return result.success\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const getMessages = async (threadId: number) => {\r\n        try {\r\n            return await doFetch('/messages/' + threadId);\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const getAllMessages = async (threadId: number) => {\r\n        try {\r\n            return await doFetch('/all_messages/' + threadId);\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const getLastMessage = async (id: number) => {\r\n        try {\r\n            return await doFetch('/last_message/' + id);\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const createNewChatThread = async (chatThreadObject: Object) => {\r\n        const fetchOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: chatThreadObject,\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            const result = await doFetch('/new_thread', fetchOptions);\r\n            return result\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    return { getThreadIds, getUserIds, getThreadName, postMessage, getMessages, getAllMessages, getLastMessage, createNewChatThread }\r\n}\r\n\r\nexport { useUsers, useChats };","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\ninterface propType {\r\n    children: any\r\n}\r\n\r\ntype userContextState = {\r\n    user: number;\r\n    setUser: (id: number) => void;\r\n};\r\n\r\nconst contextDefaultValues: userContextState = {\r\n    user: 0,\r\n    setUser: () => { }\r\n};\r\n\r\nconst MediaContext = React.createContext<userContextState>(contextDefaultValues)\r\n\r\nconst MediaProvider = ({ children }: propType) => {\r\n    const [user, setUser] = useState<number>(contextDefaultValues.user);\r\n    return (\r\n        <MediaContext.Provider value={{ user, setUser }}>\r\n            {children}\r\n        </MediaContext.Provider>\r\n    );\r\n};\r\n\r\nMediaProvider.propTypes = {\r\n    children: PropTypes.node,\r\n};\r\n\r\nexport { MediaContext, MediaProvider };","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport {\r\n    AppBar,\r\n    makeStyles,\r\n    Toolbar,\r\n    Link,\r\n    Button,\r\n} from '@material-ui/core';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport { useUsers } from '../hooks/apiHooks';\r\nimport { useContext, useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport { MediaContext } from '../contexts/mediaContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    appBar: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        backgroundColor: '#5F4B8BFF',\r\n        width: '100vw',\r\n    },\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n        paddingRight: '24px',\r\n    },\r\n    toolbar: {\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n    },\r\n    itemPack: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    logo: {\r\n        position: 'absolute',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        left: '71px',\r\n        transform: 'translate(-50%)',\r\n    },\r\n}));\r\n\r\nconst Nav = () => {\r\n    const classes = useStyles();\r\n    const [logged, setLogged] = useState(false);\r\n    const { user, setUser } = useContext(MediaContext);\r\n    const { getIsLoggedIn } = useUsers();\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                console.log('NAV');\r\n                const isLoggedIn = await getIsLoggedIn()\r\n                if (isLoggedIn.success) {\r\n                    setLogged(true);\r\n                    setUser(isLoggedIn.id);\r\n                } else {\r\n                    setLogged(false);\r\n                }\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        })();\r\n    }, [user]);\r\n\r\n    return (\r\n        <>\r\n            <AppBar className={classes.appBar}>\r\n                <Toolbar className={classes.toolbar}>\r\n                    <Link\r\n                        component={RouterLink}\r\n                        to=\"/\"\r\n                        className={classes.logo}\r\n                        color=\"inherit\"\r\n                        style={{ textDecoration: 'none' }}\r\n                    >\r\n                        <h2>ChatApp</h2>\r\n                    </Link>\r\n                    <div className={classes.itemPack}>\r\n                        {logged ? (\r\n                            <div>\r\n                                <Button\r\n                                    color=\"inherit\"\r\n                                    component={RouterLink}\r\n                                    to=\"/logout\"\r\n                                >\r\n                                    Logout\r\n                                </Button>\r\n                            </div>\r\n                        ) : (\r\n                            <Button\r\n                                color=\"inherit\"\r\n                                startIcon={<ExitToAppIcon />}\r\n                                component={RouterLink}\r\n                                to=\"/login\"\r\n                            >\r\n                                Login\r\n                            </Button>\r\n                        )}\r\n\r\n                    </div>\r\n                </Toolbar>\r\n            </AppBar>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Nav;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\ninterface propType {\n    children: any\n}\n\ntype userContextState = {\n    websocket: any;\n    setWebsocket: (socket: WebSocket) => void;\n};\n\nconst contextDefaultValues: userContextState = {\n    websocket: undefined,\n    setWebsocket: () => { }\n};\n\nconst WebsocketContext = React.createContext<userContextState>(contextDefaultValues)\n\nconst WebsocketProvider = ({ children }: propType) => {\n    const [websocket, setWebsocket] = useState<WebSocket>();\n    return (\n        <WebsocketContext.Provider value={{ websocket, setWebsocket }}>\n            {children}\n        </WebsocketContext.Provider>\n    );\n};\n\nWebsocketProvider.propTypes = {\n    children: PropTypes.node,\n};\n\nexport { WebsocketContext, WebsocketProvider };","import { Grid, ListItem, ListItemText, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useContext } from 'react';\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport { MediaContext } from '../contexts/mediaContext';\nimport moment from 'moment';\n\ninterface usernamesArray {\n    user_id: number,\n    username: string,\n}\n\ninterface messagesArray {\n    id: number,\n    user_id: number,\n    contents: string,\n    timestamp: Date,\n}\n\ninterface propType {\n    message_id: number,\n    user_id: number,\n    contents: string,\n    timestamp: Date,\n    setMessageId: Function,\n    usernames: usernamesArray[],\n    index: number,\n    messageArray: messagesArray[],\n}\n\nconst useStyles = makeStyles((theme) => ({\n    message: {\n        backgroundColor: 'lightGrey',\n        marginBottom: 0,\n        borderRadius: '1rem',\n        padding: '0.5rem',\n        maxWidth: '60%',\n        [theme.breakpoints.down(1000)]: {\n            maxWidth: '75%',\n        },\n        [theme.breakpoints.down(1000)]: {\n            maxWidth: '85%',\n        },\n    },\n    ownMessage: {\n        backgroundColor: '#5F4B8BFF',\n        color: 'white',\n        marginBottom: 0,\n        borderRadius: '1rem',\n        padding: '0.5rem',\n        maxWidth: '60%',\n        [theme.breakpoints.down(1000)]: {\n            maxWidth: '75%',\n        },\n        [theme.breakpoints.down(600)]: {\n            maxWidth: '85%',\n        },\n    },\n    inline: {\n        display: 'inline',\n    },\n    inlineOwn: {\n        display: 'inline',\n        color: 'white',\n    },\n    timestamp: {\n        fontSize: '0.7rem',\n        marginLeft: '2rem'\n    },\n    dateIndicator: {\n        background: 'rgb(95, 75, 139, .2)',\n        borderRadius: '0.3rem',\n        padding: '0.2rem',\n        marginBottom: '0.5rem',\n        textAlign: 'center',\n    }\n}));\n\nconst Message = ({ message_id, user_id, contents, timestamp, setMessageId, usernames, index, messageArray }: propType) => {\n    const classes = useStyles();\n    const [username, setUsername] = useState('');\n    const [time, setTime] = useState('');\n    const [ownMessage, setOwnMessage] = useState(false);\n    const [showDate, setShowDate] = useState(false);\n    const { user } = useContext(MediaContext);\n    const formattedTimestamp = moment(timestamp).format('DD.MM.YYYY');\n\n    useEffect(() => {\n        try {\n            for (let i = 0; i < usernames.length; i++) {\n                if (usernames[i].user_id === user_id) {\n                    setUsername(usernames[i].username);\n                }\n            }\n\n            if (index !== 0) {\n                const formattedPreviousTimestamp = moment(messageArray[index - 1].timestamp).format('DD.MM.YYYY');\n                if (formattedTimestamp !== formattedPreviousTimestamp) {\n                    setShowDate(true);\n                }\n            } else {\n                setShowDate(true);\n            }\n\n            const d = new Date(timestamp);\n            let hours = d.getHours().toString();\n            let minutes = d.getMinutes().toString();\n            if (d.getHours() < 10) {\n                hours = '0' + hours;\n            }\n            if (d.getMinutes() < 10) {\n                minutes = '0' + minutes;\n            }\n            const formatedTime = hours + '.' + minutes;\n            setTime(formatedTime);\n\n            if (user_id === user) {\n                setOwnMessage(true)\n            } else {\n                setOwnMessage(false);\n            }\n            setMessageId(message_id);\n        } catch (e) {\n            console.log(e.message);\n        }\n    }, [message_id]);\n\n\n    return (\n        <>\n            <ListItem style={{ width: '100%', display: 'flex', flexDirection: 'column' }}>\n                {showDate &&\n                    <Grid container justifyContent=\"center\" >\n                        <Typography className={classes.dateIndicator} component=\"h6\" variant=\"body1\">{formattedTimestamp}</Typography>\n                    </Grid>\n                }\n                {ownMessage ? (\n                    <Grid container justify=\"flex-end\" >\n                        <Grid item className={classes.ownMessage}>\n                            <ListItemText\n                                primary={\n                                    <>\n                                        <Grid container justify=\"space-between\">\n                                            <Typography\n                                                component=\"h2\"\n                                            >\n                                                {username}\n                                            </Typography>\n                                            <Typography\n                                                component=\"span\"\n                                                variant=\"subtitle1\"\n                                                className={classes.timestamp}\n                                            >\n                                                {time}\n                                            </Typography>\n                                        </Grid>\n                                    </>\n                                }\n                                secondary={\n                                    <>\n                                        <Typography\n                                            component=\"span\"\n                                            variant=\"body2\"\n                                            className={classes.inlineOwn}\n                                        >\n                                            {contents}\n                                        </Typography>\n                                    </>\n                                }\n                            />\n                        </Grid>\n                    </Grid>\n                ) : (\n                    <Grid container justify=\"flex-start\" >\n                        <Grid item className={classes.message}>\n                            <ListItemText\n                                primary={\n                                    <>\n                                        <Grid container justify=\"space-between\">\n                                            <Typography\n                                                component=\"h2\"\n                                            >\n                                                {username}\n                                            </Typography>\n                                            <Typography\n                                                component=\"span\"\n                                                variant=\"subtitle1\"\n                                                className={classes.timestamp}\n                                            >\n                                                {time}\n                                            </Typography>\n                                        </Grid>\n                                    </>\n                                }\n                                secondary={\n                                    <>\n                                        <Typography\n                                            component=\"span\"\n                                            variant=\"body2\"\n                                            className={classes.inline}\n                                            color=\"textPrimary\"\n                                        >\n                                            {contents}\n                                        </Typography>\n                                    </>\n                                }\n                            />\n                        </Grid>\n                    </Grid>\n                )\n                }\n\n            </ListItem >\n        </>\n    )\n}\n\nexport default Message;","import { useState, useEffect } from 'react';\n\nconst getWindowDimensions = () => {\n    const { innerWidth: width, innerHeight: height } = window;\n    return {\n        width,\n        height,\n    };\n};\n\nexport default function useWindowDimensions() {\n    const [windowDimensions, setWindowDimensions] = useState(\n        getWindowDimensions()\n    );\n\n    useEffect(() => {\n        function handleResize() {\n            setWindowDimensions(getWindowDimensions());\n        }\n\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n\n    return windowDimensions;\n}","import { Button, Grid, List, TextField } from '@material-ui/core';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport { IconButton } from '@material-ui/core';\r\nimport { FormEvent, useContext, useEffect, useState } from 'react';\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { MediaContext } from '../contexts/mediaContext';\r\nimport { useChats, useUsers } from '../hooks/apiHooks';\r\nimport Message from '../components/message';\r\nimport useWindowDimensions from '../hooks/windowDimensionsHook';\r\nimport { useRef } from 'react';\r\nimport { useMediaQuery } from 'react-responsive';\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    textField: {\r\n        width: '70%',\r\n        backgroundColor: 'white',\r\n        borderRadius: '0.5rem',\r\n        [theme.breakpoints.down(600)]: {\r\n            marginTop: '0.27rem'\r\n        },\r\n    },\r\n    sendButton: {\r\n        marginTop: '0.25rem',\r\n        padding: '12px 0 12px 12px',\r\n        [theme.breakpoints.down(600)]: {\r\n            marginTop: 0\r\n        },\r\n    },\r\n    thread: {\r\n        padding: '0 6rem',\r\n        backgroundColor: '#E69A8DFF',\r\n        height: '90%',\r\n        overflowX: 'hidden',\r\n        overflowY: 'auto',\r\n        [theme.breakpoints.down(1000)]: {\r\n            padding: '0 1rem',\r\n        },\r\n    },\r\n    arrowBack: {\r\n        position: 'absolute',\r\n        top: '58px',\r\n        left: 0,\r\n        zIndex: 10,\r\n        padding: 0,\r\n    }\r\n}));\r\n\r\ninterface messagesArray {\r\n    id: number,\r\n    user_id: number,\r\n    contents: string,\r\n    timestamp: Date,\r\n}\r\n\r\ninterface propType {\r\n    messages: messagesArray[],\r\n    id: number,\r\n    websocket: WebSocket | undefined,\r\n    messageAmount: number,\r\n    setMessageAmount: Function,\r\n    setThreadOpen: Function,\r\n    setThreadId: Function,\r\n}\r\n\r\ninterface usernamesArray {\r\n    user_id: number,\r\n    username: string,\r\n}\r\n\r\n\r\nconst Thread = ({ messages, id, websocket, messageAmount, setMessageAmount, setThreadOpen, setThreadId }: propType) => {\r\n    const classes = useStyles();\r\n    const [message, setMessage] = useState('');\r\n    const [messageId, setMessageId] = useState(0);\r\n    const [showButton, setShowButton] = useState(false);\r\n    const [usernames, setUsernames] = useState<usernamesArray[]>([])\r\n    const [moreMessages, setMoreMessages] = useState<messagesArray[]>([])\r\n    const [loadMore, setLoadMore] = useState(false);\r\n    const [messageScroll, setMessageScroll] = useState(false);\r\n    const [currentThread, setCurrentThread] = useState(0);\r\n    const { user } = useContext(MediaContext);\r\n    const { postMessage, getUserIds, getAllMessages } = useChats();\r\n    const { getUsernameById } = useUsers();\r\n    const { height } = useWindowDimensions();\r\n    const [heightCorrected, setHeightCorrected] = useState(height - 64);\r\n    const messagesEndRef = useRef<null | HTMLDivElement>(null)\r\n    const messagesEndRef2 = useRef<null | HTMLDivElement>(null)\r\n\r\n    const isMobile = useMediaQuery({\r\n        query: '(max-width: 600px)'\r\n    });\r\n\r\n    useEffect(() => {\r\n        try {\r\n            if (isMobile) {\r\n                setHeightCorrected(height - 56);\r\n            } else {\r\n                setHeightCorrected(height - 64);\r\n            }\r\n        } catch (e) {\r\n            console.log(e.message);\r\n        }\r\n    }, [isMobile]);\r\n\r\n    const scrollToBottom = (number: number) => {\r\n        if (number === 1) {\r\n            messagesEndRef.current?.scrollIntoView()\r\n        } else {\r\n            messagesEndRef2.current?.scrollIntoView()\r\n            setMessageScroll(true);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                if (loadMore && !messageScroll) {\r\n                    scrollToBottom(2);\r\n                } else {\r\n                    scrollToBottom(1);\r\n                }\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        })();\r\n    }, [messageId]);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                if (currentThread !== id) {\r\n                    setLoadMore(false);\r\n                    setMessageScroll(false);\r\n                    setMessageAmount(50);\r\n                }\r\n                setCurrentThread(id);\r\n                console.log('messageUpdate')\r\n                if (messages.length >= 50 && !loadMore) {\r\n                    setShowButton(true);\r\n                } else {\r\n                    setShowButton(false);\r\n                }\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        })();\r\n    }, [messages]);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                setUsernames([]);\r\n                console.log('USERNAMELIST')\r\n                const userIds = await getUserIds(id);\r\n                let usernameArray: Array<usernamesArray> = [];\r\n                for (let i = 0; i < userIds.length; i++) {\r\n                    const user = await getUsernameById(userIds[i].user_id);\r\n                    const userObject = {\r\n                        user_id: userIds[i].user_id,\r\n                        username: user.username\r\n                    }\r\n                    usernameArray.push(userObject);\r\n                }\r\n                setUsernames(usernameArray)\r\n\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        })();\r\n    }, [id]);\r\n\r\n    const handleSubmit = async (event: FormEvent) => {\r\n        event.preventDefault();\r\n        try {\r\n            if (message !== '') {\r\n                const tzoffset = (new Date()).getTimezoneOffset() * 60000;\r\n                const localISOTime = (new Date(Date.now() - tzoffset)).toISOString().slice(0, -1);\r\n                console.log('TIMEST: ', localISOTime)\r\n                const messageObject = JSON.stringify({\r\n                    contents: message,\r\n                    timestamp: localISOTime,\r\n                    user_id: user,\r\n                    thread_id: id,\r\n\r\n                });\r\n                const success = await postMessage(messageObject)\r\n                console.log('SUCCESS: ', success)\r\n                const webSocketUpdate = {\r\n                    type: 'message',\r\n                    contents: message,\r\n                    timestamp: localISOTime,\r\n                    user_id: user,\r\n                    thread_id: id\r\n                }\r\n                if (websocket !== undefined) {\r\n                    websocket.send(JSON.stringify(webSocketUpdate));\r\n                }\r\n                setMessage('');\r\n            }\r\n        } catch (e) {\r\n            console.log(e.message);\r\n        }\r\n    };\r\n\r\n    const loadAllMessages = async () => {\r\n        try {\r\n            let amount;\r\n            if (currentThread !== id) {\r\n                setMessageAmount(50);\r\n                amount = 50;\r\n            } else {\r\n                amount = messageAmount;\r\n            }\r\n            const allMessages = await getAllMessages(id);\r\n            console.log('MESSAGE AMOUNT', messageAmount, allMessages);\r\n            allMessages.splice(allMessages.length - amount, amount);\r\n            setMoreMessages(allMessages);\r\n            setLoadMore(true);\r\n            setShowButton(false);\r\n        } catch (e) {\r\n            console.log(e.message);\r\n        }\r\n    };\r\n\r\n    const closeThread = () => {\r\n        try {\r\n            setThreadOpen(false);\r\n            setThreadId(0);\r\n        } catch (e) {\r\n            console.log(e.message);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {isMobile &&\r\n                <Button className={classes.arrowBack} onClick={closeThread}>\r\n                    <ArrowBackIcon /> Back\r\n                </Button>\r\n            }\r\n            <Grid container justify=\"center\" direction=\"column\" style={{ height: heightCorrected }}>\r\n                <Grid item justify=\"center\" className={classes.thread}>\r\n                    {loadMore &&\r\n                        <List>\r\n                            {moreMessages.map((item, index) => (\r\n                                <Message\r\n                                    message_id={item.id}\r\n                                    user_id={item.user_id}\r\n                                    contents={item.contents}\r\n                                    timestamp={item.timestamp}\r\n                                    setMessageId={setMessageId}\r\n                                    usernames={usernames}\r\n                                    index={index}\r\n                                    messageArray={moreMessages}\r\n                                />\r\n                            ))}{' '}\r\n                            <div ref={messagesEndRef2} />\r\n                        </List>\r\n                    }\r\n                    {showButton &&\r\n                        <Button onClick={loadAllMessages}>Load all messages</Button>\r\n                    }\r\n                    {usernames.length > 0 &&\r\n                        <List>\r\n                            {messages.map((item, index) => (\r\n                                <Message\r\n                                    message_id={item.id}\r\n                                    user_id={item.user_id}\r\n                                    contents={item.contents}\r\n                                    timestamp={item.timestamp}\r\n                                    setMessageId={setMessageId}\r\n                                    usernames={usernames}\r\n                                    index={index}\r\n                                    messageArray={messages}\r\n                                />\r\n                            ))}{' '}\r\n                            <div ref={messagesEndRef} />\r\n                        </List>\r\n                    }\r\n                </Grid>\r\n                <Grid item container justify=\"center\" direction=\"column\" style={{ height: '10%', backgroundColor: 'lightgray' }}>\r\n                    <Grid item>\r\n                        <form\r\n                            onSubmit={handleSubmit}\r\n                        >\r\n                            {isMobile ? (\r\n                                <TextField\r\n                                    value={message}\r\n                                    variant=\"outlined\"\r\n                                    label=\"Say something!\"\r\n                                    onInput={(event) => setMessage((event.target as HTMLInputElement).value)}\r\n                                    className={classes.textField}\r\n                                    size=\"small\"\r\n                                />\r\n                            ) : (\r\n                                <TextField\r\n                                    value={message}\r\n                                    variant=\"outlined\"\r\n                                    label=\"Say something!\"\r\n                                    onInput={(event) => setMessage((event.target as HTMLInputElement).value)}\r\n                                    className={classes.textField}\r\n                                />\r\n                            )}\r\n                            <IconButton\r\n                                type=\"submit\"\r\n                                color=\"default\"\r\n                                className={classes.sendButton}\r\n                            >\r\n                                <SendIcon style={{ fill: '#5F4B8BFF' }} />\r\n                            </IconButton>\r\n\r\n                        </form>\r\n                    </Grid>\r\n                </Grid>\r\n\r\n            </Grid>\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Thread;","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport { Button, Grid, ListItem, ListItemText, makeStyles, Typography } from \"@material-ui/core\";\r\nimport { useContext, useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { WebsocketContext } from \"../contexts/websocketContext\";\r\nimport { useChats, useUsers } from '../hooks/apiHooks';\r\nimport moment from 'moment';\r\n\r\ninterface propType {\r\n    id: number,\r\n    setThreadOpen: Function,\r\n    setThreadId: Function,\r\n    threadOpen: Boolean,\r\n    threadId: number,\r\n    updateThreadButtonInfos: number,\r\n}\r\n\r\ninterface lastMessageObject {\r\n    username: string,\r\n    contents: string,\r\n    timestamp: any,\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    text: {\r\n        color: 'white',\r\n        width: '100%',\r\n        padding: '1rem',\r\n    },\r\n    inline: {\r\n        display: 'inline',\r\n    },\r\n    lastMessage: {\r\n        display: 'block',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        whiteSpace: 'nowrap',\r\n        fontSize: '0.7rem'\r\n    },\r\n    timestamp: {\r\n        fontSize: '0.5rem',\r\n        marginLeft: '2rem'\r\n    },\r\n    button: {\r\n        width: '100%',\r\n        maxWidth: '30vw',\r\n        padding: '0 0.7rem',\r\n        borderBottom: '1px solid #5F4B8BFF',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            background: \"#f0f0f0\",\r\n        },\r\n        [theme.breakpoints.down(600)]: {\r\n            maxWidth: 'none',\r\n            width: '100vw',\r\n        },\r\n    }\r\n}));\r\n\r\nconst ThreadButton = ({ id, setThreadOpen, setThreadId, threadOpen, threadId, updateThreadButtonInfos }: propType) => {\r\n    const { getThreadName, getLastMessage } = useChats();\r\n    const { getUsernameById } = useUsers();\r\n    const [name, setName] = useState('');\r\n    const [lastMessage, setLastMessage] = useState<lastMessageObject>({\r\n        username: '',\r\n        contents: '',\r\n        timestamp: ''\r\n    });\r\n    const { websocket } = useContext(WebsocketContext);\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const threadName = await getThreadName(id)\r\n                setName(threadName)\r\n                const lastMessageData = await getLastMessage(id)\r\n                if (lastMessageData.length !== 0) {\r\n                    const username = await getUsernameById(lastMessageData[0].user_id);\r\n                    const now = moment().startOf('day')\r\n                    const formatedDate = moment(lastMessageData[0].timestamp).startOf('day');\r\n                    const difference = now.diff(formatedDate, 'days');\r\n                    let formatedTime;\r\n                    if (difference === 0) {\r\n                        const d = new Date(lastMessageData[0].timestamp);\r\n                        let hours = d.getHours().toString();\r\n                        let minutes = d.getMinutes().toString();\r\n                        if (d.getHours() < 10) {\r\n                            hours = '0' + hours;\r\n                        }\r\n                        if (d.getMinutes() < 10) {\r\n                            minutes = '0' + minutes;\r\n                        }\r\n                        formatedTime = hours + '.' + minutes;\r\n                    } else if (difference === 1) {\r\n                        formatedTime = 'Yesterday';\r\n                    } else {\r\n                        formatedTime = moment(lastMessageData[0].timestamp).format('DD.MM.YYYY');\r\n                    }\r\n\r\n                    const lastMessageObject = {\r\n                        username: username.username + ':',\r\n                        contents: lastMessageData[0].contents,\r\n                        timestamp: formatedTime,\r\n                    }\r\n                    setLastMessage(lastMessageObject);\r\n                } else {\r\n                    const noLastMessageObject = {\r\n                        username: 'No messages yet.',\r\n                        contents: '',\r\n                        timestamp: '',\r\n                    }\r\n                    setLastMessage(noLastMessageObject);\r\n                }\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        })();\r\n    }, [id, updateThreadButtonInfos]);\r\n\r\n    const openThread = () => {\r\n        try {\r\n            if (!threadOpen) {\r\n                setThreadOpen(true)\r\n                setThreadId(id)\r\n            } else {\r\n                if (threadId === id) {\r\n                    setThreadOpen(false)\r\n                    setThreadId(0)\r\n                } else {\r\n                    setThreadId(id)\r\n                }\r\n                if (websocket !== undefined) {\r\n                    websocket.close();\r\n                }\r\n            }\r\n        } catch (e) {\r\n            console.log(e.message);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <ListItem onClick={openThread} className={classes.button} >\r\n                <ListItemText\r\n                    primary={\r\n                        <>\r\n                            <Grid container justify=\"space-between\">\r\n                                <Typography\r\n                                    component=\"h1\"\r\n                                >\r\n                                    {name}\r\n                                </Typography>\r\n                                <Typography\r\n                                    component=\"span\"\r\n                                    variant=\"subtitle1\"\r\n                                    className={classes.timestamp}\r\n                                >\r\n                                    {lastMessage.timestamp}\r\n                                </Typography>\r\n                            </Grid>\r\n                        </>\r\n                    }\r\n                    secondary={\r\n                        <>\r\n                            <Typography\r\n                                component=\"span\"\r\n                                variant=\"body2\"\r\n                                className={classes.lastMessage}\r\n                            >\r\n                                {lastMessage.username} {lastMessage.contents}\r\n                            </Typography>\r\n                        </>\r\n                    }\r\n                />\r\n            </ListItem>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ThreadButton","import { useState } from 'react';\r\n\r\nconst useForm = (callback: CallableFunction, initState: any) => {\r\n    const [inputs, setInputs] = useState(initState);\r\n\r\n    const handleSubmit = (event: any) => {\r\n        if (event) {\r\n            event.preventDefault();\r\n        }\r\n        callback();\r\n    };\r\n\r\n    const handleInputChange = (event: any) => {\r\n        event.persist();\r\n        setInputs((inputs: String) => ({\r\n            ...inputs,\r\n            [event.target.name]: event.target.value,\r\n        }));\r\n    };\r\n\r\n    const handleFileChange = (event: any) => {\r\n        event.persist();\r\n        setInputs((inputs: String) => ({\r\n            ...inputs,\r\n            [event.target.name]: event.target.files[0],\r\n        }));\r\n    };\r\n\r\n    return { inputs, handleSubmit, handleInputChange, handleFileChange, setInputs };\r\n};\r\n\r\nexport default useForm;\r\n","import { Button, FormControl, Grid, InputLabel, makeStyles, MenuItem, Select, Typography } from \"@material-ui/core\"\nimport { useState } from \"react\";\nimport { useContext, useEffect } from \"react\";\nimport { TextValidator, ValidatorForm } from \"react-material-ui-form-validator\"\nimport { MediaContext } from \"../contexts/mediaContext\";\nimport { useUsers, useChats } from \"../hooks/apiHooks\";\nimport useForm from \"../hooks/formHooks\";\n\ninterface propTypes {\n    websocket: WebSocket,\n    setModalOpen: Function,\n    setThreadOpen: Function,\n    setThreadId: Function,\n}\n\ninterface usersArrayType {\n    id: number,\n    username: string,\n}\n\nconst useStyles = makeStyles((theme) => ({\n    select: {\n        minWidth: '5rem',\n    },\n    formControl: {\n        marginTop: '0.5rem',\n    },\n    header: {\n        textAlign: 'center',\n        [theme.breakpoints.down(600)]: {\n            fontSize: '1.3rem',\n        },\n    },\n    createButton: {\n        backgroundColor: '#5F4B8BFF',\n        marginTop: '2rem',\n        marginBottom: '0.5rem',\n        '&:hover': {\n            backgroundColor: '#7159a6',\n        },\n    }\n}));\n\nconst ThreadForm = ({ websocket, setModalOpen, setThreadOpen, setThreadId }: propTypes) => {\n    const classes = useStyles();\n    const { user } = useContext(MediaContext);\n    const { createNewChatThread } = useChats();\n    const { getUsers } = useUsers();\n    const [usersArray, setUsersArray] = useState<usersArrayType[]>([]);\n    const [newThreadId, setNewThreadId] = useState(0);\n\n    const validators = {\n        threadName: ['required', 'minStringLength: 3', 'maxStringLength: 25'],\n    };\n\n    const errorMessages = {\n        threadName: [\n            'Required field',\n            'Minimum of 3 characters',\n            'Too many characters!',\n        ]\n    };\n\n    const createNewThread = async () => {\n        try {\n            if (inputs.user2 !== '') {\n                const chatThreadObject = JSON.stringify({\n                    name: inputs.threadName,\n                    user_id: user,\n                    user2_id: inputs.user2\n\n                });\n                const success = await createNewChatThread(chatThreadObject);\n                console.log('SUCCESS: ', success.success)\n                setNewThreadId(success.id);\n            } else {\n                alert('Choose a user with whom you want to chat!');\n            }\n        } catch (e) {\n            console.log(e.message);\n        }\n    }\n\n    const { inputs, handleInputChange, handleSubmit } = useForm(createNewThread, {\n        threadName: '',\n        user2: '',\n    });\n\n    useEffect(() => {\n        try {\n            if (newThreadId !== 0) {\n                console.log('NEWTHREADID', newThreadId);\n                const webSocketUpdate = {\n                    type: 'newThread',\n                    user_id: user,\n                    user2_id: inputs.user2,\n                    thread_id: newThreadId,\n                }\n                if (websocket !== undefined) {\n                    websocket.send(JSON.stringify(webSocketUpdate));\n                    setThreadOpen(true);\n                    setThreadId(newThreadId);\n                    setModalOpen(false);\n                }\n            }\n        } catch (e) {\n            console.log(e.message);\n        }\n    }, [newThreadId]);\n\n    useEffect(() => {\n        (async () => {\n            try {\n                const users = await getUsers();\n                let arrayForUsers = [];\n                for (let i = 0; i < users.length; i++) {\n                    if (users[i].id !== user) {\n                        arrayForUsers.push(users[i]);\n                    }\n                }\n                setUsersArray(arrayForUsers);\n            } catch (e) {\n                console.log(e.message);\n            }\n        })();\n    }, []);\n\n    return (\n        <>\n            <Grid container justifyContent=\"center\" direction=\"column\">\n                <Typography variant=\"h4\" className={classes.header}>Create a new chat thread</Typography>\n                <ValidatorForm onSubmit={handleSubmit}>\n                    <Grid container item justifyContent=\"center\">\n                        <TextValidator\n                            type=\"text\"\n                            name=\"threadName\"\n                            label=\"Thread name\"\n                            onChange={handleInputChange}\n                            value={inputs.threadName}\n                            validators={validators.threadName}\n                            errorMessages={errorMessages.threadName}\n                        />\n                    </Grid>\n                    <Grid container item justifyContent=\"center\">\n                        <FormControl className={classes.formControl}>\n                            <InputLabel>User</InputLabel>\n                            <Select\n                                name=\"user2\"\n                                value={inputs.user2}\n                                label=\"User\"\n                                onChange={handleInputChange}\n                                autoWidth\n                                className={classes.select}\n                            >\n                                {usersArray.map((item) => (\n                                    <MenuItem value={item.id}>{item.username}</MenuItem>\n                                ))}{' '}\n                            </Select>\n                        </FormControl>\n                    </Grid>\n                    <Grid container item justifyContent=\"center\">\n                        <Button\n                            className={classes.createButton}\n                            color=\"primary\"\n                            type=\"submit\"\n                            variant=\"contained\"\n                        >\n                            Create\n                        </Button>\n                    </Grid>\n                </ValidatorForm>\n            </Grid>\n        </>\n    )\n}\n\nexport default ThreadForm;","import Box from \"@mui/material/Box\";\nimport MuiModal from \"@mui/material/Modal\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CloseIcon from '@mui/icons-material/Close';\nimport ThreadForm from \"./threadForm\";\n\nconst useStyles = makeStyles((theme) => ({\n    box: {\n        [theme.breakpoints.down(600)]: {\n            maxWidth: \"none!important\",\n            maxHeight: '95vh!important',\n            width: '75vw!important',\n        },\n    },\n    closeButton: {\n        position: 'absolute',\n        top: 1,\n        right: 1,\n        fontSize: '1.1rem!important',\n        cursor: 'pointer'\n    }\n}));\n\ninterface propTypes {\n    modalOpen: boolean,\n    setModalOpen: Function,\n    websocket: WebSocket,\n    setThreadOpen: Function,\n    setThreadId: Function,\n}\n\nconst Modal = ({ modalOpen, setModalOpen, websocket, setThreadOpen, setThreadId }: propTypes) => {\n    const classes = useStyles();\n\n    const handleClose = () => {\n        setModalOpen(false);\n    };\n\n    return (\n        <MuiModal\n            open={modalOpen}\n            onClose={handleClose}\n            aria-labelledby=\"modal-modal-title\"\n            aria-describedby=\"modal-modal-description\"\n        >\n            <Box\n                sx={{\n                    position: \"absolute\",\n                    top: \"50%\",\n                    left: \"50%\",\n                    transform: \"translate(-50%, -50%)\",\n                    maxWidth: \"40vw\",\n                    bgcolor: \"background.paper\",\n                    border: \"2px solid #000\",\n                    boxShadow: 24,\n                    p: 4,\n                }}\n                className={classes.box}\n            >\n                <CloseIcon className={classes.closeButton} onClick={handleClose} />\n                <ThreadForm websocket={websocket} setModalOpen={setModalOpen} setThreadOpen={setThreadOpen} setThreadId={setThreadId} />\n            </Box>\n        </MuiModal>\n    );\n}\n\nexport default Modal;","/* eslint-disable react-hooks/exhaustive-deps */\nimport { Button, Grid, List, Typography } from '@material-ui/core';\nimport { useContext, useEffect, useState } from 'react';\nimport Thread from '../components/thread';\nimport ThreadButton from '../components/threadButton';\nimport Modal from '../components/modal';\nimport { MediaContext } from '../contexts/mediaContext';\nimport { WebsocketContext } from '../contexts/websocketContext';\nimport { useUsers, useChats } from '../hooks/apiHooks';\nimport useWindowDimensions from '../hooks/windowDimensionsHook';\nimport { useMediaQuery } from 'react-responsive';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Card } from '@mui/material';\n\nconst useStyles = makeStyles((theme) => ({\n    newThreadButton: {\n        backgroundColor: '#5F4B8BFF',\n        marginTop: '1rem',\n        '&:hover': {\n            backgroundColor: '#7159a6',\n        },\n        [theme.breakpoints.down(1000)]: {\n            fontSize: '0.8rem',\n            padding: '6px 10px'\n        },\n        [theme.breakpoints.down(800)]: {\n            fontSize: '0.7rem',\n            padding: '6px 6px'\n        },\n        [theme.breakpoints.down(600)]: {\n            fontSize: '0.875rem',\n            padding: '6px 16px'\n        },\n    },\n    desktopContainer: {\n        [theme.breakpoints.up(1280)]: {\n            width: '70vw',\n        },\n    },\n    mobileWelcomeCard: {\n        maxWidth: '15rem',\n        margin: 'auto',\n        marginTop: '1rem'\n    },\n    mobileSubtitle: {\n        fontSize: '0.9rem'\n    }\n}));\n\ninterface propType {\n    history: {\n        push: Function,\n    }\n}\n\ninterface threadsArray {\n    thread_id: number\n}\n\ninterface sortedThreadsArray {\n    id: number,\n    timestamp: string,\n}\n\ninterface messagesArray {\n    id: number,\n    user_id: number,\n    contents: string,\n    timestamp: Date,\n}\n\nconst Home = ({ history }: propType) => {\n    const classes = useStyles();\n    const { user, setUser } = useContext(MediaContext);\n    const [username, setusername] = useState('');\n    const { websocket, setWebsocket } = useContext(WebsocketContext);\n    const { getIsLoggedIn, getUsernameById } = useUsers();\n    const { getThreadIds, getMessages } = useChats();\n    const { height } = useWindowDimensions();\n    const [heightCorrected, setHeightCorrected] = useState(height - 64);\n    const [threads, setThreads] = useState<threadsArray[]>([]);\n    const [sortedThreads, setSortedThreads] = useState<sortedThreadsArray[]>([]);\n    const [threadOpen, setThreadOpen] = useState(false)\n    const [threadId, setThreadId] = useState(0)\n    const [messages, setMessages] = useState<messagesArray[]>([]);\n    const [updateState, setUpdateState] = useState(Date.now());\n    const [updateThreadButtons, setUpdateThreadButtons] = useState(Date.now());\n    const [updateThreadButtonInfos, setUpdateThreadButtonInfos] = useState(Date.now());\n    const [messageAmount, setMessageAmount] = useState(50);\n    const [modalOpen, setModalOpen] = useState(false);\n    const [wsMessage, setWsMessage] = useState({\n        type: '',\n        contents: '',\n        timestamp: new Date(),\n        user_id: 0,\n        thread_id: 0\n    });\n\n    const isMobile = useMediaQuery({\n        query: '(max-width: 600px)'\n    });\n\n    const isDesktop = useMediaQuery({\n        query: '(min-width: 1280px)'\n    });\n\n    useEffect(() => {\n        try {\n            if (isMobile) {\n                setHeightCorrected(height - 56);\n            } else {\n                setHeightCorrected(height - 64);\n            }\n        } catch (e) {\n            console.log(e.message);\n        }\n    }, [isMobile]);\n\n    useEffect(() => {\n        (async () => {\n            try {\n                console.log('USER: ', user)\n                const isLoggedIn = await getIsLoggedIn();\n                if (!isLoggedIn.success) {\n                    history.push('/login');\n                }\n                setUser(isLoggedIn.id)\n                const name = await getUsernameById(isLoggedIn.id);\n                setusername(name.username);\n                console.log('Logged user: ', user, isLoggedIn.id);\n                if (user !== 0) {\n                    const chatThreads = await getThreadIds(isLoggedIn.id)\n                    if (chatThreads.length > 0) {\n                        setThreads(chatThreads);\n                    } else {\n                        setThreads([{ thread_id: 0 }]);\n                    }\n                }\n            } catch (e) {\n                console.log(e.message);\n            }\n        })();\n    }, [user, updateThreadButtons]);\n\n    useEffect(() => {\n        (async () => {\n            try {\n                if (threads.length > 0) {\n                    if (threads[0].thread_id !== 0) {\n                        let idArray = [];\n                        for (let i = 0; i < threads.length; i++) {\n                            const threadMessages = await getMessages(threads[i].thread_id);\n                            const threadIdObject = {\n                                id: threads[i].thread_id,\n                                timestamp: threadMessages.length > 0 ? threadMessages[0].timestamp : '1999-02-06T05:47:00',\n                            };\n                            idArray.push(threadIdObject);\n                        }\n                        idArray.sort((a, b) => (a.timestamp < b.timestamp) ? 1 : ((b.timestamp < a.timestamp) ? -1 : 0));\n                        console.log('IDARRAY', idArray);\n                        setSortedThreads(idArray);\n                    }\n                }\n            } catch (e) {\n                console.log(e.message);\n            }\n        })();\n    }, [threads, updateThreadButtonInfos]);\n\n    useEffect(() => {\n        (async () => {\n            try {\n                if (threadId !== 0) {\n                    const threadMessages = await getMessages(threadId);\n                    const reversedArray = threadMessages.reverse();\n                    setMessages(reversedArray);\n                }\n            } catch (e) {\n                console.log(e.message);\n            }\n        })();\n    }, [threadId, updateState]);\n\n    useEffect(() => {\n        try {\n            if (wsMessage.type !== '' && wsMessage.thread_id === threadId) {\n                const newMessageObject = {\n                    id: Date.now(),\n                    user_id: wsMessage.user_id,\n                    contents: wsMessage.contents,\n                    timestamp: wsMessage.timestamp,\n                }\n                setMessages(messages => [...messages, newMessageObject]);\n                setMessageAmount(messageAmount + 1);\n            }\n        } catch (e) {\n            console.log(e.message);\n        }\n    }, [wsMessage]);\n\n    useEffect(() => {\n        try {\n            if (threads.length !== 0) {\n                if (websocket === undefined || websocket.readyState === 2 || websocket.readyState === 3) {\n                    console.log('READYSTATE ', websocket?.readyState)\n                    const socket = new WebSocket('ws://localhost:3001');\n\n                    socket.addEventListener('open', function (event) {\n                        try {\n                            console.log('Server is opened.');\n                            const client = {\n                                type: 'client',\n                                user_id: user,\n                                threads: threads,\n                            }\n                            socket.send(JSON.stringify(client));\n                        } catch (e) {\n                            console.log(e.message);\n                        }\n                    });\n\n                    socket.addEventListener('message', function (event) {\n                        try {\n                            if (event.data !== 'ping') {\n                                console.log('Message from server ', JSON.parse(event.data).thread_id);\n                                const message = JSON.parse(event.data);\n                                if (message.type === 'message') {\n                                    setWsMessage(message);\n                                    setUpdateThreadButtonInfos(Date.now());\n                                } else if (message.type === 'newThread') {\n                                    setUpdateThreadButtons(Date.now());\n                                }\n                            } else {\n                                setTimeout(() => socket.send('pong'), 1000);\n                            }\n                        } catch (e) {\n                            console.log(e.message);\n                        }\n                    });\n\n                    socket.addEventListener('close', function (event) {\n                        try {\n                            console.log('Websocket connection closed.');\n                            setUpdateState(Date.now());\n                        } catch (e) {\n                            console.log(e.message);\n                        }\n                    });\n\n                    setWebsocket(socket);\n                    console.log('NEW SOCKET');\n                }\n            }\n        } catch (e) {\n            console.log(e.message);\n        };\n    }, [updateState, threads]);\n\n    const setCreateNewChatThreadOpen = () => {\n        setModalOpen(true);\n    }\n\n\n    return (\n        <>\n            {isMobile ? (\n                <Grid container direction=\"column\" style={{ height: heightCorrected, }} >\n                    {threadOpen ? (\n                        <Grid item >\n                            <Thread\n                                messages={messages}\n                                id={threadId}\n                                websocket={websocket}\n                                messageAmount={messageAmount}\n                                setMessageAmount={setMessageAmount}\n                                setThreadOpen={setThreadOpen}\n                                setThreadId={setThreadId}\n                            />\n                        </Grid>\n                    ) : (\n                        <Grid item>\n                            <Card className={classes.mobileWelcomeCard}>\n                                <Grid container alignItems=\"center\" justify=\"center\" direction=\"column\" >\n                                    <Typography component=\"h6\" variant=\"h6\">Welcome {username}!</Typography>\n                                    <Typography className={classes.mobileSubtitle} component=\"div\" variant=\"body1\">This is Chat App made by Tommi.</Typography>\n                                </Grid>\n                            </Card>\n                            <Button\n                                onClick={setCreateNewChatThreadOpen}\n                                color=\"primary\"\n                                variant=\"contained\"\n                                className={classes.newThreadButton}\n                            >\n                                Create a new chat thread\n                            </Button>\n                            <Grid container style={{ borderTop: '1px solid #5F4B8BFF', marginTop: '1rem' }} >\n                                <List style={{ padding: 0, width: '100vw' }}>\n                                    {sortedThreads.map((item) => (\n                                        <ThreadButton\n                                            id={item.id}\n                                            setThreadOpen={setThreadOpen}\n                                            setThreadId={setThreadId}\n                                            threadOpen={threadOpen}\n                                            threadId={threadId}\n                                            updateThreadButtonInfos={updateThreadButtonInfos}\n                                        />\n                                    ))}{' '}\n                                </List>\n                            </Grid>\n                        </Grid>\n                    )}\n                </Grid>\n            ) : (\n                <>\n                    {isDesktop ? (\n                        <Card style={{ width: '70vw', margin: 'auto' }}>\n                            <Grid container direction=\"row\" style={{ height: heightCorrected, }} className={classes.desktopContainer} >\n                                <Grid item style={{ width: '30%', borderRight: '1px solid #5F4B8BFF', maxHeight: heightCorrected, overflowY: 'auto' }}>\n                                    <Button\n                                        onClick={setCreateNewChatThreadOpen}\n                                        color=\"primary\"\n                                        variant=\"contained\"\n                                        className={classes.newThreadButton}\n                                    >\n                                        Create a new chat thread\n                                    </Button>\n                                    <Grid container style={{ borderTop: '1px solid #5F4B8BFF', marginTop: '1rem' }} >\n                                        <List style={{ padding: 0, width: '100%' }}>\n                                            {sortedThreads.map((item) => (\n                                                <ThreadButton\n                                                    id={item.id}\n                                                    setThreadOpen={setThreadOpen}\n                                                    setThreadId={setThreadId}\n                                                    threadOpen={threadOpen}\n                                                    threadId={threadId}\n                                                    updateThreadButtonInfos={updateThreadButtonInfos}\n                                                />\n                                            ))}{' '}\n                                        </List>\n                                    </Grid>\n                                </Grid>\n                                <Grid item style={{ width: '70%' }}>\n                                    {threadOpen ? (\n                                        <Thread\n                                            messages={messages}\n                                            id={threadId}\n                                            websocket={websocket}\n                                            messageAmount={messageAmount}\n                                            setMessageAmount={setMessageAmount}\n                                            setThreadOpen={setThreadOpen}\n                                            setThreadId={setThreadId}\n                                        />\n                                    ) : (\n                                        <Grid container alignItems=\"center\" justify=\"center\" direction=\"column\" >\n                                            <Typography component=\"h1\" variant=\"h2\">Welcome {username}!</Typography>\n                                            <Typography component=\"div\" variant=\"body1\">This is Chat App made by Tommi.</Typography>\n                                        </Grid>\n                                    )}\n                                </Grid>\n                            </Grid>\n                        </Card>\n                    ) : (\n                        <Grid container direction=\"row\" style={{ height: heightCorrected, }} className={classes.desktopContainer} >\n                            <Grid item style={{ width: '30%', borderRight: '1px solid #5F4B8BFF', maxHeight: heightCorrected, overflowY: 'auto' }}>\n                                <Button\n                                    onClick={setCreateNewChatThreadOpen}\n                                    color=\"primary\"\n                                    variant=\"contained\"\n                                    className={classes.newThreadButton}\n                                >\n                                    Create a new chat thread\n                                </Button>\n                                <Grid container style={{ borderTop: '1px solid #5F4B8BFF', marginTop: '1rem' }} >\n                                    <List style={{ padding: 0, width: '100%' }}>\n                                        {sortedThreads.map((item) => (\n                                            <ThreadButton\n                                                id={item.id}\n                                                setThreadOpen={setThreadOpen}\n                                                setThreadId={setThreadId}\n                                                threadOpen={threadOpen}\n                                                threadId={threadId}\n                                                updateThreadButtonInfos={updateThreadButtonInfos}\n                                            />\n                                        ))}{' '}\n                                    </List>\n                                </Grid>\n                            </Grid>\n                            <Grid item style={{ width: '70%' }}>\n                                {threadOpen ? (\n                                    <Thread\n                                        messages={messages}\n                                        id={threadId}\n                                        websocket={websocket}\n                                        messageAmount={messageAmount}\n                                        setMessageAmount={setMessageAmount}\n                                        setThreadOpen={setThreadOpen}\n                                        setThreadId={setThreadId}\n                                    />\n                                ) : (\n                                    <Grid container alignItems=\"center\" justify=\"center\" direction=\"column\" >\n                                        <Typography component=\"h1\" variant=\"h2\">Welcome {username}!</Typography>\n                                        <Typography component=\"div\" variant=\"body1\">This is Chat App made by Tommi.</Typography>\n                                    </Grid>\n                                )}\n                            </Grid>\n                        </Grid>\n                    )}\n                </>\n            )\n            }\n            <Modal\n                modalOpen={modalOpen}\n                setModalOpen={setModalOpen}\n                websocket={websocket}\n                setThreadOpen={setThreadOpen}\n                setThreadId={setThreadId}\n            />\n        </>\n    );\n\n}\n\nexport default Home","import { withRouter } from 'react-router-dom';\r\nimport { Button, Grid, TextField, Typography } from '@material-ui/core';\r\nimport useForm from '../hooks/formHooks';\r\nimport { useUsers } from '../hooks/apiHooks';\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    loginHeader: {\r\n        [theme.breakpoints.down(600)]: {\r\n            fontSize: '2rem'\r\n        },\r\n    },\r\n    loginButton: {\r\n        backgroundColor: '#5F4B8BFF',\r\n        marginTop: '2rem',\r\n        marginBottom: '0.5rem',\r\n        '&:hover': {\r\n            backgroundColor: '#7159a6',\r\n        },\r\n    }\r\n}));\r\n\r\ninterface propType {\r\n    history: {\r\n        push: Function,\r\n    }\r\n}\r\n\r\nconst LoginForm = ({ history }: propType) => {\r\n    const classes = useStyles();\r\n    const { postLogin } = useUsers();\r\n    const doLogin = async () => {\r\n        try {\r\n            const userdata = await postLogin(inputs);\r\n            localStorage.setItem('id', userdata.id);\r\n            history.push('/');\r\n        } catch (e) {\r\n            console.log('doLogin', e.message);\r\n        }\r\n    };\r\n\r\n    const { inputs, handleInputChange, handleSubmit } = useForm(doLogin, {\r\n        username: '',\r\n        password: '',\r\n    });\r\n\r\n    return (\r\n        <Grid container>\r\n            <Grid\r\n                container\r\n                spacing={0}\r\n                direction=\"column\"\r\n                alignItems=\"center\"\r\n                justify=\"center\"\r\n            >\r\n                <Typography className={classes.loginHeader} component=\"h3\" variant=\"h3\" gutterBottom>\r\n                    Login\r\n                </Typography>\r\n            </Grid>\r\n            <Grid\r\n                container\r\n                spacing={0}\r\n                direction=\"column\"\r\n                alignItems=\"center\"\r\n                justify=\"center\"\r\n            >\r\n                <form onSubmit={handleSubmit}>\r\n                    <Grid container direction=\"column\">\r\n                        <Grid container item>\r\n                            <TextField\r\n                                type=\"text\"\r\n                                name=\"username\"\r\n                                label=\"Username\"\r\n                                onChange={handleInputChange}\r\n                                value={inputs.username}\r\n                            />\r\n                        </Grid>\r\n                        <Grid container item>\r\n                            <TextField\r\n                                type=\"password\"\r\n                                name=\"password\"\r\n                                label=\"Password\"\r\n                                onChange={handleInputChange}\r\n                                value={inputs.password}\r\n                            />\r\n                        </Grid>\r\n\r\n                        <Grid container item>\r\n                            <Button\r\n                                fullWidth\r\n                                className={classes.loginButton}\r\n                                color=\"primary\"\r\n                                type=\"submit\"\r\n                                variant=\"contained\"\r\n                            >\r\n                                Login\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n                </form>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n\r\n\r\nexport default withRouter(LoginForm);","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport useForm from '../hooks/formHooks';\r\nimport { useUsers } from '../hooks/apiHooks';\r\nimport { Grid, Typography, Button } from '@material-ui/core';\r\nimport { ValidatorForm, TextValidator } from 'react-material-ui-form-validator';\r\nimport { useEffect } from 'react';\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    registerHeader: {\r\n        [theme.breakpoints.down(600)]: {\r\n            fontSize: '2rem'\r\n        },\r\n    },\r\n    registerButton: {\r\n        backgroundColor: '#5F4B8BFF',\r\n        marginTop: '2rem',\r\n        marginBottom: '0.5rem',\r\n        '&:hover': {\r\n            backgroundColor: '#7159a6',\r\n        },\r\n    }\r\n}));\r\n\r\ninterface propType {\r\n    setToggle: Function\r\n}\r\n\r\nconst RegisterForm = ({ setToggle }: propType) => {\r\n    const classes = useStyles();\r\n    const { register, getUserAvailable } = useUsers();\r\n    const validators = {\r\n        username: ['required', 'minStringLength: 3', 'maxStringLength: 15', 'isAvailable'],\r\n        password: ['required', 'minStringLength: 5'],\r\n        confirm: ['required', 'isPasswordMatch'],\r\n    };\r\n\r\n    const errorMessages = {\r\n        username: [\r\n            'Required field',\r\n            'Minimum of 3 characters',\r\n            'Too many characters!',\r\n            'Username is not available',\r\n        ],\r\n        password: ['Required field', 'Minimum of 5 characters'],\r\n        confirm: ['Required field', 'Passwords do not match'],\r\n    };\r\n\r\n    const doRegister = async () => {\r\n        try {\r\n            const available = await getUserAvailable(inputs.username);\r\n            if (available) {\r\n                delete inputs.confirm;\r\n                const result = await register(inputs);\r\n                if (result.length > 0) {\r\n                    alert(result);\r\n                    setToggle(true);\r\n                }\r\n            }\r\n        } catch (e) {\r\n            console.log(e.message);\r\n        }\r\n    };\r\n\r\n    const { inputs, handleInputChange, handleSubmit } = useForm(doRegister, {\r\n        username: '',\r\n        password: '',\r\n        confirm: '',\r\n    });\r\n\r\n    useEffect(() => {\r\n        ValidatorForm.addValidationRule('isAvailable', async (value) => {\r\n            if (value.length > 2) {\r\n                try {\r\n                    const available = await getUserAvailable(value);\r\n                    return available;\r\n                } catch (e) {\r\n                    console.log(e.message);\r\n                    return true;\r\n                }\r\n            }\r\n        });\r\n\r\n        ValidatorForm.addValidationRule(\r\n            'isPasswordMatch',\r\n            (value) => value === inputs.password\r\n        );\r\n    }, [inputs]);\r\n\r\n    return (\r\n        <Grid container alignItems=\"center\">\r\n            <Grid\r\n                container\r\n                spacing={0}\r\n                direction=\"column\"\r\n                alignItems=\"center\"\r\n                justify=\"center\"\r\n            >\r\n                <Typography className={classes.registerHeader} component=\"h3\" variant=\"h3\" gutterBottom>\r\n                    Register\r\n                </Typography>\r\n            </Grid>\r\n            <Grid item xs={12} container direction=\"column\" alignItems=\"center\">\r\n                <ValidatorForm onSubmit={handleSubmit}>\r\n                    <Grid container direction=\"column\">\r\n                        <Grid container item>\r\n                            <TextValidator\r\n                                fullWidth\r\n                                type=\"text\"\r\n                                name=\"username\"\r\n                                label=\"Username\"\r\n                                onChange={handleInputChange}\r\n                                value={inputs.username}\r\n                                validators={validators.username}\r\n                                errorMessages={errorMessages.username}\r\n                            />\r\n                        </Grid>\r\n\r\n                        <Grid container item>\r\n                            <TextValidator\r\n                                fullWidth\r\n                                type=\"password\"\r\n                                name=\"password\"\r\n                                label=\"Password\"\r\n                                onChange={handleInputChange}\r\n                                value={inputs.password}\r\n                                validators={validators.password}\r\n                                errorMessages={errorMessages.password}\r\n                            />\r\n                        </Grid>\r\n\r\n                        <Grid container item>\r\n                            <TextValidator\r\n                                fullWidth\r\n                                type=\"password\"\r\n                                name=\"confirm\"\r\n                                label=\"Confirm password\"\r\n                                onChange={handleInputChange}\r\n                                value={inputs.confirm}\r\n                                validators={validators.confirm}\r\n                                errorMessages={errorMessages.confirm}\r\n                            />\r\n                        </Grid>\r\n\r\n                        <Grid container item>\r\n                            <Button\r\n                                fullWidth\r\n                                className={classes.registerButton}\r\n                                color=\"primary\"\r\n                                type=\"submit\"\r\n                                variant=\"contained\"\r\n                            >\r\n                                Register\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n                </ValidatorForm>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n\r\nexport default RegisterForm;","import LoginForm from '../components/loginForm';\r\nimport RegisterForm from '../components/registerForm';\r\nimport { Button, Grid } from '@material-ui/core';\r\nimport { useState } from 'react';\r\nimport Card from '@material-ui/core/Card';\r\n\r\nconst Login = () => {\r\n    const [toggle, setToggle] = useState(true);\r\n\r\n    const showHide = () => {\r\n        setToggle(!toggle);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Grid container justify=\"center\">\r\n                <Card\r\n                    style={{\r\n                        margin: '5rem 2rem 3rem 2rem',\r\n                        padding: '3rem',\r\n                        maxWidth: '18rem',\r\n                    }}\r\n                >\r\n                    {toggle ? <LoginForm /> : <RegisterForm setToggle={setToggle} />}\r\n                    <Grid container justify=\"center\">\r\n                        <Button onClick={showHide}>\r\n                            {toggle ? 'or register' : 'or login'}\r\n                        </Button>\r\n                    </Grid>\r\n                </Card>\r\n            </Grid>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Login;","import PropTypes from 'prop-types';\r\nimport { useContext, useEffect } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { MediaContext } from '../contexts/mediaContext';\r\nimport { WebsocketContext } from '../contexts/websocketContext';\r\nimport { useUsers } from '../hooks/apiHooks';\r\n\r\ninterface propType {\r\n    history: {\r\n        push: Function,\r\n    }\r\n}\r\n\r\nconst Logout = ({ history }: propType) => {\r\n    const { logout } = useUsers();\r\n    const { user, setUser } = useContext(MediaContext);\r\n    const { websocket } = useContext(WebsocketContext);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                console.log('USER:', user)\r\n                const isLoggedIn = await logout();\r\n                setUser(0);\r\n                if (websocket !== undefined) {\r\n                    websocket.close();\r\n                }\r\n                console.log('Logout success: ', isLoggedIn.success, user)\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        })();\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <Redirect to={'/login'} />\r\n        </>\r\n    );\r\n};\r\n\r\nLogout.propTypes = {\r\n    history: PropTypes.object,\r\n};\r\n\r\nexport default Logout;","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport { useContext } from 'react';\r\nimport { useEffect, useState } from 'react';\r\nimport { WebsocketContext } from '../contexts/websocketContext';\r\nimport { useUsers } from '../hooks/apiHooks';\r\n\r\nconst Profile = () => {\r\n    const [user, setUser] = useState({ id: '', username: '' })\r\n    const { websocket } = useContext(WebsocketContext);\r\n    const { getProfile } = useUsers();\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                if (websocket !== undefined) {\r\n                    websocket.close();\r\n                }\r\n                const result = await getProfile();\r\n                console.log('Profile: ', result);\r\n                setUser(result);\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        })();\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{ whiteSpace: 'pre-line' }}>\r\n            <h1>{!user ? \"Loading...\" : user.username + '\\n' + user.id}</h1>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Profile","import { Container } from '@material-ui/core';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Nav from './components/nav';\nimport { MediaProvider } from './contexts/mediaContext';\nimport { WebsocketProvider } from './contexts/websocketContext';\nimport Home from './views/home';\nimport Login from './views/login';\nimport Logout from './views/logout';\nimport Profile from './views/profile';\nimport { useMediaQuery } from 'react-responsive';\n\nconst useStyles = makeStyles((theme) => ({\n  content: {\n    paddingTop: 64,\n    textAlign: 'center',\n    width: '100vw',\n    [theme.breakpoints.down(600)]: {\n      paddingTop: 56,\n    },\n  },\n}));\n\nconst App = () => {\n  const classes = useStyles();\n\n  return (\n    <Router>\n      <MediaProvider>\n        <WebsocketProvider>\n          <Container\n            maxWidth=\"xl\"\n            style={{\n              margin: 0,\n              padding: 0,\n            }}\n          >\n            <Nav />\n            <main className={classes.content}>\n              <Switch>\n                <Route path=\"/\" exact component={Home} />\n                <Route path=\"/login\" component={Login} />\n                <Route path=\"/logout\" component={Logout} />\n                <Route path=\"/profile\" component={Profile} />\n              </Switch>\n            </main>\n\n          </Container>\n        </WebsocketProvider>\n      </MediaProvider>\n    </Router >\n\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"]}}