{"code":"(this[\"webpackJsonpmy-app\"]=this[\"webpackJsonpmy-app\"]||[]).push([[0],{100:function(e,t,n){},121:function(e,t,n){\"use strict\";n.r(t);var r=n(0),a=n.n(r),s=n(13),c=n.n(s),i=(n(100),n(169)),o=n(30),u=n(14),l=n(5),d=n.n(l),j=n(9),m=n(8),p=n(153),b=n(156),h=n(158),f=n(159),g=n(160),O=n(84),x=n.n(O),v={backendUrl:\"https://something.com\"},w=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r,a,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,fetch(v.backendUrl+t,n);case 3:return r=e.sent,e.next=6,r.json();case 6:if(!(a=e.sent).error){e.next=11;break}throw new Error(a.message+\": \"+a.error);case 11:if(r.ok){e.next=15;break}throw new Error(\"doFetch failed\");case 15:return e.abrupt(\"return\",a);case 16:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){return{getUsers:function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:\"GET\",credentials:\"include\"},e.prev=1,e.next=4,w(\"/users\",t);case 4:return e.abrupt(\"return\",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0.message);case 10:case\"end\":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),getUserAvailable:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(\"/users/username/\"+t);case 3:return e.abrupt(\"return\",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case\"end\":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getUsernameById:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(\"/user/\"+t);case 3:return e.abrupt(\"return\",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case\"end\":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),register:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(t),credentials:\"include\"},e.prev=1,e.next=4,w(\"/user\",n);case 4:return r=e.sent,console.log(\"RegisterResult\",r.message),e.abrupt(\"return\",r.message);case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0.message);case 12:case\"end\":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),getIsLoggedIn:function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:\"GET\",credentials:\"include\"},e.prev=1,e.next=4,w(\"/isloggedin\",t);case 4:return e.abrupt(\"return\",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0.message);case 10:case\"end\":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),postLogin:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(t),credentials:\"include\"},e.prev=1,e.next=4,w(\"/login\",n);case 4:return r=e.sent,e.abrupt(\"return\",r);case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.message);case 11:case\"end\":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),logout:function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:\"DELETE\",credentials:\"include\"},e.prev=1,e.next=4,w(\"/logout\",t);case 4:return e.abrupt(\"return\",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0.message);case 10:case\"end\":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),getProfile:function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:\"GET\",credentials:\"include\"},e.prev=1,e.next=4,w(\"/profile\",t);case 4:return e.abrupt(\"return\",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0.message);case 10:case\"end\":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}},S=function(){return{getThreadIds:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(\"/threads/\"+t);case 3:return e.abrupt(\"return\",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case\"end\":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getUserIds:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(\"/threadusers/\"+t);case 3:return e.abrupt(\"return\",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case\"end\":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getThreadName:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(\"/thread/\"+t);case 3:return n=e.sent,e.abrupt(\"return\",n.name);case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case\"end\":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),postMessage:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:t,credentials:\"include\"},e.prev=1,e.next=4,w(\"/message\",n);case 4:return r=e.sent,e.abrupt(\"return\",r.success);case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.message);case 11:case\"end\":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),getMessages:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(\"/messages/\"+t);case 3:return e.abrupt(\"return\",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case\"end\":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getAllMessages:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(\"/all_messages/\"+t);case 3:return e.abrupt(\"return\",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case\"end\":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),getLastMessage:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(\"/last_message/\"+t);case 3:return e.abrupt(\"return\",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.message);case 9:case\"end\":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),createNewChatThread:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:t,credentials:\"include\"},e.prev=1,e.next=4,w(\"/new_thread\",n);case 4:return r=e.sent,e.abrupt(\"return\",r.success);case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.message);case 11:case\"end\":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}},k=n(2),C={user:0,setUser:function(){}},T=a.a.createContext(C),I=function(e){var t=e.children,n=Object(r.useState)(C.user),a=Object(m.a)(n,2),s=a[0],c=a[1];return Object(k.jsx)(T.Provider,{value:{user:s,setUser:c},children:t})},E=Object(p.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:\"#5F4B8BFF\"},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,paddingRight:\"24px\"},toolbar:{display:\"flex\",justifyContent:\"flex-end\"},itemPack:{display:\"flex\",alignItems:\"center\"},logo:{position:\"absolute\",display:\"flex\",alignItems:\"center\",left:\"130px\",transform:\"translate(-50%)\"}}})),F=function(){var e=E(),t=Object(r.useState)(!1),n=Object(m.a)(t,2),a=n[0],s=n[1],c=Object(r.useContext)(T),i=c.user,u=c.setUser,l=y().getIsLoggedIn;return Object(r.useEffect)((function(){Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(\"NAV\"),e.next=4,l();case 4:(t=e.sent).success?(s(!0),u(t.id)):s(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case\"end\":return e.stop()}}),e,null,[[0,8]])})))()}),[i]),Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(b.a,{className:e.appBar,children:Object(k.jsxs)(h.a,{className:e.toolbar,children:[Object(k.jsx)(f.a,{component:o.b,to:\"/\",className:e.logo,color:\"inherit\",style:{textDecoration:\"none\"},children:Object(k.jsx)(\"h2\",{children:\"ChatApp\"})}),Object(k.jsx)(\"div\",{className:e.itemPack,children:a?Object(k.jsxs)(\"div\",{children:[Object(k.jsx)(g.a,{color:\"inherit\",component:o.b,to:\"/logout\",children:\"Logout\"}),Object(k.jsx)(g.a,{color:\"inherit\",component:o.b,to:\"/profile\",children:\"Profile\"})]}):Object(k.jsx)(g.a,{color:\"inherit\",startIcon:Object(k.jsx)(x.a,{}),component:o.b,to:\"/login\",children:\"Login\"})})]})})})},M={websocket:void 0,setWebsocket:function(){}},N=a.a.createContext(M),B=function(e){var t=e.children,n=Object(r.useState)(),a=Object(m.a)(n,2),s=a[0],c=a[1];return Object(k.jsx)(N.Provider,{value:{websocket:s,setWebsocket:c},children:t})},L=n(87),_=n(161),U=n(163),D=n(52),A=n(79),R=n(85),P=n.n(R),W=n(166),V=n(123),J=n(162),Y=n(66),q=n.n(Y),z=Object(p.a)((function(){return{message:{backgroundColor:\"lightGrey\",marginBottom:\"0.5rem\",borderRadius:\"1rem\",padding:\"0.5rem\",maxWidth:\"50%\"},ownMessage:{backgroundColor:\"#5F4B8BFF\",color:\"white\",marginBottom:\"0.5rem\",borderRadius:\"1rem\",padding:\"0.5rem\",maxWidth:\"50%\"},inline:{display:\"inline\"},inlineOwn:{display:\"inline\",color:\"white\"},timestamp:{fontSize:\"0.7rem\",marginLeft:\"2rem\"},dateIndicator:{background:\"rgb(95, 75, 139, .2)\",borderRadius:\"0.3rem\",padding:\"0.2rem\",marginBottom:\"0.5rem\",textAlign:\"center\"}}})),G=function(e){var t=e.message_id,n=e.user_id,a=e.contents,s=e.timestamp,c=e.setMessageId,i=e.usernames,o=e.index,u=e.messageArray,l=z(),d=Object(r.useState)(\"\"),j=Object(m.a)(d,2),p=j[0],b=j[1],h=Object(r.useState)(\"\"),f=Object(m.a)(h,2),g=f[0],O=f[1],x=Object(r.useState)(!1),v=Object(m.a)(x,2),w=v[0],y=v[1],S=Object(r.useState)(!1),C=Object(m.a)(S,2),I=C[0],E=C[1],F=Object(r.useContext)(T).user,M=q()(s).format(\"DD.MM.YYYY\");return Object(r.useEffect)((function(){try{for(var e=0;e<i.length;e++)i[e].user_id===n&&b(i[e].username);if(0!==o){var r=q()(u[o-1].timestamp).format(\"DD.MM.YYYY\");M!==r&&E(!0)}else E(!0);var a=new Date(s),l=a.getHours().toString(),d=a.getMinutes().toString();a.getHours()<10&&(l=\"0\"+l),a.getMinutes()<10&&(d=\"0\"+d),O(l+\".\"+d),y(n===F),c(t)}catch(j){console.log(j.message)}}),[t]),Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(V.a,{style:{width:\"100%\",display:\"flex\",flexDirection:\"column\"},children:[I&&Object(k.jsx)(_.a,{container:!0,justifyContent:\"center\",children:Object(k.jsx)(D.a,{className:l.dateIndicator,component:\"h6\",variant:\"body1\",children:M})}),w?Object(k.jsx)(_.a,{container:!0,justify:\"flex-end\",children:Object(k.jsx)(_.a,{item:!0,className:l.ownMessage,children:Object(k.jsx)(J.a,{primary:Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(_.a,{container:!0,justify:\"space-between\",children:[Object(k.jsx)(D.a,{component:\"h2\",children:p}),Object(k.jsx)(D.a,{component:\"span\",variant:\"subtitle1\",className:l.timestamp,children:g})]})}),secondary:Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(D.a,{component:\"span\",variant:\"body2\",className:l.inlineOwn,children:a})})})})}):Object(k.jsx)(_.a,{container:!0,justify:\"flex-start\",children:Object(k.jsx)(_.a,{item:!0,className:l.message,children:Object(k.jsx)(J.a,{primary:Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(_.a,{container:!0,justify:\"space-between\",children:[Object(k.jsx)(D.a,{component:\"h2\",children:p}),Object(k.jsx)(D.a,{component:\"span\",variant:\"subtitle1\",className:l.timestamp,children:g})]})}),secondary:Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(D.a,{component:\"span\",variant:\"body2\",className:l.inline,color:\"textPrimary\",children:a})})})})})]})})},H=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}};function K(){var e=Object(r.useState)(H()),t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){function e(){a(H())}return window.addEventListener(\"resize\",e),function(){return window.removeEventListener(\"resize\",e)}}),[]),n}var X=function(e){var t=e.messages,n=e.id,a=e.websocket,s=e.messageAmount,c=e.setMessageAmount,i=Object(r.useState)(\"\"),o=Object(m.a)(i,2),u=o[0],l=o[1],p=Object(r.useState)(0),b=Object(m.a)(p,2),h=b[0],f=b[1],O=Object(r.useState)(!1),x=Object(m.a)(O,2),v=x[0],w=x[1],C=Object(r.useState)([]),I=Object(m.a)(C,2),E=I[0],F=I[1],M=Object(r.useState)([]),N=Object(m.a)(M,2),B=N[0],L=N[1],D=Object(r.useState)(!1),R=Object(m.a)(D,2),V=R[0],J=R[1],Y=Object(r.useState)(!1),q=Object(m.a)(Y,2),z=q[0],H=q[1],X=Object(r.useState)(0),Q=Object(m.a)(X,2),Z=Q[0],$=Q[1],ee=Object(r.useContext)(T).user,te=S(),ne=te.postMessage,re=te.getUserIds,ae=te.getAllMessages,se=y().getUsernameById,ce=K().height-64,ie=Object(r.useRef)(null),oe=Object(r.useRef)(null),ue=function(e){var t,n;1===e?null===(t=ie.current)||void 0===t||t.scrollIntoView():(null===(n=oe.current)||void 0===n||n.scrollIntoView(),H(!0))};Object(r.useEffect)((function(){Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{ue(V&&!z?2:1)}catch(t){console.log(t.message)}case 1:case\"end\":return e.stop()}}),e)})))()}),[h]),Object(r.useEffect)((function(){Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Z!==n&&(J(!1),H(!1),c(50)),$(n),console.log(\"messageUpdate\"),t.length>=50&&!V?w(!0):w(!1)}catch(r){console.log(r.message)}case 1:case\"end\":return e.stop()}}),e)})))()}),[t]),Object(r.useEffect)((function(){Object(j.a)(d.a.mark((function e(){var t,r,a,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F([]),console.log(\"USERNAMELIST\"),e.next=5,re(n);case 5:t=e.sent,r=[],a=0;case 8:if(!(a<t.length)){e.next=17;break}return e.next=11,se(t[a].user_id);case 11:s=e.sent,c={user_id:t[a].user_id,username:s.username},r.push(c);case 14:a++,e.next=8;break;case 17:F(r),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0.message);case 23:case\"end\":return e.stop()}}),e,null,[[0,20]])})))()}),[n]);var le=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,s,c,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=6e4*(new Date).getTimezoneOffset(),s=new Date(Date.now()-r).toISOString().slice(0,-1),console.log(\"TIMEST: \",s),c=JSON.stringify({contents:u,timestamp:s,user_id:ee,thread_id:n}),e.next=7,ne(c);case 7:i=e.sent,console.log(\"SUCCESS: \",i),o={type:\"message\",contents:u,timestamp:s,user_id:ee,thread_id:n},void 0!==a&&a.send(JSON.stringify(o)),l(\"\");case 12:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(j.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z!==n?(c(50),t=50):t=s,e.next=3,ae(n);case 3:r=e.sent,console.log(\"MESSAGE AMOUNT\",s,r),r.splice(r.length-t,t),L(r),J(!0),w(!1);case 9:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(_.a,{container:!0,justify:\"center\",direction:\"column\",style:{height:ce},children:[Object(k.jsxs)(_.a,{item:!0,justify:\"center\",style:{padding:\"2rem 6rem 1.5rem 6rem\",backgroundColor:\"#E69A8DFF\",height:\"90%\",overflowX:\"hidden\",overflowY:\"auto\"},children:[V&&Object(k.jsxs)(U.a,{children:[B.map((function(e,t){return Object(k.jsx)(G,{message_id:e.id,user_id:e.user_id,contents:e.contents,timestamp:e.timestamp,setMessageId:f,usernames:E,index:t,messageArray:B})})),\" \",Object(k.jsx)(\"div\",{ref:oe})]}),v&&Object(k.jsx)(g.a,{onClick:de,children:\"Load all messages\"}),E.length>0&&Object(k.jsxs)(U.a,{children:[t.map((function(e,n){return Object(k.jsx)(G,{message_id:e.id,user_id:e.user_id,contents:e.contents,timestamp:e.timestamp,setMessageId:f,usernames:E,index:n,messageArray:t})})),\" \",Object(k.jsx)(\"div\",{ref:ie})]})]}),Object(k.jsx)(_.a,{item:!0,container:!0,justify:\"center\",direction:\"column\",style:{height:\"10%\",backgroundColor:\"lightgray\"},children:Object(k.jsx)(_.a,{item:!0,children:Object(k.jsxs)(\"form\",{onSubmit:le,children:[Object(k.jsx)(A.a,{value:u,variant:\"outlined\",label:\"Say something!\",onInput:function(e){return l(e.target.value)},style:{width:\"70%\",backgroundColor:\"white\",borderRadius:\"0.5rem\"}}),Object(k.jsx)(W.a,{type:\"submit\",color:\"default\",style:{marginTop:\"0.15rem\"},children:Object(k.jsx)(P.a,{style:{fill:\"#5F4B8BFF\"}})})]})})})]})})},Q=Object(p.a)((function(){return{text:{color:\"white\",width:\"100%\",padding:\"1rem\"},inline:{display:\"inline\"},lastMessage:{display:\"inline\",fontSize:\"0.7rem\"},timestamp:{fontSize:\"0.5rem\",marginLeft:\"2rem\"},button:{width:\"100%\",maxWidth:\"30vw\",padding:\"0 0.7rem\",borderBottom:\"1px solid #5F4B8BFF\",cursor:\"pointer\",\"&:hover\":{background:\"#f0f0f0\"}}}})),Z=function(e){var t=e.id,n=e.setThreadOpen,a=e.setThreadId,s=e.threadOpen,c=e.threadId,i=e.updateThreadButtonInfos,o=S(),u=o.getThreadName,l=o.getLastMessage,p=y().getUsernameById,b=Object(r.useState)(\"\"),h=Object(m.a)(b,2),f=h[0],g=h[1],O=Object(r.useState)({username:\"\",contents:\"\",timestamp:\"\"}),x=Object(m.a)(O,2),v=x[0],w=x[1],C=Object(r.useContext)(N).websocket,T=Q();Object(r.useEffect)((function(){Object(j.a)(d.a.mark((function e(){var n,r,a,s,c,i,o,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(t);case 3:return n=e.sent,g(n),e.next=7,l(t);case 7:if(0===(r=e.sent).length){e.next=22;break}return e.next=11,p(r[0].user_id);case 11:a=e.sent,s=new Date(r[0].timestamp),c=s.getHours().toString(),i=s.getMinutes().toString(),s.getHours()<10&&(c=\"0\"+c),s.getMinutes()<10&&(i=\"0\"+i),o=c+\".\"+i,j={username:a.username+\":\",contents:r[0].contents,timestamp:o},w(j),e.next=24;break;case 22:w({username:\"No messages yet.\",contents:\"\",timestamp:\"\"});case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),console.log(e.t0.message);case 29:case\"end\":return e.stop()}}),e,null,[[0,26]])})))()}),[i]);return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(V.a,{onClick:function(){s?(c===t?(n(!1),a(0)):a(t),void 0!==C&&C.close()):(n(!0),a(t))},className:T.button,children:Object(k.jsx)(J.a,{primary:Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(_.a,{container:!0,justify:\"space-between\",children:[Object(k.jsx)(D.a,{component:\"h1\",children:f}),Object(k.jsx)(D.a,{component:\"span\",variant:\"subtitle1\",className:T.timestamp,children:v.timestamp})]})}),secondary:Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(D.a,{component:\"span\",variant:\"body2\",className:T.lastMessage,children:[v.username,\" \",v.contents]})})})})})},$=n(170),ee=n(167),te=n(27),ne=n(50),re=n(51),ae=function(e,t){var n=Object(r.useState)(t),a=Object(m.a)(n,2),s=a[0],c=a[1];return{inputs:s,handleSubmit:function(t){t&&t.preventDefault(),e()},handleInputChange:function(e){e.persist(),c((function(t){return Object(re.a)(Object(re.a)({},t),{},Object(ne.a)({},e.target.name,e.target.value))}))},handleFileChange:function(e){e.persist(),c((function(t){return Object(re.a)(Object(re.a)({},t),{},Object(ne.a)({},e.target.name,e.target.files[0]))}))},setInputs:c}},se=function(e){var t=e.setCreateNewChatThread,n=e.setUpdateThreadButtons,a=Object(r.useContext)(T).user,s=S().createNewChatThread,c=y().getUsers,i=Object(r.useState)([]),o=Object(m.a)(i,2),u=o[0],l=o[1],p=ae(function(){var e=Object(j.a)(d.a.mark((function e(){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,\"\"===b.user2){e.next=11;break}return r=JSON.stringify({name:b.threadName,user_id:a,user2_id:b.user2}),e.next=5,s(r);case 5:c=e.sent,console.log(\"SUCCESS: \",c),t(!1),n(Date.now()),e.next=12;break;case 11:alert(\"Choose a user with whom you want to chat!\");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0.message);case 17:case\"end\":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),{threadName:\"\",user2:\"\"}),b=p.inputs,h=p.handleInputChange,f=p.handleSubmit;return Object(r.useEffect)((function(){Object(j.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c();case 3:for(t=e.sent,n=[],r=0;r<t.length;r++)t[r].id!==a&&n.push(t[r]);l(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case\"end\":return e.stop()}}),e,null,[[0,9]])})))()}),[]),Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(_.a,{container:!0,justifyContent:\"center\",direction:\"column\",children:[Object(k.jsx)(D.a,{variant:\"h3\",children:\"Create a new chat thread\"}),Object(k.jsxs)(te.ValidatorForm,{onSubmit:f,children:[Object(k.jsx)(_.a,{container:!0,item:!0,justifyContent:\"center\",children:Object(k.jsx)(te.TextValidator,{type:\"text\",name:\"threadName\",label:\"Thread name\",onChange:h,value:b.threadName,validators:[\"required\",\"minStringLength: 3\"],errorMessages:[\"Required field\",\"Minimum of 3 characters\"]})}),Object(k.jsx)(_.a,{container:!0,item:!0,justifyContent:\"center\",children:Object(k.jsxs)($.a,{name:\"user2\",value:b.user2,label:\"User\",onChange:h,children:[u.map((function(e){return Object(k.jsx)(ee.a,{value:e.id,children:e.username})})),\" \"]})}),Object(k.jsx)(_.a,{container:!0,item:!0,justifyContent:\"center\",children:Object(k.jsx)(g.a,{style:{marginTop:\"2rem\",marginBottom:\"0.5rem\"},color:\"primary\",type:\"submit\",variant:\"contained\",children:\"Create\"})})]})]})})},ce=function(e){var t=e.history,n=Object(r.useContext)(T),a=n.user,s=n.setUser,c=Object(r.useContext)(N),i=c.websocket,o=c.setWebsocket,u=y().getIsLoggedIn,l=S(),p=l.getThreadIds,b=l.getMessages,h=K().height-64,f=Object(r.useState)([]),O=Object(m.a)(f,2),x=O[0],v=O[1],w=Object(r.useState)(!1),C=Object(m.a)(w,2),I=C[0],E=C[1],F=Object(r.useState)(0),M=Object(m.a)(F,2),B=M[0],A=M[1],R=Object(r.useState)([]),P=Object(m.a)(R,2),W=P[0],V=P[1],J=Object(r.useState)(Date.now()),Y=Object(m.a)(J,2),q=Y[0],z=Y[1],G=Object(r.useState)(Date.now()),H=Object(m.a)(G,2),Q=H[0],$=H[1],ee=Object(r.useState)(Date.now()),te=Object(m.a)(ee,2),ne=te[0],re=te[1],ae=Object(r.useState)(!1),ce=Object(m.a)(ae,2),ie=ce[0],oe=ce[1],ue=Object(r.useState)(50),le=Object(m.a)(ue,2),de=le[0],je=le[1],me=Object(r.useState)({type:\"\",contents:\"\",timestamp:new Date,user_id:0,thread_id:0}),pe=Object(m.a)(me,2),be=pe[0],he=pe[1];Object(r.useEffect)((function(){Object(j.a)(d.a.mark((function e(){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(\"USER: \",a),e.next=4,u();case 4:if((n=e.sent).success||t.push(\"/login\"),s(n.id),console.log(\"Logged user: \",a,n.id),0===a){e.next=13;break}return e.next=11,p(n.id);case 11:r=e.sent,v(r);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0.message);case 18:case\"end\":return e.stop()}}),e,null,[[0,15]])})))()}),[a,Q]),Object(r.useEffect)((function(){Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,0===B){e.next=7;break}return e.next=4,b(B);case 4:t=e.sent,n=t.reverse(),V(n);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case\"end\":return e.stop()}}),e,null,[[0,9]])})))()}),[B,q]),Object(r.useEffect)((function(){try{if(\"\"!==be.type&&be.thread_id===B){var e={id:Date.now(),user_id:be.user_id,contents:be.contents,timestamp:be.timestamp};V((function(t){return[].concat(Object(L.a)(t),[e])})),je(de+1)}}catch(t){console.log(t.message)}}),[be]),Object(r.useEffect)((function(){try{if(0!==x.length&&(void 0===i||2===i.readyState||3===i.readyState)){console.log(\"READYSTATE \",null===i||void 0===i?void 0:i.readyState);var e=new WebSocket(\"ws://localhost:3001\");e.addEventListener(\"open\",(function(t){console.log(\"Server is opened.\");var n={type:\"client\",user_id:a,threads:x};e.send(JSON.stringify(n))})),e.addEventListener(\"message\",(function(t){if(\"ping\"!==t.data){console.log(\"Message from server \",JSON.parse(t.data).thread_id);var n=JSON.parse(t.data);\"message\"===n.type?(he(n),re(Date.now())):setTimeout((function(){return e.send(\"pong\")}),1e3)}})),e.addEventListener(\"close\",(function(e){console.log(\"Websocket connection closed.\"),z(Date.now())})),o(e),console.log(\"NEW SOCKET\")}}catch(t){console.log(t.message)}}),[q,x]);return Object(k.jsx)(k.Fragment,{children:ie?Object(k.jsx)(se,{setCreateNewChatThread:oe,setUpdateThreadButtons:$}):Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(_.a,{container:!0,direction:\"row\",style:{height:h},children:[Object(k.jsxs)(_.a,{item:!0,style:{width:\"30%\",borderRight:\"1px solid #5F4B8BFF\"},children:[Object(k.jsx)(g.a,{onClick:function(){oe(!0)},color:\"primary\",variant:\"contained\",style:{marginTop:\"1rem\",marginBottom:\"1rem\"},children:\"Create a new chat thread\"}),Object(k.jsx)(_.a,{container:!0,style:{borderTop:\"1px solid #5F4B8BFF\",marginTop:\"1rem\"},children:Object(k.jsxs)(U.a,{style:{padding:0,width:\"100%\"},children:[x.map((function(e){return Object(k.jsx)(Z,{id:e.thread_id,setThreadOpen:E,setThreadId:A,threadOpen:I,threadId:B,updateThreadButtonInfos:ne})})),\" \"]})})]}),Object(k.jsx)(_.a,{item:!0,style:{width:\"70%\"},children:I?Object(k.jsx)(X,{messages:W,id:B,websocket:i,messageAmount:de,setMessageAmount:je}):Object(k.jsxs)(_.a,{container:!0,alignItems:\"center\",justify:\"center\",direction:\"column\",children:[Object(k.jsx)(D.a,{component:\"h1\",variant:\"h2\",children:\"Welcome\"}),Object(k.jsx)(D.a,{component:\"div\",variant:\"body1\",children:\"This is Chat App made by Tommi.\"})]})})]})})})},ie=Object(u.g)((function(e){var t=e.history,n=y().postLogin,r=ae(function(){var e=Object(j.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(a);case 3:r=e.sent,localStorage.setItem(\"id\",r.id),t.push(\"/\"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(\"doLogin\",e.t0.message);case 11:case\"end\":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),{username:\"\",password:\"\"}),a=r.inputs,s=r.handleInputChange,c=r.handleSubmit;return Object(k.jsxs)(_.a,{container:!0,children:[Object(k.jsx)(_.a,{container:!0,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",children:Object(k.jsx)(D.a,{component:\"h1\",variant:\"h2\",gutterBottom:!0,children:\"Login\"})}),Object(k.jsx)(_.a,{container:!0,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",children:Object(k.jsx)(\"form\",{onSubmit:c,children:Object(k.jsxs)(_.a,{container:!0,direction:\"column\",children:[Object(k.jsx)(_.a,{container:!0,item:!0,children:Object(k.jsx)(A.a,{type:\"text\",name:\"username\",label:\"Username\",onChange:s,value:a.username})}),Object(k.jsx)(_.a,{container:!0,item:!0,children:Object(k.jsx)(A.a,{type:\"password\",name:\"password\",label:\"Password\",onChange:s,value:a.password})}),Object(k.jsx)(_.a,{container:!0,item:!0,children:Object(k.jsx)(g.a,{fullWidth:!0,style:{marginTop:\"2rem\",marginBottom:\"0.5rem\"},color:\"primary\",type:\"submit\",variant:\"contained\",children:\"Login\"})})]})})})]})})),oe=function(e){var t=e.setToggle,n=y(),a=n.register,s=n.getUserAvailable,c={username:[\"required\",\"minStringLength: 3\",\"isAvailable\"],password:[\"required\",\"minStringLength:5\"],confirm:[\"required\",\"isPasswordMatch\"]},i={username:[\"Required field\",\"Minimum of 3 characters\",\"Username is not available\"],password:[\"Required field\",\"Minimum of 5 characters\"],confirm:[\"Required field\",\"Passwords do not match\"]},o=ae(function(){var e=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(u.username);case 3:if(!e.sent){e.next=10;break}return delete u.confirm,e.next=8,a(u);case 8:(n=e.sent).length>0&&(alert(n),t(!0));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:case\"end\":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),{username:\"\",password:\"\",confirm:\"\"}),u=o.inputs,l=o.handleInputChange,m=o.handleSubmit;return Object(r.useEffect)((function(){te.ValidatorForm.addValidationRule(\"isAvailable\",function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>2)){e.next=12;break}return e.prev=1,e.next=4,s(t);case 4:return n=e.sent,e.abrupt(\"return\",n);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0.message),e.abrupt(\"return\",!0);case 12:case\"end\":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),te.ValidatorForm.addValidationRule(\"isPasswordMatch\",(function(e){return e===u.password}))}),[u]),Object(k.jsxs)(_.a,{container:!0,alignItems:\"center\",children:[Object(k.jsx)(_.a,{container:!0,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",children:Object(k.jsx)(D.a,{component:\"h1\",variant:\"h2\",gutterBottom:!0,children:\"Register\"})}),Object(k.jsx)(_.a,{item:!0,xs:12,container:!0,direction:\"column\",alignItems:\"center\",children:Object(k.jsx)(te.ValidatorForm,{onSubmit:m,children:Object(k.jsxs)(_.a,{container:!0,direction:\"column\",children:[Object(k.jsx)(_.a,{container:!0,item:!0,children:Object(k.jsx)(te.TextValidator,{fullWidth:!0,type:\"text\",name:\"username\",label:\"Username\",onChange:l,value:u.username,validators:c.username,errorMessages:i.username})}),Object(k.jsx)(_.a,{container:!0,item:!0,children:Object(k.jsx)(te.TextValidator,{fullWidth:!0,type:\"password\",name:\"password\",label:\"Password\",onChange:l,value:u.password,validators:c.password,errorMessages:i.password})}),Object(k.jsx)(_.a,{container:!0,item:!0,children:Object(k.jsx)(te.TextValidator,{fullWidth:!0,type:\"password\",name:\"confirm\",label:\"Confirm password\",onChange:l,value:u.confirm,validators:c.confirm,errorMessages:i.confirm})}),Object(k.jsx)(_.a,{container:!0,item:!0,children:Object(k.jsx)(g.a,{style:{marginTop:\"2rem\",marginBottom:\"0.5rem\"},fullWidth:!0,color:\"primary\",type:\"submit\",variant:\"contained\",children:\"Register\"})})]})})})]})},ue=n(168),le=function(){var e=Object(r.useState)(!0),t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(_.a,{container:!0,justify:\"center\",children:Object(k.jsxs)(ue.a,{style:{margin:\"5rem 2rem 3rem 2rem\",padding:\"3rem\",maxWidth:\"18rem\"},children:[n?Object(k.jsx)(ie,{}):Object(k.jsx)(oe,{setToggle:a}),Object(k.jsx)(_.a,{container:!0,justify:\"center\",children:Object(k.jsx)(g.a,{onClick:function(){a(!n)},children:n?\"or register\":\"or login\"})})]})})})},de=function(e){e.history;var t=y().logout,n=Object(r.useContext)(T),a=n.user,s=n.setUser,c=Object(r.useContext)(N).websocket;return Object(r.useEffect)((function(){Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(\"USER:\",a),e.next=4,t();case 4:n=e.sent,s(0),void 0!==c&&c.close(),console.log(\"Logout success: \",n.success,a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case\"end\":return e.stop()}}),e,null,[[0,10]])})))()})),Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(u.a,{to:\"/login\"})})},je=function(){var e=Object(r.useState)({id:\"\",username:\"\"}),t=Object(m.a)(e,2),n=t[0],a=t[1],s=Object(r.useContext)(N).websocket,c=y().getProfile;return Object(r.useEffect)((function(){Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,void 0!==s&&s.close(),e.next=4,c();case 4:t=e.sent,console.log(\"Profile: \",t),a(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case\"end\":return e.stop()}}),e,null,[[0,9]])})))()}),[]),Object(k.jsx)(\"div\",{style:{whiteSpace:\"pre-line\"},children:Object(k.jsx)(\"h1\",{children:n?n.username+\"\\n\"+n.id:\"Loading...\"})})},me=function(){return Object(k.jsx)(o.a,{children:Object(k.jsx)(I,{children:Object(k.jsx)(B,{children:Object(k.jsxs)(i.a,{maxWidth:\"xl\",style:{margin:0,padding:0},children:[Object(k.jsx)(F,{}),Object(k.jsx)(\"main\",{style:{marginTop:64,textAlign:\"center\",width:\"100vw\"},children:Object(k.jsxs)(u.d,{children:[Object(k.jsx)(u.b,{path:\"/\",exact:!0,component:ce}),Object(k.jsx)(u.b,{path:\"/login\",component:le}),Object(k.jsx)(u.b,{path:\"/logout\",component:de}),Object(k.jsx)(u.b,{path:\"/profile\",component:je})]})})]})})})})},pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,172)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(me,{})}),document.getElementById(\"root\")),pe()}},[[121,1,2]]]);","name":"static/js/main.c8552622.chunk.js","map":{"version":3,"sources":["static/js/main.c8552622.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","Container","react_router_dom","react_router","regenerator","regenerator_default","asyncToGenerator","slicedToArray","makeStyles","AppBar","Toolbar","Link","Button","ExitToApp","ExitToApp_default","config","backendUrl","doFetch","_ref","Object","a","mark","_callee","url","options","response","json","_args","arguments","wrap","_context","prev","next","length","undefined","fetch","sent","error","Error","message","ok","abrupt","stop","_x","apply","apiHooks_useUsers","getUsers","_ref2","_callee2","fetchOptions","_context2","method","credentials","t0","getUserAvailable","_ref3","_callee3","username","_context3","alert","_x2","getUsernameById","_ref4","_callee4","id","_context4","_x3","register","_ref5","_callee5","inputs","result","_context5","headers","body","JSON","stringify","console","log","_x4","getIsLoggedIn","_ref6","_callee6","_context6","postLogin","_ref7","_callee7","_context7","_x5","logout","_ref8","_callee8","_context8","getProfile","_ref9","_callee9","_context9","apiHooks_useChats","getThreadIds","_ref10","_callee10","userId","_context10","_x6","getUserIds","_ref11","_callee11","_context11","_x7","getThreadName","_ref12","_callee12","threadId","thread","_context12","name","_x8","postMessage","_ref13","_callee13","messageObject","_context13","success","_x9","getMessages","_ref14","_callee14","_context14","_x10","getAllMessages","_ref15","_callee15","_context15","_x11","getLastMessage","_ref16","_callee16","_context16","_x12","createNewChatThread","_ref17","_callee17","chatThreadObject","_context17","_x13","jsx_runtime","contextDefaultValues","user","setUser","MediaContext","createContext","mediaContext_MediaProvider","children","_useState","_useState2","Provider","value","useStyles","theme","appBar","zIndex","drawer","backgroundColor","root","flexGrow","menuButton","marginRight","spacing","title","paddingRight","toolbar","display","justifyContent","itemPack","alignItems","logo","position","left","transform","nav","classes","logged","setLogged","_useContext","isLoggedIn","className","component","to","color","style","textDecoration","startIcon","websocketContext_contextDefaultValues","websocket","setWebsocket","WebsocketContext","websocketContext_WebsocketProvider","toConsumableArray","Grid","List","Typography","TextField","Send","Send_default","IconButton","ListItem","ListItemText","moment","moment_default","message_useStyles","marginBottom","borderRadius","padding","maxWidth","ownMessage","inline","inlineOwn","timestamp","fontSize","marginLeft","dateIndicator","background","textAlign","components_message","message_id","user_id","contents","setMessageId","usernames","index","messageArray","setUsername","_useState3","_useState4","time","setTime","_useState5","_useState6","setOwnMessage","_useState7","_useState8","showDate","setShowDate","formattedTimestamp","format","i","formattedPreviousTimestamp","d","Date","hours","getHours","toString","minutes","getMinutes","e","width","flexDirection","container","variant","justify","item","primary","secondary","getWindowDimensions","_window","window","innerWidth","height","innerHeight","useWindowDimensions","windowDimensions","setWindowDimensions","handleResize","addEventListener","removeEventListener","components_thread","messages","messageAmount","setMessageAmount","setMessage","messageId","showButton","setShowButton","setUsernames","_useState9","_useState10","moreMessages","setMoreMessages","_useState11","_useState12","loadMore","setLoadMore","_useState13","_useState14","messageScroll","setMessageScroll","_useState15","_useState16","currentThread","setCurrentThread","_useChats","heightCorrected","messagesEndRef","messagesEndRef2","scrollToBottom","number","_messagesEndRef$curre","_messagesEndRef2$curr","current","scrollIntoView","userIds","usernameArray","_user","userObject","handleSubmit","event","tzoffset","localISOTime","webSocketUpdate","preventDefault","getTimezoneOffset","now","toISOString","slice","thread_id","type","send","loadAllMessages","amount","allMessages","splice","direction","overflowX","overflowY","map","ref","onClick","onSubmit","label","onInput","target","marginTop","fill","threadButton_useStyles","text","lastMessage","button","borderBottom","cursor","threadButton","setThreadOpen","setThreadId","threadOpen","updateThreadButtonInfos","setName","setLastMessage","threadName","lastMessageData","formatedTime","_lastMessageObject","close","Select","MenuItem","lib","defineProperty","objectSpread2","formHooks","callback","initState","setInputs","handleInputChange","persist","handleFileChange","files","threadForm","setCreateNewChatThread","setUpdateThreadButtons","usersArray","setUsersArray","_useForm","user2","user2_id","users","arrayForUsers","onChange","validators","errorMessages","home","history","_useContext2","threads","setThreads","setMessages","updateState","setUpdateState","updateThreadButtons","setUpdateThreadButtonInfos","_useState17","_useState18","_useState19","_useState20","wsMessage","setWsMessage","chatThreads","threadMessages","reversedArray","reverse","newMessageObject","concat","readyState","socket","WebSocket","client","data","parse","setTimeout","borderRight","borderTop","loginForm","userdata","localStorage","setItem","password","gutterBottom","fullWidth","registerForm","setToggle","_useUsers","confirm","addValidationRule","available","xs","Card","login","toggle","margin","views_logout","profile","whiteSpace","src_App","path","exact","src_reportWebVitals","onPerfEntry","Function","then","bind","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpmy-app\"] = this[\"webpackJsonpmy-app\"] || []).push([[0],{\n\n/***/ 100:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 121:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(13);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(100);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Container/Container.js\nvar Container = __webpack_require__(169);\n\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(30);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(14);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(5);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(9);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(8);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/styles/makeStyles.js\nvar makeStyles = __webpack_require__(153);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/AppBar/AppBar.js\nvar AppBar = __webpack_require__(156);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Toolbar/Toolbar.js\nvar Toolbar = __webpack_require__(158);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Link/Link.js\nvar Link = __webpack_require__(159);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Button/Button.js\nvar Button = __webpack_require__(160);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/icons/ExitToApp.js\nvar ExitToApp = __webpack_require__(84);\nvar ExitToApp_default = /*#__PURE__*/__webpack_require__.n(ExitToApp);\n\n// CONCATENATED MODULE: ./src/config.ts\nvar env= true?'production':undefined;var envConfig={development:{backendUrl:'http://localhost:3001'},production:{backendUrl:'https://something.com'}};/* harmony default export */ var config = (envConfig[env]);\n// CONCATENATED MODULE: ./src/hooks/apiHooks.tsx\nvar doFetch=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(url){var options,response,json,_args=arguments;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options=_args.length>1&&_args[1]!==undefined?_args[1]:{};_context.next=3;return fetch(config.backendUrl+url,options);case 3:response=_context.sent;_context.next=6;return response.json();case 6:json=_context.sent;if(!json.error){_context.next=11;break;}throw new Error(json.message+': '+json.error);case 11:if(response.ok){_context.next=15;break;}throw new Error('doFetch failed');case 15:return _context.abrupt(\"return\",json);case 16:case\"end\":return _context.stop();}}},_callee);}));return function doFetch(_x){return _ref.apply(this,arguments);};}();var apiHooks_useUsers=function useUsers(){var getUsers=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var fetchOptions;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetchOptions={method:'GET',credentials:'include'};_context2.prev=1;_context2.next=4;return doFetch('/users',fetchOptions);case 4:return _context2.abrupt(\"return\",_context2.sent);case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](1);throw new Error(_context2.t0.message);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[1,7]]);}));return function getUsers(){return _ref2.apply(this,arguments);};}();var getUserAvailable=/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(username){return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return doFetch('/users/username/'+username);case 3:return _context3.abrupt(\"return\",_context3.sent);case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);alert(_context3.t0.message);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function getUserAvailable(_x2){return _ref3.apply(this,arguments);};}();var getUsernameById=/*#__PURE__*/function(){var _ref4=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(id){return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return doFetch('/user/'+id);case 3:return _context4.abrupt(\"return\",_context4.sent);case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](0);alert(_context4.t0.message);case 9:case\"end\":return _context4.stop();}}},_callee4,null,[[0,6]]);}));return function getUsernameById(_x3){return _ref4.apply(this,arguments);};}();var register=/*#__PURE__*/function(){var _ref5=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(inputs){var fetchOptions,result;return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:fetchOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(inputs),credentials:'include'};_context5.prev=1;_context5.next=4;return doFetch('/user',fetchOptions);case 4:result=_context5.sent;console.log('RegisterResult',result.message);return _context5.abrupt(\"return\",result.message);case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](1);alert(_context5.t0.message);case 12:case\"end\":return _context5.stop();}}},_callee5,null,[[1,9]]);}));return function register(_x4){return _ref5.apply(this,arguments);};}();var getIsLoggedIn=/*#__PURE__*/function(){var _ref6=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee6(){var fetchOptions;return regenerator_default.a.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:fetchOptions={method:'GET',credentials:'include'};_context6.prev=1;_context6.next=4;return doFetch('/isloggedin',fetchOptions);case 4:return _context6.abrupt(\"return\",_context6.sent);case 7:_context6.prev=7;_context6.t0=_context6[\"catch\"](1);throw new Error(_context6.t0.message);case 10:case\"end\":return _context6.stop();}}},_callee6,null,[[1,7]]);}));return function getIsLoggedIn(){return _ref6.apply(this,arguments);};}();var postLogin=/*#__PURE__*/function(){var _ref7=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee7(inputs){var fetchOptions,result;return regenerator_default.a.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:fetchOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(inputs),credentials:'include'};_context7.prev=1;_context7.next=4;return doFetch('/login',fetchOptions);case 4:result=_context7.sent;return _context7.abrupt(\"return\",result);case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](1);alert(_context7.t0.message);case 11:case\"end\":return _context7.stop();}}},_callee7,null,[[1,8]]);}));return function postLogin(_x5){return _ref7.apply(this,arguments);};}();var logout=/*#__PURE__*/function(){var _ref8=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee8(){var fetchOptions;return regenerator_default.a.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:fetchOptions={method:'DELETE',credentials:'include'};_context8.prev=1;_context8.next=4;return doFetch('/logout',fetchOptions);case 4:return _context8.abrupt(\"return\",_context8.sent);case 7:_context8.prev=7;_context8.t0=_context8[\"catch\"](1);throw new Error(_context8.t0.message);case 10:case\"end\":return _context8.stop();}}},_callee8,null,[[1,7]]);}));return function logout(){return _ref8.apply(this,arguments);};}();var getProfile=/*#__PURE__*/function(){var _ref9=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee9(){var fetchOptions;return regenerator_default.a.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:fetchOptions={method:'GET',credentials:'include'};_context9.prev=1;_context9.next=4;return doFetch('/profile',fetchOptions);case 4:return _context9.abrupt(\"return\",_context9.sent);case 7:_context9.prev=7;_context9.t0=_context9[\"catch\"](1);throw new Error(_context9.t0.message);case 10:case\"end\":return _context9.stop();}}},_callee9,null,[[1,7]]);}));return function getProfile(){return _ref9.apply(this,arguments);};}();return{getUsers:getUsers,getUserAvailable:getUserAvailable,getUsernameById:getUsernameById,register:register,getIsLoggedIn:getIsLoggedIn,postLogin:postLogin,logout:logout,getProfile:getProfile};};var apiHooks_useChats=function useChats(){var getThreadIds=/*#__PURE__*/function(){var _ref10=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee10(userId){return regenerator_default.a.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.prev=0;_context10.next=3;return doFetch('/threads/'+userId);case 3:return _context10.abrupt(\"return\",_context10.sent);case 6:_context10.prev=6;_context10.t0=_context10[\"catch\"](0);alert(_context10.t0.message);case 9:case\"end\":return _context10.stop();}}},_callee10,null,[[0,6]]);}));return function getThreadIds(_x6){return _ref10.apply(this,arguments);};}();var getUserIds=/*#__PURE__*/function(){var _ref11=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee11(userId){return regenerator_default.a.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.prev=0;_context11.next=3;return doFetch('/threadusers/'+userId);case 3:return _context11.abrupt(\"return\",_context11.sent);case 6:_context11.prev=6;_context11.t0=_context11[\"catch\"](0);alert(_context11.t0.message);case 9:case\"end\":return _context11.stop();}}},_callee11,null,[[0,6]]);}));return function getUserIds(_x7){return _ref11.apply(this,arguments);};}();var getThreadName=/*#__PURE__*/function(){var _ref12=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee12(threadId){var thread;return regenerator_default.a.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.prev=0;_context12.next=3;return doFetch('/thread/'+threadId);case 3:thread=_context12.sent;return _context12.abrupt(\"return\",thread.name);case 7:_context12.prev=7;_context12.t0=_context12[\"catch\"](0);alert(_context12.t0.message);case 10:case\"end\":return _context12.stop();}}},_callee12,null,[[0,7]]);}));return function getThreadName(_x8){return _ref12.apply(this,arguments);};}();var postMessage=/*#__PURE__*/function(){var _ref13=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee13(messageObject){var fetchOptions,result;return regenerator_default.a.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:fetchOptions={method:'POST',headers:{'Content-Type':'application/json'},body:messageObject,credentials:'include'};_context13.prev=1;_context13.next=4;return doFetch('/message',fetchOptions);case 4:result=_context13.sent;return _context13.abrupt(\"return\",result.success);case 8:_context13.prev=8;_context13.t0=_context13[\"catch\"](1);alert(_context13.t0.message);case 11:case\"end\":return _context13.stop();}}},_callee13,null,[[1,8]]);}));return function postMessage(_x9){return _ref13.apply(this,arguments);};}();var getMessages=/*#__PURE__*/function(){var _ref14=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee14(threadId){return regenerator_default.a.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.prev=0;_context14.next=3;return doFetch('/messages/'+threadId);case 3:return _context14.abrupt(\"return\",_context14.sent);case 6:_context14.prev=6;_context14.t0=_context14[\"catch\"](0);alert(_context14.t0.message);case 9:case\"end\":return _context14.stop();}}},_callee14,null,[[0,6]]);}));return function getMessages(_x10){return _ref14.apply(this,arguments);};}();var getAllMessages=/*#__PURE__*/function(){var _ref15=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee15(threadId){return regenerator_default.a.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.prev=0;_context15.next=3;return doFetch('/all_messages/'+threadId);case 3:return _context15.abrupt(\"return\",_context15.sent);case 6:_context15.prev=6;_context15.t0=_context15[\"catch\"](0);alert(_context15.t0.message);case 9:case\"end\":return _context15.stop();}}},_callee15,null,[[0,6]]);}));return function getAllMessages(_x11){return _ref15.apply(this,arguments);};}();var getLastMessage=/*#__PURE__*/function(){var _ref16=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee16(id){return regenerator_default.a.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.prev=0;_context16.next=3;return doFetch('/last_message/'+id);case 3:return _context16.abrupt(\"return\",_context16.sent);case 6:_context16.prev=6;_context16.t0=_context16[\"catch\"](0);alert(_context16.t0.message);case 9:case\"end\":return _context16.stop();}}},_callee16,null,[[0,6]]);}));return function getLastMessage(_x12){return _ref16.apply(this,arguments);};}();var createNewChatThread=/*#__PURE__*/function(){var _ref17=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee17(chatThreadObject){var fetchOptions,result;return regenerator_default.a.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:fetchOptions={method:'POST',headers:{'Content-Type':'application/json'},body:chatThreadObject,credentials:'include'};_context17.prev=1;_context17.next=4;return doFetch('/new_thread',fetchOptions);case 4:result=_context17.sent;return _context17.abrupt(\"return\",result.success);case 8:_context17.prev=8;_context17.t0=_context17[\"catch\"](1);alert(_context17.t0.message);case 11:case\"end\":return _context17.stop();}}},_callee17,null,[[1,8]]);}));return function createNewChatThread(_x13){return _ref17.apply(this,arguments);};}();return{getThreadIds:getThreadIds,getUserIds:getUserIds,getThreadName:getThreadName,postMessage:postMessage,getMessages:getMessages,getAllMessages:getAllMessages,getLastMessage:getLastMessage,createNewChatThread:createNewChatThread};};\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/contexts/mediaContext.tsx\nvar contextDefaultValues={user:0,setUser:function setUser(){}};var MediaContext=/*#__PURE__*/react_default.a.createContext(contextDefaultValues);var mediaContext_MediaProvider=function MediaProvider(_ref){var children=_ref.children;var _useState=Object(react[\"useState\"])(contextDefaultValues.user),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),user=_useState2[0],setUser=_useState2[1];return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MediaContext.Provider,{value:{user:user,setUser:setUser},children:children});};\n// CONCATENATED MODULE: ./src/components/nav.tsx\n/* eslint-disable react-hooks/exhaustive-deps */var useStyles=Object(makeStyles[\"a\" /* default */])(function(theme){return{appBar:{zIndex:theme.zIndex.drawer+1,backgroundColor:'#5F4B8BFF'},root:{flexGrow:1},menuButton:{marginRight:theme.spacing(2)},title:{flexGrow:1,paddingRight:'24px'},toolbar:{display:'flex',justifyContent:'flex-end'},itemPack:{display:'flex',alignItems:'center'},logo:{position:'absolute',display:'flex',alignItems:'center',left:'130px',transform:'translate(-50%)'}};});var nav_Nav=function Nav(){var classes=useStyles();var _useState=Object(react[\"useState\"])(false),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),logged=_useState2[0],setLogged=_useState2[1];var _useContext=Object(react[\"useContext\"])(MediaContext),user=_useContext.user,setUser=_useContext.setUser;var _useUsers=apiHooks_useUsers(),getIsLoggedIn=_useUsers.getIsLoggedIn;Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var isLoggedIn;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;console.log('NAV');_context.next=4;return getIsLoggedIn();case 4:isLoggedIn=_context.sent;if(isLoggedIn.success){setLogged(true);setUser(isLoggedIn.id);}else{setLogged(false);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}))();},[user]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AppBar[\"a\" /* default */],{className:classes.appBar,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Toolbar[\"a\" /* default */],{className:classes.toolbar,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Link[\"a\" /* default */],{component:react_router_dom[\"b\" /* Link */],to:\"/\",className:classes.logo,color:\"inherit\",style:{textDecoration:'none'},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"ChatApp\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:classes.itemPack,children:logged?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{color:\"inherit\",component:react_router_dom[\"b\" /* Link */],to:\"/logout\",children:\"Logout\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{color:\"inherit\",component:react_router_dom[\"b\" /* Link */],to:\"/profile\",children:\"Profile\"})]}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{color:\"inherit\",startIcon:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ExitToApp_default.a,{}),component:react_router_dom[\"b\" /* Link */],to:\"/login\",children:\"Login\"})})]})})});};/* harmony default export */ var nav = (nav_Nav);\n// CONCATENATED MODULE: ./src/contexts/websocketContext.tsx\nvar websocketContext_contextDefaultValues={websocket:undefined,setWebsocket:function setWebsocket(){}};var WebsocketContext=/*#__PURE__*/react_default.a.createContext(websocketContext_contextDefaultValues);var websocketContext_WebsocketProvider=function WebsocketProvider(_ref){var children=_ref.children;var _useState=Object(react[\"useState\"])(),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),websocket=_useState2[0],setWebsocket=_useState2[1];return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WebsocketContext.Provider,{value:{websocket:websocket,setWebsocket:setWebsocket},children:children});};\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(87);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Grid/Grid.js\nvar Grid = __webpack_require__(161);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/List/List.js\nvar List = __webpack_require__(163);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Typography/Typography.js\nvar Typography = __webpack_require__(52);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/TextField/TextField.js + 4 modules\nvar TextField = __webpack_require__(79);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/icons/Send.js\nvar Send = __webpack_require__(85);\nvar Send_default = /*#__PURE__*/__webpack_require__.n(Send);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/IconButton/IconButton.js\nvar IconButton = __webpack_require__(166);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/ListItem/ListItem.js\nvar ListItem = __webpack_require__(123);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/ListItemText/ListItemText.js\nvar ListItemText = __webpack_require__(162);\n\n// EXTERNAL MODULE: ./node_modules/moment/moment.js\nvar moment = __webpack_require__(66);\nvar moment_default = /*#__PURE__*/__webpack_require__.n(moment);\n\n// CONCATENATED MODULE: ./src/components/message.tsx\nvar message_useStyles=Object(makeStyles[\"a\" /* default */])(function(){return{message:{backgroundColor:'lightGrey',marginBottom:'0.5rem',borderRadius:'1rem',padding:'0.5rem',maxWidth:'50%'},ownMessage:{backgroundColor:'#5F4B8BFF',color:'white',marginBottom:'0.5rem',borderRadius:'1rem',padding:'0.5rem',maxWidth:'50%'},inline:{display:'inline'},inlineOwn:{display:'inline',color:'white'},timestamp:{fontSize:'0.7rem',marginLeft:'2rem'},dateIndicator:{background:'rgb(95, 75, 139, .2)',borderRadius:'0.3rem',padding:'0.2rem',marginBottom:'0.5rem',textAlign:'center'}};});var message_Message=function Message(_ref){var message_id=_ref.message_id,user_id=_ref.user_id,contents=_ref.contents,timestamp=_ref.timestamp,setMessageId=_ref.setMessageId,usernames=_ref.usernames,index=_ref.index,messageArray=_ref.messageArray;var classes=message_useStyles();var _useState=Object(react[\"useState\"])(''),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=Object(react[\"useState\"])(''),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),time=_useState4[0],setTime=_useState4[1];var _useState5=Object(react[\"useState\"])(false),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),ownMessage=_useState6[0],setOwnMessage=_useState6[1];var _useState7=Object(react[\"useState\"])(false),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),showDate=_useState8[0],setShowDate=_useState8[1];var _useContext=Object(react[\"useContext\"])(MediaContext),user=_useContext.user;var formattedTimestamp=moment_default()(timestamp).format('DD.MM.YYYY');Object(react[\"useEffect\"])(function(){try{for(var i=0;i<usernames.length;i++){if(usernames[i].user_id===user_id){setUsername(usernames[i].username);}}if(index!==0){var formattedPreviousTimestamp=moment_default()(messageArray[index-1].timestamp).format('DD.MM.YYYY');if(formattedTimestamp!==formattedPreviousTimestamp){setShowDate(true);}}else{setShowDate(true);}var d=new Date(timestamp);var hours=d.getHours().toString();var minutes=d.getMinutes().toString();if(d.getHours()<10){hours='0'+hours;}if(d.getMinutes()<10){minutes='0'+minutes;}var formatedTime=hours+'.'+minutes;setTime(formatedTime);if(user_id===user){setOwnMessage(true);}else{setOwnMessage(false);}setMessageId(message_id);}catch(e){console.log(e.message);}},[message_id]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ListItem[\"a\" /* default */],{style:{width:'100%',display:'flex',flexDirection:'column'},children:[showDate&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,justifyContent:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{className:classes.dateIndicator,component:\"h6\",variant:\"body1\",children:formattedTimestamp})}),ownMessage?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,justify:\"flex-end\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,className:classes.ownMessage,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ListItemText[\"a\" /* default */],{primary:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,justify:\"space-between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"h2\",children:username}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"span\",variant:\"subtitle1\",className:classes.timestamp,children:time})]})}),secondary:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"span\",variant:\"body2\",className:classes.inlineOwn,children:contents})})})})}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,justify:\"flex-start\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,className:classes.message,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ListItemText[\"a\" /* default */],{primary:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,justify:\"space-between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"h2\",children:username}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"span\",variant:\"subtitle1\",className:classes.timestamp,children:time})]})}),secondary:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"span\",variant:\"body2\",className:classes.inline,color:\"textPrimary\",children:contents})})})})})]})});};/* harmony default export */ var components_message = (message_Message);\n// CONCATENATED MODULE: ./src/hooks/windowDimensionsHook.tsx\nvar getWindowDimensions=function getWindowDimensions(){var _window=window,width=_window.innerWidth,height=_window.innerHeight;return{width:width,height:height};};function useWindowDimensions(){var _useState=Object(react[\"useState\"])(getWindowDimensions()),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),windowDimensions=_useState2[0],setWindowDimensions=_useState2[1];Object(react[\"useEffect\"])(function(){function handleResize(){setWindowDimensions(getWindowDimensions());}window.addEventListener('resize',handleResize);return function(){return window.removeEventListener('resize',handleResize);};},[]);return windowDimensions;}\n// CONCATENATED MODULE: ./src/components/thread.tsx\nvar thread_Thread=function Thread(_ref){var messages=_ref.messages,id=_ref.id,websocket=_ref.websocket,messageAmount=_ref.messageAmount,setMessageAmount=_ref.setMessageAmount;var _useState=Object(react[\"useState\"])(''),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=Object(react[\"useState\"])(0),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),messageId=_useState4[0],setMessageId=_useState4[1];var _useState5=Object(react[\"useState\"])(false),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),showButton=_useState6[0],setShowButton=_useState6[1];var _useState7=Object(react[\"useState\"])([]),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),usernames=_useState8[0],setUsernames=_useState8[1];var _useState9=Object(react[\"useState\"])([]),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),moreMessages=_useState10[0],setMoreMessages=_useState10[1];var _useState11=Object(react[\"useState\"])(false),_useState12=Object(slicedToArray[\"a\" /* default */])(_useState11,2),loadMore=_useState12[0],setLoadMore=_useState12[1];var _useState13=Object(react[\"useState\"])(false),_useState14=Object(slicedToArray[\"a\" /* default */])(_useState13,2),messageScroll=_useState14[0],setMessageScroll=_useState14[1];var _useState15=Object(react[\"useState\"])(0),_useState16=Object(slicedToArray[\"a\" /* default */])(_useState15,2),currentThread=_useState16[0],setCurrentThread=_useState16[1];var _useContext=Object(react[\"useContext\"])(MediaContext),user=_useContext.user;var _useChats=apiHooks_useChats(),postMessage=_useChats.postMessage,getUserIds=_useChats.getUserIds,getAllMessages=_useChats.getAllMessages;var _useUsers=apiHooks_useUsers(),getUsernameById=_useUsers.getUsernameById;var _useWindowDimensions=useWindowDimensions(),height=_useWindowDimensions.height;var heightCorrected=height-64;var messagesEndRef=Object(react[\"useRef\"])(null);var messagesEndRef2=Object(react[\"useRef\"])(null);var scrollToBottom=function scrollToBottom(number){if(number===1){var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView();}else{var _messagesEndRef2$curr;(_messagesEndRef2$curr=messagesEndRef2.current)===null||_messagesEndRef2$curr===void 0?void 0:_messagesEndRef2$curr.scrollIntoView();setMessageScroll(true);}};Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:try{if(loadMore&&!messageScroll){scrollToBottom(2);}else{scrollToBottom(1);}}catch(e){console.log(e.message);}case 1:case\"end\":return _context.stop();}}},_callee);}))();},[messageId]);Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:try{if(currentThread!==id){setLoadMore(false);setMessageScroll(false);setMessageAmount(50);}setCurrentThread(id);console.log('messageUpdate');if(messages.length>=50&&!loadMore){setShowButton(true);}else{setShowButton(false);}}catch(e){console.log(e.message);}case 1:case\"end\":return _context2.stop();}}},_callee2);}))();},[messages]);Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(){var userIds,usernameArray,i,_user,userObject;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;setUsernames([]);console.log('USERNAMELIST');_context3.next=5;return getUserIds(id);case 5:userIds=_context3.sent;usernameArray=[];i=0;case 8:if(!(i<userIds.length)){_context3.next=17;break;}_context3.next=11;return getUsernameById(userIds[i].user_id);case 11:_user=_context3.sent;userObject={user_id:userIds[i].user_id,username:_user.username};usernameArray.push(userObject);case 14:i++;_context3.next=8;break;case 17:setUsernames(usernameArray);_context3.next=23;break;case 20:_context3.prev=20;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0.message);case 23:case\"end\":return _context3.stop();}}},_callee3,null,[[0,20]]);}))();},[id]);var handleSubmit=/*#__PURE__*/function(){var _ref5=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(event){var tzoffset,localISOTime,messageObject,success,webSocketUpdate;return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:event.preventDefault();tzoffset=new Date().getTimezoneOffset()*60000;localISOTime=new Date(Date.now()-tzoffset).toISOString().slice(0,-1);console.log('TIMEST: ',localISOTime);messageObject=JSON.stringify({contents:message,timestamp:localISOTime,user_id:user,thread_id:id});_context4.next=7;return postMessage(messageObject);case 7:success=_context4.sent;console.log('SUCCESS: ',success);webSocketUpdate={type:'message',contents:message,timestamp:localISOTime,user_id:user,thread_id:id};if(websocket!==undefined){websocket.send(JSON.stringify(webSocketUpdate));}setMessage('');case 12:case\"end\":return _context4.stop();}}},_callee4);}));return function handleSubmit(_x){return _ref5.apply(this,arguments);};}();var loadAllMessages=/*#__PURE__*/function(){var _ref6=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(){var amount,allMessages;return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(currentThread!==id){setMessageAmount(50);amount=50;}else{amount=messageAmount;}_context5.next=3;return getAllMessages(id);case 3:allMessages=_context5.sent;console.log('MESSAGE AMOUNT',messageAmount,allMessages);allMessages.splice(allMessages.length-amount,amount);setMoreMessages(allMessages);setLoadMore(true);setShowButton(false);case 9:case\"end\":return _context5.stop();}}},_callee5);}));return function loadAllMessages(){return _ref6.apply(this,arguments);};}();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,justify:\"center\",direction:\"column\",style:{height:heightCorrected},children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{item:true,justify:\"center\",style:{padding:'2rem 6rem 1.5rem 6rem',backgroundColor:'#E69A8DFF',height:'90%',overflowX:'hidden',overflowY:'auto'},children:[loadMore&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(List[\"a\" /* default */],{children:[moreMessages.map(function(item,index){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_message,{message_id:item.id,user_id:item.user_id,contents:item.contents,timestamp:item.timestamp,setMessageId:setMessageId,usernames:usernames,index:index,messageArray:moreMessages});}),' ',/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{ref:messagesEndRef2})]}),showButton&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{onClick:loadAllMessages,children:\"Load all messages\"}),usernames.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(List[\"a\" /* default */],{children:[messages.map(function(item,index){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_message,{message_id:item.id,user_id:item.user_id,contents:item.contents,timestamp:item.timestamp,setMessageId:setMessageId,usernames:usernames,index:index,messageArray:messages});}),' ',/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{ref:messagesEndRef})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,container:true,justify:\"center\",direction:\"column\",style:{height:'10%',backgroundColor:'lightgray'},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField[\"a\" /* default */],{value:message,variant:\"outlined\",label:\"Say something!\",onInput:function onInput(event){return setMessage(event.target.value);},style:{width:'70%',backgroundColor:'white',borderRadius:'0.5rem'}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(IconButton[\"a\" /* default */],{type:\"submit\",color:\"default\",style:{marginTop:'0.15rem'},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Send_default.a,{style:{fill:'#5F4B8BFF'}})})]})})})]})});};/* harmony default export */ var components_thread = (thread_Thread);\n// CONCATENATED MODULE: ./src/components/threadButton.tsx\n/* eslint-disable react-hooks/exhaustive-deps */var threadButton_useStyles=Object(makeStyles[\"a\" /* default */])(function(){return{text:{color:'white',width:'100%',padding:'1rem'},inline:{display:'inline'},lastMessage:{display:'inline',fontSize:'0.7rem'},timestamp:{fontSize:'0.5rem',marginLeft:'2rem'},button:{width:'100%',maxWidth:'30vw',padding:'0 0.7rem',borderBottom:'1px solid #5F4B8BFF',cursor:'pointer','&:hover':{background:\"#f0f0f0\"}}};});var threadButton_ThreadButton=function ThreadButton(_ref){var id=_ref.id,setThreadOpen=_ref.setThreadOpen,setThreadId=_ref.setThreadId,threadOpen=_ref.threadOpen,threadId=_ref.threadId,updateThreadButtonInfos=_ref.updateThreadButtonInfos;var _useChats=apiHooks_useChats(),getThreadName=_useChats.getThreadName,getLastMessage=_useChats.getLastMessage;var _useUsers=apiHooks_useUsers(),getUsernameById=_useUsers.getUsernameById;var _useState=Object(react[\"useState\"])(''),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=Object(react[\"useState\"])({username:'',contents:'',timestamp:''}),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),lastMessage=_useState4[0],setLastMessage=_useState4[1];var _useContext=Object(react[\"useContext\"])(WebsocketContext),websocket=_useContext.websocket;var classes=threadButton_useStyles();Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var threadName,lastMessageData,username,d,hours,minutes,formatedTime,_lastMessageObject,noLastMessageObject;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getThreadName(id);case 3:threadName=_context.sent;setName(threadName);_context.next=7;return getLastMessage(id);case 7:lastMessageData=_context.sent;if(!(lastMessageData.length!==0)){_context.next=22;break;}_context.next=11;return getUsernameById(lastMessageData[0].user_id);case 11:username=_context.sent;d=new Date(lastMessageData[0].timestamp);hours=d.getHours().toString();minutes=d.getMinutes().toString();if(d.getHours()<10){hours='0'+hours;}if(d.getMinutes()<10){minutes='0'+minutes;}formatedTime=hours+'.'+minutes;_lastMessageObject={username:username.username+':',contents:lastMessageData[0].contents,timestamp:formatedTime};setLastMessage(_lastMessageObject);_context.next=24;break;case 22:noLastMessageObject={username:'No messages yet.',contents:'',timestamp:''};setLastMessage(noLastMessageObject);case 24:_context.next=29;break;case 26:_context.prev=26;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 29:case\"end\":return _context.stop();}}},_callee,null,[[0,26]]);}))();},[updateThreadButtonInfos]);var openThread=function openThread(){if(!threadOpen){setThreadOpen(true);setThreadId(id);}else{if(threadId===id){setThreadOpen(false);setThreadId(0);}else{setThreadId(id);}if(websocket!==undefined){websocket.close();}}};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ListItem[\"a\" /* default */],{onClick:openThread,className:classes.button,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ListItemText[\"a\" /* default */],{primary:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,justify:\"space-between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"h1\",children:name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"span\",variant:\"subtitle1\",className:classes.timestamp,children:lastMessage.timestamp})]})}),secondary:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Typography[\"a\" /* default */],{component:\"span\",variant:\"body2\",className:classes.lastMessage,children:[lastMessage.username,\" \",lastMessage.contents]})})})})});};/* harmony default export */ var threadButton = (threadButton_ThreadButton);\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Select/Select.js + 18 modules\nvar Select = __webpack_require__(170);\n\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/MenuItem/MenuItem.js\nvar MenuItem = __webpack_require__(167);\n\n// EXTERNAL MODULE: ./node_modules/react-material-ui-form-validator/lib/index.js\nvar lib = __webpack_require__(27);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(50);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(51);\n\n// CONCATENATED MODULE: ./src/hooks/formHooks.tsx\nvar formHooks_useForm=function useForm(callback,initState){var _useState=Object(react[\"useState\"])(initState),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),inputs=_useState2[0],setInputs=_useState2[1];var handleSubmit=function handleSubmit(event){if(event){event.preventDefault();}callback();};var handleInputChange=function handleInputChange(event){event.persist();setInputs(function(inputs){return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},inputs),{},Object(defineProperty[\"a\" /* default */])({},event.target.name,event.target.value));});};var handleFileChange=function handleFileChange(event){event.persist();setInputs(function(inputs){return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},inputs),{},Object(defineProperty[\"a\" /* default */])({},event.target.name,event.target.files[0]));});};return{inputs:inputs,handleSubmit:handleSubmit,handleInputChange:handleInputChange,handleFileChange:handleFileChange,setInputs:setInputs};};/* harmony default export */ var formHooks = (formHooks_useForm);\n// CONCATENATED MODULE: ./src/components/threadForm.tsx\nvar threadForm_ThreadForm=function ThreadForm(_ref){var setCreateNewChatThread=_ref.setCreateNewChatThread,setUpdateThreadButtons=_ref.setUpdateThreadButtons;var _useContext=Object(react[\"useContext\"])(MediaContext),user=_useContext.user;var _useChats=apiHooks_useChats(),createNewChatThread=_useChats.createNewChatThread;var _useUsers=apiHooks_useUsers(),getUsers=_useUsers.getUsers;var _useState=Object(react[\"useState\"])([]),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),usersArray=_useState2[0],setUsersArray=_useState2[1];var validators={threadName:['required','minStringLength: 3']};var errorMessages={threadName:['Required field','Minimum of 3 characters']};var createNewThread=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var chatThreadObject,success;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!(inputs.user2!=='')){_context.next=11;break;}chatThreadObject=JSON.stringify({name:inputs.threadName,user_id:user,user2_id:inputs.user2});_context.next=5;return createNewChatThread(chatThreadObject);case 5:success=_context.sent;console.log('SUCCESS: ',success);setCreateNewChatThread(false);setUpdateThreadButtons(Date.now());_context.next=12;break;case 11:alert('Choose a user with whom you want to chat!');case 12:_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function createNewThread(){return _ref2.apply(this,arguments);};}();var _useForm=formHooks(createNewThread,{threadName:'',user2:''}),inputs=_useForm.inputs,handleInputChange=_useForm.handleInputChange,handleSubmit=_useForm.handleSubmit;Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var users,arrayForUsers,i;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return getUsers();case 3:users=_context2.sent;arrayForUsers=[];for(i=0;i<users.length;i++){if(users[i].id!==user){arrayForUsers.push(users[i]);}}setUsersArray(arrayForUsers);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0.message);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}))();},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,justifyContent:\"center\",direction:\"column\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{variant:\"h3\",children:\"Create a new chat thread\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(lib[\"ValidatorForm\"],{onSubmit:handleSubmit,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,justifyContent:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(lib[\"TextValidator\"],{type:\"text\",name:\"threadName\",label:\"Thread name\",onChange:handleInputChange,value:inputs.threadName,validators:validators.threadName,errorMessages:errorMessages.threadName})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,justifyContent:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Select[\"a\" /* default */],{name:\"user2\",value:inputs.user2,label:\"User\",onChange:handleInputChange,children:[usersArray.map(function(item){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MenuItem[\"a\" /* default */],{value:item.id,children:item.username});}),' ']})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,justifyContent:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{style:{marginTop:'2rem',marginBottom:'0.5rem'},color:\"primary\",type:\"submit\",variant:\"contained\",children:\"Create\"})})]})]})});};/* harmony default export */ var threadForm = (threadForm_ThreadForm);\n// CONCATENATED MODULE: ./src/views/home.tsx\n/* eslint-disable react-hooks/exhaustive-deps */var home_Home=function Home(_ref){var history=_ref.history;var _useContext=Object(react[\"useContext\"])(MediaContext),user=_useContext.user,setUser=_useContext.setUser;var _useContext2=Object(react[\"useContext\"])(WebsocketContext),websocket=_useContext2.websocket,setWebsocket=_useContext2.setWebsocket;var _useUsers=apiHooks_useUsers(),getIsLoggedIn=_useUsers.getIsLoggedIn;var _useChats=apiHooks_useChats(),getThreadIds=_useChats.getThreadIds,getMessages=_useChats.getMessages;var _useWindowDimensions=useWindowDimensions(),height=_useWindowDimensions.height;var heightCorrected=height-64;var _useState=Object(react[\"useState\"])([]),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),threads=_useState2[0],setThreads=_useState2[1];var _useState3=Object(react[\"useState\"])(false),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),threadOpen=_useState4[0],setThreadOpen=_useState4[1];var _useState5=Object(react[\"useState\"])(0),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),threadId=_useState6[0],setThreadId=_useState6[1];var _useState7=Object(react[\"useState\"])([]),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),messages=_useState8[0],setMessages=_useState8[1];var _useState9=Object(react[\"useState\"])(Date.now()),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),updateState=_useState10[0],setUpdateState=_useState10[1];var _useState11=Object(react[\"useState\"])(Date.now()),_useState12=Object(slicedToArray[\"a\" /* default */])(_useState11,2),updateThreadButtons=_useState12[0],setUpdateThreadButtons=_useState12[1];var _useState13=Object(react[\"useState\"])(Date.now()),_useState14=Object(slicedToArray[\"a\" /* default */])(_useState13,2),updateThreadButtonInfos=_useState14[0],setUpdateThreadButtonInfos=_useState14[1];var _useState15=Object(react[\"useState\"])(false),_useState16=Object(slicedToArray[\"a\" /* default */])(_useState15,2),createNewChatThread=_useState16[0],setCreateNewChatThread=_useState16[1];var _useState17=Object(react[\"useState\"])(50),_useState18=Object(slicedToArray[\"a\" /* default */])(_useState17,2),messageAmount=_useState18[0],setMessageAmount=_useState18[1];var _useState19=Object(react[\"useState\"])({type:'',contents:'',timestamp:new Date(),user_id:0,thread_id:0}),_useState20=Object(slicedToArray[\"a\" /* default */])(_useState19,2),wsMessage=_useState20[0],setWsMessage=_useState20[1];Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var isLoggedIn,chatThreads;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;console.log('USER: ',user);_context.next=4;return getIsLoggedIn();case 4:isLoggedIn=_context.sent;if(!isLoggedIn.success){history.push('/login');}setUser(isLoggedIn.id);console.log('Logged user: ',user,isLoggedIn.id);if(!(user!==0)){_context.next=13;break;}_context.next=11;return getThreadIds(isLoggedIn.id);case 11:chatThreads=_context.sent;setThreads(chatThreads);case 13:_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}))();},[user,updateThreadButtons]);Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var threadMessages,reversedArray;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(!(threadId!==0)){_context2.next=7;break;}_context2.next=4;return getMessages(threadId);case 4:threadMessages=_context2.sent;reversedArray=threadMessages.reverse();setMessages(reversedArray);case 7:_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0.message);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}))();},[threadId,updateState]);Object(react[\"useEffect\"])(function(){try{if(wsMessage.type!==''&&wsMessage.thread_id===threadId){var newMessageObject={id:Date.now(),user_id:wsMessage.user_id,contents:wsMessage.contents,timestamp:wsMessage.timestamp};setMessages(function(messages){return[].concat(Object(toConsumableArray[\"a\" /* default */])(messages),[newMessageObject]);});setMessageAmount(messageAmount+1);}}catch(e){console.log(e.message);}},[wsMessage]);Object(react[\"useEffect\"])(function(){try{if(threads.length!==0){if(websocket===undefined||websocket.readyState===2||websocket.readyState===3){console.log('READYSTATE ',websocket===null||websocket===void 0?void 0:websocket.readyState);var socket=new WebSocket('ws://localhost:3001');socket.addEventListener('open',function(event){console.log('Server is opened.');var client={type:'client',user_id:user,threads:threads};socket.send(JSON.stringify(client));});socket.addEventListener('message',function(event){if(event.data!=='ping'){console.log('Message from server ',JSON.parse(event.data).thread_id);var message=JSON.parse(event.data);if(message.type==='message'){setWsMessage(message);setUpdateThreadButtonInfos(Date.now());}else{setTimeout(function(){return socket.send('pong');},1000);}}});socket.addEventListener('close',function(event){console.log('Websocket connection closed.');setUpdateState(Date.now());});setWebsocket(socket);console.log('NEW SOCKET');}}}catch(e){console.log(e.message);};},[updateState,threads]);var setCreateNewChatThreadOpen=function setCreateNewChatThreadOpen(){setCreateNewChatThread(true);};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:createNewChatThread?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(threadForm,{setCreateNewChatThread:setCreateNewChatThread,setUpdateThreadButtons:setUpdateThreadButtons}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,direction:\"row\",style:{height:heightCorrected},children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{item:true,style:{width:'30%',borderRight:'1px solid #5F4B8BFF'},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{onClick:setCreateNewChatThreadOpen,color:\"primary\",variant:\"contained\",style:{marginTop:'1rem',marginBottom:'1rem'},children:\"Create a new chat thread\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,style:{borderTop:'1px solid #5F4B8BFF',marginTop:'1rem'},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(List[\"a\" /* default */],{style:{padding:0,width:'100%'},children:[threads.map(function(item){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(threadButton,{id:item.thread_id,setThreadOpen:setThreadOpen,setThreadId:setThreadId,threadOpen:threadOpen,threadId:threadId,updateThreadButtonInfos:updateThreadButtonInfos});}),' ']})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,style:{width:'70%'},children:threadOpen?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_thread,{messages:messages,id:threadId,websocket:websocket,messageAmount:messageAmount,setMessageAmount:setMessageAmount}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,alignItems:\"center\",justify:\"center\",direction:\"column\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"h1\",variant:\"h2\",children:\"Welcome\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"div\",variant:\"body1\",children:\"This is Chat App made by Tommi.\"})]})})]})})});};/* harmony default export */ var home = (home_Home);\n// CONCATENATED MODULE: ./src/components/loginForm.tsx\nvar loginForm_LoginForm=function LoginForm(_ref){var history=_ref.history;var _useUsers=apiHooks_useUsers(),postLogin=_useUsers.postLogin;var doLogin=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var userdata;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return postLogin(inputs);case 3:userdata=_context.sent;localStorage.setItem('id',userdata.id);history.push('/');_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log('doLogin',_context.t0.message);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function doLogin(){return _ref2.apply(this,arguments);};}();var _useForm=formHooks(doLogin,{username:'',password:''}),inputs=_useForm.inputs,handleInputChange=_useForm.handleInputChange,handleSubmit=_useForm.handleSubmit;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"h1\",variant:\"h2\",gutterBottom:true,children:\"Login\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,direction:\"column\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField[\"a\" /* default */],{type:\"text\",name:\"username\",label:\"Username\",onChange:handleInputChange,value:inputs.username})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TextField[\"a\" /* default */],{type:\"password\",name:\"password\",label:\"Password\",onChange:handleInputChange,value:inputs.password})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{fullWidth:true,style:{marginTop:'2rem',marginBottom:'0.5rem'},color:\"primary\",type:\"submit\",variant:\"contained\",children:\"Login\"})})]})})})]});};/* harmony default export */ var loginForm = (Object(react_router[\"g\" /* withRouter */])(loginForm_LoginForm));\n// CONCATENATED MODULE: ./src/components/registerForm.tsx\n/* eslint-disable react-hooks/exhaustive-deps */var registerForm_RegisterForm=function RegisterForm(_ref){var setToggle=_ref.setToggle;var _useUsers=apiHooks_useUsers(),register=_useUsers.register,getUserAvailable=_useUsers.getUserAvailable;var validators={username:['required','minStringLength: 3','isAvailable'],password:['required','minStringLength:5'],confirm:['required','isPasswordMatch']};var errorMessages={username:['Required field','Minimum of 3 characters','Username is not available'],password:['Required field','Minimum of 5 characters'],confirm:['Required field','Passwords do not match']};var doRegister=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var available,result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getUserAvailable(inputs.username);case 3:available=_context.sent;if(!available){_context.next=10;break;}delete inputs.confirm;_context.next=8;return register(inputs);case 8:result=_context.sent;if(result.length>0){alert(result);setToggle(true);}case 10:_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function doRegister(){return _ref2.apply(this,arguments);};}();var _useForm=formHooks(doRegister,{username:'',password:'',confirm:''}),inputs=_useForm.inputs,handleInputChange=_useForm.handleInputChange,handleSubmit=_useForm.handleSubmit;Object(react[\"useEffect\"])(function(){lib[\"ValidatorForm\"].addValidationRule('isAvailable',/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(value){var available;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(value.length>2)){_context2.next=12;break;}_context2.prev=1;_context2.next=4;return getUserAvailable(value);case 4:available=_context2.sent;return _context2.abrupt(\"return\",available);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0.message);return _context2.abrupt(\"return\",true);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x){return _ref3.apply(this,arguments);};}());lib[\"ValidatorForm\"].addValidationRule('isPasswordMatch',function(value){return value===inputs.password;});},[inputs]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,alignItems:\"center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,spacing:0,direction:\"column\",alignItems:\"center\",justify:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Typography[\"a\" /* default */],{component:\"h1\",variant:\"h2\",gutterBottom:true,children:\"Register\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{item:true,xs:12,container:true,direction:\"column\",alignItems:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(lib[\"ValidatorForm\"],{onSubmit:handleSubmit,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid[\"a\" /* default */],{container:true,direction:\"column\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(lib[\"TextValidator\"],{fullWidth:true,type:\"text\",name:\"username\",label:\"Username\",onChange:handleInputChange,value:inputs.username,validators:validators.username,errorMessages:errorMessages.username})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(lib[\"TextValidator\"],{fullWidth:true,type:\"password\",name:\"password\",label:\"Password\",onChange:handleInputChange,value:inputs.password,validators:validators.password,errorMessages:errorMessages.password})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(lib[\"TextValidator\"],{fullWidth:true,type:\"password\",name:\"confirm\",label:\"Confirm password\",onChange:handleInputChange,value:inputs.confirm,validators:validators.confirm,errorMessages:errorMessages.confirm})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,item:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{style:{marginTop:'2rem',marginBottom:'0.5rem'},fullWidth:true,color:\"primary\",type:\"submit\",variant:\"contained\",children:\"Register\"})})]})})})]});};/* harmony default export */ var registerForm = (registerForm_RegisterForm);\n// EXTERNAL MODULE: ./node_modules/@material-ui/core/esm/Card/Card.js\nvar Card = __webpack_require__(168);\n\n// CONCATENATED MODULE: ./src/views/login.tsx\nvar login_Login=function Login(){var _useState=Object(react[\"useState\"])(true),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),toggle=_useState2[0],setToggle=_useState2[1];var showHide=function showHide(){setToggle(!toggle);};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,justify:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Card[\"a\" /* default */],{style:{margin:'5rem 2rem 3rem 2rem',padding:'3rem',maxWidth:'18rem'},children:[toggle?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(loginForm,{}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(registerForm,{setToggle:setToggle}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid[\"a\" /* default */],{container:true,justify:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */],{onClick:showHide,children:toggle?'or register':'or login'})})]})})});};/* harmony default export */ var login = (login_Login);\n// CONCATENATED MODULE: ./src/views/logout.tsx\nvar logout_Logout=function Logout(_ref){var history=_ref.history;var _useUsers=apiHooks_useUsers(),logout=_useUsers.logout;var _useContext=Object(react[\"useContext\"])(MediaContext),user=_useContext.user,setUser=_useContext.setUser;var _useContext2=Object(react[\"useContext\"])(WebsocketContext),websocket=_useContext2.websocket;Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var isLoggedIn;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;console.log('USER:',user);_context.next=4;return logout();case 4:isLoggedIn=_context.sent;setUser(0);if(websocket!==undefined){websocket.close();}console.log('Logout success: ',isLoggedIn.success,user);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}))();});return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Redirect */],{to:'/login'})});};/* harmony default export */ var views_logout = (logout_Logout);\n// CONCATENATED MODULE: ./src/views/profile.tsx\n/* eslint-disable react-hooks/exhaustive-deps */var profile_Profile=function Profile(){var _useState=Object(react[\"useState\"])({id:'',username:''}),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useContext=Object(react[\"useContext\"])(WebsocketContext),websocket=_useContext.websocket;var _useUsers=apiHooks_useUsers(),getProfile=_useUsers.getProfile;Object(react[\"useEffect\"])(function(){Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(websocket!==undefined){websocket.close();}_context.next=4;return getProfile();case 4:result=_context.sent;console.log('Profile: ',result);setUser(result);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}))();},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{whiteSpace:'pre-line'},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:!user?\"Loading...\":user.username+'\\n'+user.id})});};/* harmony default export */ var profile = (profile_Profile);\n// CONCATENATED MODULE: ./src/App.tsx\nvar App_App=function App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(mediaContext_MediaProvider,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(websocketContext_WebsocketProvider,{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Container[\"a\" /* default */],{maxWidth:\"xl\",style:{margin:0,padding:0},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(nav,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"main\",{style:{marginTop:64,textAlign:'center',width:'100vw'},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router[\"d\" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/\",exact:true,component:home}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/login\",component:login}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/logout\",component:views_logout}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/profile\",component:profile})]})})]})})})});};/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/reportWebVitals.ts\nvar reportWebVitals=function reportWebVitals(onPerfEntry){if(onPerfEntry&&onPerfEntry instanceof Function){__webpack_require__.e(/* import() */ 3).then(__webpack_require__.bind(null, 172)).then(function(_ref){var getCLS=_ref.getCLS,getFID=_ref.getFID,getFCP=_ref.getFCP,getLCP=_ref.getLCP,getTTFB=_ref.getTTFB;getCLS(onPerfEntry);getFID(onPerfEntry);getFCP(onPerfEntry);getLCP(onPerfEntry);getTTFB(onPerfEntry);});}};/* harmony default export */ var src_reportWebVitals = (reportWebVitals);\n// CONCATENATED MODULE: ./src/index.tsx\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById('root'));// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nsrc_reportWebVitals();\n\n/***/ })\n\n},[[121,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/tommivainio/Projektit/chatApp/my-app/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/tommivainio/Projektit/chatApp/my-app/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/tommivainio/Projektit/chatApp/my-app/node_modules/postcss-loader/src/index.js??postcss!/Users/tommivainio/Projektit/chatApp/my-app/src/index.css","/Users/tommivainio/Projektit/chatApp/my-app/src/config.ts","/Users/tommivainio/Projektit/chatApp/my-app/src/hooks/apiHooks.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/contexts/mediaContext.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/components/nav.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/contexts/websocketContext.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/components/message.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/hooks/windowDimensionsHook.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/components/thread.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/components/threadButton.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/hooks/formHooks.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/components/threadForm.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/views/home.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/components/loginForm.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/components/registerForm.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/views/login.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/views/logout.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/views/profile.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/App.tsx","/Users/tommivainio/Projektit/chatApp/my-app/src/reportWebVitals.ts","/Users/tommivainio/Projektit/chatApp/my-app/src/index.tsx"],"names":["env","process","envConfig","development","backendUrl","production","doFetch","url","options","fetch","config","response","json","error","Error","message","ok","useUsers","getUsers","fetchOptions","method","credentials","getUserAvailable","username","alert","getUsernameById","id","register","inputs","headers","body","JSON","stringify","result","console","log","getIsLoggedIn","postLogin","logout","getProfile","useChats","getThreadIds","userId","getUserIds","getThreadName","threadId","thread","name","postMessage","messageObject","success","getMessages","getAllMessages","getLastMessage","createNewChatThread","chatThreadObject","contextDefaultValues","user","setUser","MediaContext","React","createContext","MediaProvider","children","useState","useStyles","makeStyles","theme","appBar","zIndex","drawer","backgroundColor","root","flexGrow","menuButton","marginRight","spacing","title","paddingRight","toolbar","display","justifyContent","itemPack","alignItems","logo","position","left","transform","Nav","classes","logged","setLogged","useContext","useEffect","isLoggedIn","RouterLink","textDecoration","websocket","undefined","setWebsocket","WebsocketContext","WebsocketProvider","marginBottom","borderRadius","padding","maxWidth","ownMessage","color","inline","inlineOwn","timestamp","fontSize","marginLeft","dateIndicator","background","textAlign","Message","message_id","user_id","contents","setMessageId","usernames","index","messageArray","setUsername","time","setTime","setOwnMessage","showDate","setShowDate","formattedTimestamp","moment","format","i","length","formattedPreviousTimestamp","d","Date","hours","getHours","toString","minutes","getMinutes","formatedTime","e","width","flexDirection","getWindowDimensions","window","innerWidth","height","innerHeight","useWindowDimensions","windowDimensions","setWindowDimensions","handleResize","addEventListener","removeEventListener","Thread","messages","messageAmount","setMessageAmount","setMessage","messageId","showButton","setShowButton","setUsernames","moreMessages","setMoreMessages","loadMore","setLoadMore","messageScroll","setMessageScroll","currentThread","setCurrentThread","heightCorrected","messagesEndRef","useRef","messagesEndRef2","scrollToBottom","number","current","scrollIntoView","userIds","usernameArray","userObject","push","handleSubmit","event","preventDefault","tzoffset","getTimezoneOffset","localISOTime","now","toISOString","slice","thread_id","webSocketUpdate","type","send","loadAllMessages","amount","allMessages","splice","overflowX","overflowY","map","item","target","value","marginTop","fill","text","lastMessage","button","borderBottom","cursor","ThreadButton","setThreadOpen","setThreadId","threadOpen","updateThreadButtonInfos","setName","setLastMessage","threadName","lastMessageData","lastMessageObject","noLastMessageObject","openThread","close","useForm","callback","initState","setInputs","handleInputChange","persist","handleFileChange","files","ThreadForm","setCreateNewChatThread","setUpdateThreadButtons","usersArray","setUsersArray","validators","errorMessages","createNewThread","user2","user2_id","users","arrayForUsers","Home","history","threads","setThreads","setMessages","updateState","setUpdateState","updateThreadButtons","setUpdateThreadButtonInfos","wsMessage","setWsMessage","chatThreads","threadMessages","reversedArray","reverse","newMessageObject","readyState","socket","WebSocket","client","data","parse","setTimeout","setCreateNewChatThreadOpen","borderRight","borderTop","LoginForm","doLogin","userdata","localStorage","setItem","password","withRouter","RegisterForm","setToggle","confirm","doRegister","available","ValidatorForm","addValidationRule","Login","toggle","showHide","margin","Logout","Profile","whiteSpace","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","const env = process.env.NODE_ENV === 'production' ? 'production' : 'development'\r\n\r\nconst envConfig = {\r\n    development: {\r\n        backendUrl: 'http://localhost:3001'\r\n    },\r\n    production: {\r\n        backendUrl: 'https://something.com'\r\n    }\r\n}\r\n\r\nexport default envConfig[env]","import config from '../config'\r\n\r\nconst doFetch = async (url: string, options = {}) => {\r\n    const response = await fetch(config.backendUrl + url, options);\r\n    const json = await response.json();\r\n    if (json.error) {\r\n        // if API response contains error message (use Postman to get further details)\r\n        throw new Error(json.message + ': ' + json.error);\r\n    } else if (!response.ok) {\r\n        // if API response does not contain error message, but there is some other error\r\n        throw new Error('doFetch failed');\r\n    } else {\r\n        // if all goes well\r\n        return json;\r\n    }\r\n};\r\n\r\nconst useUsers = () => {\r\n\r\n    const getUsers = async () => {\r\n        const fetchOptions = {\r\n            method: 'GET',\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            return await doFetch('/users', fetchOptions);\r\n        } catch (e) {\r\n            throw new Error(e.message);\r\n        }\r\n    };\r\n\r\n    const getUserAvailable = async (username: String) => {\r\n        try {\r\n            return await doFetch('/users/username/' + username);\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const getUsernameById = async (id: number) => {\r\n        try {\r\n            return await doFetch('/user/' + id);\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const register = async (inputs: Object) => {\r\n        const fetchOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(inputs),\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            const result = await doFetch('/user', fetchOptions);\r\n            console.log('RegisterResult', result.message)\r\n            return result.message\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const getIsLoggedIn = async () => {\r\n        const fetchOptions = {\r\n            method: 'GET',\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            return await doFetch('/isloggedin', fetchOptions);\r\n        } catch (e) {\r\n            throw new Error(e.message);\r\n        }\r\n    };\r\n\r\n    const postLogin = async (inputs: Object) => {\r\n        const fetchOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(inputs),\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            const result = await doFetch('/login', fetchOptions);\r\n            return result\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const logout = async () => {\r\n        const fetchOptions = {\r\n            method: 'DELETE',\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            return await doFetch('/logout', fetchOptions);\r\n        } catch (e) {\r\n            throw new Error(e.message);\r\n        }\r\n    }\r\n\r\n    const getProfile = async () => {\r\n        const fetchOptions = {\r\n            method: 'GET',\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            return await doFetch('/profile', fetchOptions);\r\n        } catch (e) {\r\n            throw new Error(e.message);\r\n        }\r\n    };\r\n\r\n    return { getUsers, getUserAvailable, getUsernameById, register, getIsLoggedIn, postLogin, logout, getProfile };\r\n};\r\n\r\nconst useChats = () => {\r\n\r\n    const getThreadIds = async (userId: number) => {\r\n        try {\r\n            return await doFetch('/threads/' + userId);\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const getUserIds = async (userId: number) => {\r\n        try {\r\n            return await doFetch('/threadusers/' + userId);\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const getThreadName = async (threadId: number) => {\r\n        try {\r\n            const thread = await doFetch('/thread/' + threadId);\r\n            return thread.name;\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const postMessage = async (messageObject: Object) => {\r\n        const fetchOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: messageObject,\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            const result = await doFetch('/message', fetchOptions);\r\n            return result.success\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const getMessages = async (threadId: number) => {\r\n        try {\r\n            return await doFetch('/messages/' + threadId);\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const getAllMessages = async (threadId: number) => {\r\n        try {\r\n            return await doFetch('/all_messages/' + threadId);\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const getLastMessage = async (id: number) => {\r\n        try {\r\n            return await doFetch('/last_message/' + id);\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    const createNewChatThread = async (chatThreadObject: Object) => {\r\n        const fetchOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: chatThreadObject,\r\n            credentials: 'include',\r\n        };\r\n        try {\r\n            const result = await doFetch('/new_thread', fetchOptions);\r\n            return result.success\r\n        } catch (e) {\r\n            alert(e.message);\r\n        }\r\n    };\r\n\r\n    return { getThreadIds, getUserIds, getThreadName, postMessage, getMessages, getAllMessages, getLastMessage, createNewChatThread }\r\n}\r\n\r\nexport { useUsers, useChats };","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\ninterface propType {\r\n    children: any\r\n}\r\n\r\ntype userContextState = {\r\n    user: number;\r\n    setUser: (id: number) => void;\r\n};\r\n\r\nconst contextDefaultValues: userContextState = {\r\n    user: 0,\r\n    setUser: () => { }\r\n};\r\n\r\nconst MediaContext = React.createContext<userContextState>(contextDefaultValues)\r\n\r\nconst MediaProvider = ({ children }: propType) => {\r\n    const [user, setUser] = useState<number>(contextDefaultValues.user);\r\n    return (\r\n        <MediaContext.Provider value={{ user, setUser }}>\r\n            {children}\r\n        </MediaContext.Provider>\r\n    );\r\n};\r\n\r\nMediaProvider.propTypes = {\r\n    children: PropTypes.node,\r\n};\r\n\r\nexport { MediaContext, MediaProvider };","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport {\r\n    AppBar,\r\n    makeStyles,\r\n    Toolbar,\r\n    Link,\r\n    Button,\r\n} from '@material-ui/core';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport { useUsers } from '../hooks/apiHooks';\r\nimport { useContext, useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport { MediaContext } from '../contexts/mediaContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    appBar: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        backgroundColor: '#5F4B8BFF'\r\n    },\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n        paddingRight: '24px',\r\n    },\r\n    toolbar: {\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n    },\r\n    itemPack: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    logo: {\r\n        position: 'absolute',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        left: '130px',\r\n        transform: 'translate(-50%)',\r\n    },\r\n}));\r\n\r\nconst Nav = () => {\r\n    const classes = useStyles();\r\n    const [logged, setLogged] = useState(false);\r\n    const { user, setUser } = useContext(MediaContext);\r\n    const { getIsLoggedIn } = useUsers();\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                console.log('NAV');\r\n                const isLoggedIn = await getIsLoggedIn()\r\n                if (isLoggedIn.success) {\r\n                    setLogged(true);\r\n                    setUser(isLoggedIn.id);\r\n                } else {\r\n                    setLogged(false);\r\n                }\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        })();\r\n    }, [user]);\r\n\r\n    return (\r\n        <>\r\n            <AppBar className={classes.appBar}>\r\n                <Toolbar className={classes.toolbar}>\r\n                    <Link\r\n                        component={RouterLink}\r\n                        to=\"/\"\r\n                        className={classes.logo}\r\n                        color=\"inherit\"\r\n                        style={{ textDecoration: 'none' }}\r\n                    >\r\n                        <h2>ChatApp</h2>\r\n                    </Link>\r\n                    <div className={classes.itemPack}>\r\n                        {logged ? (\r\n                            <div>\r\n                                <Button\r\n                                    color=\"inherit\"\r\n                                    component={RouterLink}\r\n                                    to=\"/logout\"\r\n                                >\r\n                                    Logout\r\n                                </Button>\r\n                                <Button\r\n                                    color=\"inherit\"\r\n                                    component={RouterLink}\r\n                                    to=\"/profile\"\r\n                                >\r\n                                    Profile\r\n                                </Button>\r\n                            </div>\r\n                        ) : (\r\n                            <Button\r\n                                color=\"inherit\"\r\n                                startIcon={<ExitToAppIcon />}\r\n                                component={RouterLink}\r\n                                to=\"/login\"\r\n                            >\r\n                                Login\r\n                            </Button>\r\n                        )}\r\n\r\n                    </div>\r\n                </Toolbar>\r\n            </AppBar>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Nav;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\ninterface propType {\n    children: any\n}\n\ntype userContextState = {\n    websocket: any;\n    setWebsocket: (socket: WebSocket) => void;\n};\n\nconst contextDefaultValues: userContextState = {\n    websocket: undefined,\n    setWebsocket: () => { }\n};\n\nconst WebsocketContext = React.createContext<userContextState>(contextDefaultValues)\n\nconst WebsocketProvider = ({ children }: propType) => {\n    const [websocket, setWebsocket] = useState<WebSocket>();\n    return (\n        <WebsocketContext.Provider value={{ websocket, setWebsocket }}>\n            {children}\n        </WebsocketContext.Provider>\n    );\n};\n\nWebsocketProvider.propTypes = {\n    children: PropTypes.node,\n};\n\nexport { WebsocketContext, WebsocketProvider };","import { Grid, ListItem, ListItemText, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useContext } from 'react';\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport { MediaContext } from '../contexts/mediaContext';\nimport moment from 'moment';\n\ninterface usernamesArray {\n    user_id: number,\n    username: string,\n}\n\ninterface messagesArray {\n    id: number,\n    user_id: number,\n    contents: string,\n    timestamp: Date,\n}\n\ninterface propType {\n    message_id: number,\n    user_id: number,\n    contents: string,\n    timestamp: Date,\n    setMessageId: Function,\n    usernames: usernamesArray[],\n    index: number,\n    messageArray: messagesArray[],\n}\n\nconst useStyles = makeStyles(() => ({\n    message: {\n        backgroundColor: 'lightGrey',\n        marginBottom: '0.5rem',\n        borderRadius: '1rem',\n        padding: '0.5rem',\n        maxWidth: '50%',\n    },\n    ownMessage: {\n        backgroundColor: '#5F4B8BFF',\n        color: 'white',\n        marginBottom: '0.5rem',\n        borderRadius: '1rem',\n        padding: '0.5rem',\n        maxWidth: '50%',\n    },\n    inline: {\n        display: 'inline',\n    },\n    inlineOwn: {\n        display: 'inline',\n        color: 'white',\n    },\n    timestamp: {\n        fontSize: '0.7rem',\n        marginLeft: '2rem'\n    },\n    dateIndicator: {\n        background: 'rgb(95, 75, 139, .2)',\n        borderRadius: '0.3rem',\n        padding: '0.2rem',\n        marginBottom: '0.5rem',\n        textAlign: 'center',\n    }\n}));\n\nconst Message = ({ message_id, user_id, contents, timestamp, setMessageId, usernames, index, messageArray }: propType) => {\n    const classes = useStyles();\n    const [username, setUsername] = useState('');\n    const [time, setTime] = useState('');\n    const [ownMessage, setOwnMessage] = useState(false);\n    const [showDate, setShowDate] = useState(false);\n    const { user } = useContext(MediaContext);\n    const formattedTimestamp = moment(timestamp).format('DD.MM.YYYY');\n\n    useEffect(() => {\n        try {\n            for (let i = 0; i < usernames.length; i++) {\n                if (usernames[i].user_id === user_id) {\n                    setUsername(usernames[i].username);\n                }\n            }\n\n            if (index !== 0) {\n                const formattedPreviousTimestamp = moment(messageArray[index - 1].timestamp).format('DD.MM.YYYY');\n                if (formattedTimestamp !== formattedPreviousTimestamp) {\n                    setShowDate(true);\n                }\n            } else {\n                setShowDate(true);\n            }\n\n            const d = new Date(timestamp);\n            let hours = d.getHours().toString();\n            let minutes = d.getMinutes().toString();\n            if (d.getHours() < 10) {\n                hours = '0' + hours;\n            }\n            if (d.getMinutes() < 10) {\n                minutes = '0' + minutes;\n            }\n            const formatedTime = hours + '.' + minutes;\n            setTime(formatedTime);\n\n            if (user_id === user) {\n                setOwnMessage(true)\n            } else {\n                setOwnMessage(false);\n            }\n            setMessageId(message_id);\n        } catch (e) {\n            console.log(e.message);\n        }\n    }, [message_id]);\n\n\n    return (\n        <>\n            <ListItem style={{ width: '100%', display: 'flex', flexDirection: 'column' }}>\n                {showDate &&\n                    <Grid container justifyContent=\"center\" >\n                        <Typography className={classes.dateIndicator} component=\"h6\" variant=\"body1\">{formattedTimestamp}</Typography>\n                    </Grid>\n                }\n                {ownMessage ? (\n                    <Grid container justify=\"flex-end\" >\n                        <Grid item className={classes.ownMessage}>\n                            <ListItemText\n                                primary={\n                                    <>\n                                        <Grid container justify=\"space-between\">\n                                            <Typography\n                                                component=\"h2\"\n                                            >\n                                                {username}\n                                            </Typography>\n                                            <Typography\n                                                component=\"span\"\n                                                variant=\"subtitle1\"\n                                                className={classes.timestamp}\n                                            >\n                                                {time}\n                                            </Typography>\n                                        </Grid>\n                                    </>\n                                }\n                                secondary={\n                                    <>\n                                        <Typography\n                                            component=\"span\"\n                                            variant=\"body2\"\n                                            className={classes.inlineOwn}\n                                        >\n                                            {contents}\n                                        </Typography>\n                                    </>\n                                }\n                            />\n                        </Grid>\n                    </Grid>\n                ) : (\n                    <Grid container justify=\"flex-start\" >\n                        <Grid item className={classes.message}>\n                            <ListItemText\n                                primary={\n                                    <>\n                                        <Grid container justify=\"space-between\">\n                                            <Typography\n                                                component=\"h2\"\n                                            >\n                                                {username}\n                                            </Typography>\n                                            <Typography\n                                                component=\"span\"\n                                                variant=\"subtitle1\"\n                                                className={classes.timestamp}\n                                            >\n                                                {time}\n                                            </Typography>\n                                        </Grid>\n                                    </>\n                                }\n                                secondary={\n                                    <>\n                                        <Typography\n                                            component=\"span\"\n                                            variant=\"body2\"\n                                            className={classes.inline}\n                                            color=\"textPrimary\"\n                                        >\n                                            {contents}\n                                        </Typography>\n                                    </>\n                                }\n                            />\n                        </Grid>\n                    </Grid>\n                )\n                }\n\n            </ListItem >\n        </>\n    )\n}\n\nexport default Message;","import { useState, useEffect } from 'react';\n\nconst getWindowDimensions = () => {\n    const { innerWidth: width, innerHeight: height } = window;\n    return {\n        width,\n        height,\n    };\n};\n\nexport default function useWindowDimensions() {\n    const [windowDimensions, setWindowDimensions] = useState(\n        getWindowDimensions()\n    );\n\n    useEffect(() => {\n        function handleResize() {\n            setWindowDimensions(getWindowDimensions());\n        }\n\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n\n    return windowDimensions;\n}","import { Button, Grid, List, TextField } from '@material-ui/core';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport { IconButton } from '@material-ui/core';\r\nimport { FormEvent, useContext, useEffect, useState } from 'react';\r\nimport { MediaContext } from '../contexts/mediaContext';\r\nimport { useChats, useUsers } from '../hooks/apiHooks';\r\nimport Message from '../components/message';\r\nimport useWindowDimensions from '../hooks/windowDimensionsHook';\r\nimport { useRef } from 'react';\r\n\r\ninterface messagesArray {\r\n    id: number,\r\n    user_id: number,\r\n    contents: string,\r\n    timestamp: Date,\r\n}\r\n\r\ninterface propType {\r\n    messages: messagesArray[],\r\n    id: number,\r\n    websocket: WebSocket | undefined,\r\n    messageAmount: number,\r\n    setMessageAmount: Function,\r\n}\r\n\r\ninterface usernamesArray {\r\n    user_id: number,\r\n    username: string,\r\n}\r\n\r\n\r\nconst Thread = ({ messages, id, websocket, messageAmount, setMessageAmount }: propType) => {\r\n    const [message, setMessage] = useState('');\r\n    const [messageId, setMessageId] = useState(0);\r\n    const [showButton, setShowButton] = useState(false);\r\n    const [usernames, setUsernames] = useState<usernamesArray[]>([])\r\n    const [moreMessages, setMoreMessages] = useState<messagesArray[]>([])\r\n    const [loadMore, setLoadMore] = useState(false);\r\n    const [messageScroll, setMessageScroll] = useState(false);\r\n    const [currentThread, setCurrentThread] = useState(0);\r\n    const { user } = useContext(MediaContext);\r\n    const { postMessage, getUserIds, getAllMessages } = useChats();\r\n    const { getUsernameById } = useUsers();\r\n    const { height } = useWindowDimensions();\r\n    const heightCorrected = height - 64;\r\n    const messagesEndRef = useRef<null | HTMLDivElement>(null)\r\n    const messagesEndRef2 = useRef<null | HTMLDivElement>(null)\r\n\r\n    const scrollToBottom = (number: number) => {\r\n        if (number === 1) {\r\n            messagesEndRef.current?.scrollIntoView()\r\n        } else {\r\n            messagesEndRef2.current?.scrollIntoView()\r\n            setMessageScroll(true);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                if (loadMore && !messageScroll) {\r\n                    scrollToBottom(2);\r\n                } else {\r\n                    scrollToBottom(1);\r\n                }\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        })();\r\n    }, [messageId]);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                if (currentThread !== id) {\r\n                    setLoadMore(false);\r\n                    setMessageScroll(false);\r\n                    setMessageAmount(50);\r\n                }\r\n                setCurrentThread(id);\r\n                console.log('messageUpdate')\r\n                if (messages.length >= 50 && !loadMore) {\r\n                    setShowButton(true);\r\n                } else {\r\n                    setShowButton(false);\r\n                }\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        })();\r\n    }, [messages]);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                setUsernames([]);\r\n                console.log('USERNAMELIST')\r\n                const userIds = await getUserIds(id);\r\n                let usernameArray: Array<usernamesArray> = [];\r\n                for (let i = 0; i < userIds.length; i++) {\r\n                    const user = await getUsernameById(userIds[i].user_id);\r\n                    const userObject = {\r\n                        user_id: userIds[i].user_id,\r\n                        username: user.username\r\n                    }\r\n                    usernameArray.push(userObject);\r\n                }\r\n                setUsernames(usernameArray)\r\n\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        })();\r\n    }, [id]);\r\n\r\n    const handleSubmit = async (event: FormEvent) => {\r\n        event.preventDefault();\r\n        const tzoffset = (new Date()).getTimezoneOffset() * 60000;\r\n        const localISOTime = (new Date(Date.now() - tzoffset)).toISOString().slice(0, -1);\r\n        console.log('TIMEST: ', localISOTime)\r\n        const messageObject = JSON.stringify({\r\n            contents: message,\r\n            timestamp: localISOTime,\r\n            user_id: user,\r\n            thread_id: id,\r\n\r\n        });\r\n        const success = await postMessage(messageObject)\r\n        console.log('SUCCESS: ', success)\r\n        const webSocketUpdate = {\r\n            type: 'message',\r\n            contents: message,\r\n            timestamp: localISOTime,\r\n            user_id: user,\r\n            thread_id: id\r\n        }\r\n        if (websocket !== undefined) {\r\n            websocket.send(JSON.stringify(webSocketUpdate));\r\n        }\r\n        setMessage('');\r\n    };\r\n\r\n    const loadAllMessages = async () => {\r\n        let amount;\r\n        if (currentThread !== id) {\r\n            setMessageAmount(50);\r\n            amount = 50;\r\n        } else {\r\n            amount = messageAmount;\r\n        }\r\n        const allMessages = await getAllMessages(id);\r\n        console.log('MESSAGE AMOUNT', messageAmount, allMessages);\r\n        allMessages.splice(allMessages.length - amount, amount);\r\n        setMoreMessages(allMessages);\r\n        setLoadMore(true);\r\n        setShowButton(false);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Grid container justify=\"center\" direction=\"column\" style={{ height: heightCorrected }}>\r\n                <Grid item justify=\"center\" style=\r\n                    {{\r\n                        padding: '2rem 6rem 1.5rem 6rem',\r\n                        backgroundColor: '#E69A8DFF',\r\n                        height: '90%',\r\n                        overflowX: 'hidden',\r\n                        overflowY: 'auto'\r\n                    }}>\r\n                    {loadMore &&\r\n                        <List>\r\n                            {moreMessages.map((item, index) => (\r\n                                <Message\r\n                                    message_id={item.id}\r\n                                    user_id={item.user_id}\r\n                                    contents={item.contents}\r\n                                    timestamp={item.timestamp}\r\n                                    setMessageId={setMessageId}\r\n                                    usernames={usernames}\r\n                                    index={index}\r\n                                    messageArray={moreMessages}\r\n                                />\r\n                            ))}{' '}\r\n                            <div ref={messagesEndRef2} />\r\n                        </List>\r\n                    }\r\n                    {showButton &&\r\n                        <Button onClick={loadAllMessages}>Load all messages</Button>\r\n                    }\r\n                    {usernames.length > 0 &&\r\n                        <List>\r\n                            {messages.map((item, index) => (\r\n                                <Message\r\n                                    message_id={item.id}\r\n                                    user_id={item.user_id}\r\n                                    contents={item.contents}\r\n                                    timestamp={item.timestamp}\r\n                                    setMessageId={setMessageId}\r\n                                    usernames={usernames}\r\n                                    index={index}\r\n                                    messageArray={messages}\r\n                                />\r\n                            ))}{' '}\r\n                            <div ref={messagesEndRef} />\r\n                        </List>\r\n                    }\r\n                </Grid>\r\n                <Grid item container justify=\"center\" direction=\"column\" style={{ height: '10%', backgroundColor: 'lightgray' }}>\r\n                    <Grid item>\r\n                        <form\r\n                            onSubmit={handleSubmit}\r\n                        >\r\n\r\n                            <TextField\r\n                                value={message}\r\n                                variant=\"outlined\"\r\n                                label=\"Say something!\"\r\n                                onInput={(event) => setMessage((event.target as HTMLInputElement).value)}\r\n                                style={{ width: '70%', backgroundColor: 'white', borderRadius: '0.5rem' }}\r\n                            />\r\n                            <IconButton\r\n                                type=\"submit\"\r\n                                color=\"default\"\r\n                                style={{ marginTop: '0.15rem' }}\r\n                            >\r\n                                <SendIcon style={{ fill: '#5F4B8BFF' }} />\r\n                            </IconButton>\r\n\r\n                        </form>\r\n                    </Grid>\r\n                </Grid>\r\n\r\n            </Grid>\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Thread;","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport { Button, Grid, ListItem, ListItemText, makeStyles, Typography } from \"@material-ui/core\";\r\nimport { useContext, useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { WebsocketContext } from \"../contexts/websocketContext\";\r\nimport { useChats, useUsers } from '../hooks/apiHooks';\r\n\r\ninterface propType {\r\n    id: number,\r\n    setThreadOpen: Function,\r\n    setThreadId: Function,\r\n    threadOpen: Boolean,\r\n    threadId: number,\r\n    updateThreadButtonInfos: number,\r\n}\r\n\r\ninterface lastMessageObject {\r\n    username: string,\r\n    contents: string,\r\n    timestamp: any,\r\n}\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    text: {\r\n        color: 'white',\r\n        width: '100%',\r\n        padding: '1rem',\r\n    },\r\n    inline: {\r\n        display: 'inline',\r\n    },\r\n    lastMessage: {\r\n        display: 'inline',\r\n        fontSize: '0.7rem'\r\n    },\r\n    timestamp: {\r\n        fontSize: '0.5rem',\r\n        marginLeft: '2rem'\r\n    },\r\n    button: {\r\n        width: '100%',\r\n        maxWidth: '30vw',\r\n        padding: '0 0.7rem',\r\n        borderBottom: '1px solid #5F4B8BFF',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            background: \"#f0f0f0\",\r\n        },\r\n    }\r\n}));\r\n\r\nconst ThreadButton = ({ id, setThreadOpen, setThreadId, threadOpen, threadId, updateThreadButtonInfos }: propType) => {\r\n    const { getThreadName, getLastMessage } = useChats();\r\n    const { getUsernameById } = useUsers();\r\n    const [name, setName] = useState('');\r\n    const [lastMessage, setLastMessage] = useState<lastMessageObject>({\r\n        username: '',\r\n        contents: '',\r\n        timestamp: ''\r\n    });\r\n    const { websocket } = useContext(WebsocketContext);\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const threadName = await getThreadName(id)\r\n                setName(threadName)\r\n                const lastMessageData = await getLastMessage(id)\r\n                if (lastMessageData.length !== 0) {\r\n                    const username = await getUsernameById(lastMessageData[0].user_id);\r\n\r\n                    const d = new Date(lastMessageData[0].timestamp);\r\n                    let hours = d.getHours().toString();\r\n                    let minutes = d.getMinutes().toString();\r\n                    if (d.getHours() < 10) {\r\n                        hours = '0' + hours;\r\n                    }\r\n                    if (d.getMinutes() < 10) {\r\n                        minutes = '0' + minutes;\r\n                    }\r\n                    const formatedTime = hours + '.' + minutes;\r\n\r\n                    const lastMessageObject = {\r\n                        username: username.username + ':',\r\n                        contents: lastMessageData[0].contents,\r\n                        timestamp: formatedTime,\r\n                    }\r\n                    setLastMessage(lastMessageObject);\r\n                } else {\r\n                    const noLastMessageObject = {\r\n                        username: 'No messages yet.',\r\n                        contents: '',\r\n                        timestamp: '',\r\n                    }\r\n                    setLastMessage(noLastMessageObject);\r\n                }\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        })();\r\n    }, [updateThreadButtonInfos]);\r\n\r\n    const openThread = () => {\r\n        if (!threadOpen) {\r\n            setThreadOpen(true)\r\n            setThreadId(id)\r\n        } else {\r\n            if (threadId === id) {\r\n                setThreadOpen(false)\r\n                setThreadId(0)\r\n            } else {\r\n                setThreadId(id)\r\n            }\r\n            if (websocket !== undefined) {\r\n                websocket.close();\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ListItem onClick={openThread} className={classes.button} >\r\n                <ListItemText\r\n                    primary={\r\n                        <>\r\n                            <Grid container justify=\"space-between\">\r\n                                <Typography\r\n                                    component=\"h1\"\r\n                                >\r\n                                    {name}\r\n                                </Typography>\r\n                                <Typography\r\n                                    component=\"span\"\r\n                                    variant=\"subtitle1\"\r\n                                    className={classes.timestamp}\r\n                                >\r\n                                    {lastMessage.timestamp}\r\n                                </Typography>\r\n                            </Grid>\r\n                        </>\r\n                    }\r\n                    secondary={\r\n                        <>\r\n                            <Typography\r\n                                component=\"span\"\r\n                                variant=\"body2\"\r\n                                className={classes.lastMessage}\r\n                            >\r\n                                {lastMessage.username} {lastMessage.contents}\r\n                            </Typography>\r\n                        </>\r\n                    }\r\n                />\r\n            </ListItem>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ThreadButton","import { useState } from 'react';\r\n\r\nconst useForm = (callback: CallableFunction, initState: any) => {\r\n    const [inputs, setInputs] = useState(initState);\r\n\r\n    const handleSubmit = (event: any) => {\r\n        if (event) {\r\n            event.preventDefault();\r\n        }\r\n        callback();\r\n    };\r\n\r\n    const handleInputChange = (event: any) => {\r\n        event.persist();\r\n        setInputs((inputs: String) => ({\r\n            ...inputs,\r\n            [event.target.name]: event.target.value,\r\n        }));\r\n    };\r\n\r\n    const handleFileChange = (event: any) => {\r\n        event.persist();\r\n        setInputs((inputs: String) => ({\r\n            ...inputs,\r\n            [event.target.name]: event.target.files[0],\r\n        }));\r\n    };\r\n\r\n    return { inputs, handleSubmit, handleInputChange, handleFileChange, setInputs };\r\n};\r\n\r\nexport default useForm;\r\n","import { Button, Grid, MenuItem, Select, Typography } from \"@material-ui/core\"\nimport { useState } from \"react\";\nimport { useContext, useEffect } from \"react\";\nimport { TextValidator, ValidatorForm } from \"react-material-ui-form-validator\"\nimport { MediaContext } from \"../contexts/mediaContext\";\nimport { useUsers, useChats } from \"../hooks/apiHooks\";\nimport useForm from \"../hooks/formHooks\";\n\ninterface propTypes {\n    setCreateNewChatThread: Function,\n    setUpdateThreadButtons: Function\n}\n\ninterface usersArrayType {\n    id: number,\n    username: string,\n}\n\nconst ThreadForm = ({ setCreateNewChatThread, setUpdateThreadButtons }: propTypes) => {\n    const { user } = useContext(MediaContext);\n    const { createNewChatThread } = useChats();\n    const { getUsers } = useUsers();\n    const [usersArray, setUsersArray] = useState<usersArrayType[]>([]);\n\n    const validators = {\n        threadName: ['required', 'minStringLength: 3'],\n    };\n\n    const errorMessages = {\n        threadName: [\n            'Required field',\n            'Minimum of 3 characters'\n        ]\n    };\n\n    const createNewThread = async () => {\n        try {\n            if (inputs.user2 !== '') {\n                const chatThreadObject = JSON.stringify({\n                    name: inputs.threadName,\n                    user_id: user,\n                    user2_id: inputs.user2\n\n                });\n                const success = await createNewChatThread(chatThreadObject);\n                console.log('SUCCESS: ', success)\n                setCreateNewChatThread(false);\n                setUpdateThreadButtons(Date.now());\n            } else {\n                alert('Choose a user with whom you want to chat!');\n            }\n        } catch (e) {\n            console.log(e.message);\n        }\n    }\n\n    const { inputs, handleInputChange, handleSubmit } = useForm(createNewThread, {\n        threadName: '',\n        user2: '',\n    });\n\n    useEffect(() => {\n        (async () => {\n            try {\n                const users = await getUsers();\n                let arrayForUsers = [];\n                for (let i = 0; i < users.length; i++) {\n                    if (users[i].id !== user) {\n                        arrayForUsers.push(users[i]);\n                    }\n                }\n                setUsersArray(arrayForUsers);\n            } catch (e) {\n                console.log(e.message);\n            }\n        })();\n    }, []);\n\n    return (\n        <>\n            <Grid container justifyContent=\"center\" direction=\"column\">\n                <Typography variant=\"h3\">Create a new chat thread</Typography>\n                <ValidatorForm onSubmit={handleSubmit}>\n                    <Grid container item justifyContent=\"center\">\n                        <TextValidator\n                            type=\"text\"\n                            name=\"threadName\"\n                            label=\"Thread name\"\n                            onChange={handleInputChange}\n                            value={inputs.threadName}\n                            validators={validators.threadName}\n                            errorMessages={errorMessages.threadName}\n                        />\n                    </Grid>\n                    <Grid container item justifyContent=\"center\">\n                        <Select\n                            name=\"user2\"\n                            value={inputs.user2}\n                            label=\"User\"\n                            onChange={handleInputChange}\n                        >\n                            {usersArray.map((item) => (\n                                <MenuItem value={item.id}>{item.username}</MenuItem>\n                            ))}{' '}\n                        </Select>\n                    </Grid>\n                    <Grid container item justifyContent=\"center\">\n                        <Button\n                            style={{ marginTop: '2rem', marginBottom: '0.5rem' }}\n                            color=\"primary\"\n                            type=\"submit\"\n                            variant=\"contained\"\n                        >\n                            Create\n                        </Button>\n                    </Grid>\n                </ValidatorForm>\n            </Grid>\n        </>\n    )\n}\n\nexport default ThreadForm;","/* eslint-disable react-hooks/exhaustive-deps */\nimport { Button, Grid, List, Typography } from '@material-ui/core';\nimport { BorderRight } from '@material-ui/icons';\nimport { useContext, useEffect, useState } from 'react';\nimport Thread from '../components/thread';\nimport ThreadButton from '../components/threadButton';\nimport ThreadForm from '../components/threadForm';\nimport { MediaContext } from '../contexts/mediaContext';\nimport { WebsocketContext } from '../contexts/websocketContext';\nimport { useUsers, useChats } from '../hooks/apiHooks';\nimport useWindowDimensions from '../hooks/windowDimensionsHook';\n\ninterface propType {\n    history: {\n        push: Function,\n    }\n}\n\ninterface threadsArray {\n    thread_id: number\n}\n\ninterface messagesArray {\n    id: number,\n    user_id: number,\n    contents: string,\n    timestamp: Date,\n}\n\nconst Home = ({ history }: propType) => {\n    const { user, setUser } = useContext(MediaContext);\n    const { websocket, setWebsocket } = useContext(WebsocketContext);\n    const { getIsLoggedIn } = useUsers();\n    const { getThreadIds, getMessages } = useChats();\n    const { height } = useWindowDimensions();\n    const heightCorrected = height - 64;\n    const [threads, setThreads] = useState<threadsArray[]>([]);\n    const [threadOpen, setThreadOpen] = useState(false)\n    const [threadId, setThreadId] = useState(0)\n    const [messages, setMessages] = useState<messagesArray[]>([]);\n    const [updateState, setUpdateState] = useState(Date.now());\n    const [updateThreadButtons, setUpdateThreadButtons] = useState(Date.now());\n    const [updateThreadButtonInfos, setUpdateThreadButtonInfos] = useState(Date.now());\n    const [createNewChatThread, setCreateNewChatThread] = useState(false);\n    const [messageAmount, setMessageAmount] = useState(50);\n    const [wsMessage, setWsMessage] = useState({\n        type: '',\n        contents: '',\n        timestamp: new Date(),\n        user_id: 0,\n        thread_id: 0\n    });\n\n    useEffect(() => {\n        (async () => {\n            try {\n                console.log('USER: ', user)\n                const isLoggedIn = await getIsLoggedIn();\n                if (!isLoggedIn.success) {\n                    history.push('/login');\n                }\n                setUser(isLoggedIn.id)\n                console.log('Logged user: ', user, isLoggedIn.id);\n                if (user !== 0) {\n                    const chatThreads = await getThreadIds(isLoggedIn.id)\n                    setThreads(chatThreads)\n                }\n            } catch (e) {\n                console.log(e.message);\n            }\n        })();\n    }, [user, updateThreadButtons]);\n\n    useEffect(() => {\n        (async () => {\n            try {\n                if (threadId !== 0) {\n                    const threadMessages = await getMessages(threadId);\n                    const reversedArray = threadMessages.reverse();\n                    setMessages(reversedArray);\n                }\n            } catch (e) {\n                console.log(e.message);\n            }\n        })();\n    }, [threadId, updateState]);\n\n    useEffect(() => {\n        try {\n            if (wsMessage.type !== '' && wsMessage.thread_id === threadId) {\n                const newMessageObject = {\n                    id: Date.now(),\n                    user_id: wsMessage.user_id,\n                    contents: wsMessage.contents,\n                    timestamp: wsMessage.timestamp,\n                }\n                setMessages(messages => [...messages, newMessageObject]);\n                setMessageAmount(messageAmount + 1);\n            }\n        } catch (e) {\n            console.log(e.message);\n        }\n    }, [wsMessage]);\n\n    useEffect(() => {\n        try {\n            if (threads.length !== 0) {\n                if (websocket === undefined || websocket.readyState === 2 || websocket.readyState === 3) {\n                    console.log('READYSTATE ', websocket?.readyState)\n                    const socket = new WebSocket('ws://localhost:3001');\n\n                    socket.addEventListener('open', function (event) {\n                        console.log('Server is opened.');\n                        const client = {\n                            type: 'client',\n                            user_id: user,\n                            threads: threads,\n                        }\n                        socket.send(JSON.stringify(client));\n                    });\n\n                    socket.addEventListener('message', function (event) {\n                        if (event.data !== 'ping') {\n                            console.log('Message from server ', JSON.parse(event.data).thread_id);\n                            const message = JSON.parse(event.data);\n                            if (message.type === 'message') {\n                                setWsMessage(message);\n                                setUpdateThreadButtonInfos(Date.now());\n                            } else {\n                                setTimeout(() => socket.send('pong'), 1000);\n                            }\n                        }\n                    });\n\n                    socket.addEventListener('close', function (event) {\n                        console.log('Websocket connection closed.');\n                        setUpdateState(Date.now());\n                    });\n\n                    setWebsocket(socket);\n                    console.log('NEW SOCKET');\n                }\n            }\n        } catch (e) {\n            console.log(e.message);\n        };\n    }, [updateState, threads]);\n\n    const setCreateNewChatThreadOpen = () => {\n        setCreateNewChatThread(true);\n    }\n\n\n    return (\n        <>\n            {createNewChatThread ? (\n                <ThreadForm setCreateNewChatThread={setCreateNewChatThread} setUpdateThreadButtons={setUpdateThreadButtons} />\n            ) : (\n                <>\n                    <Grid container direction=\"row\" style={{ height: heightCorrected, }} >\n                        <Grid item style={{ width: '30%', borderRight: '1px solid #5F4B8BFF' }}>\n                            <Button\n                                onClick={setCreateNewChatThreadOpen}\n                                color=\"primary\"\n                                variant=\"contained\"\n                                style={{ marginTop: '1rem', marginBottom: '1rem' }}\n                            >\n                                Create a new chat thread\n                            </Button>\n                            <Grid container style={{ borderTop: '1px solid #5F4B8BFF', marginTop: '1rem' }} >\n                                <List style={{ padding: 0, width: '100%' }}>\n                                    {threads.map((item) => (\n                                        <ThreadButton\n                                            id={item.thread_id}\n                                            setThreadOpen={setThreadOpen}\n                                            setThreadId={setThreadId}\n                                            threadOpen={threadOpen}\n                                            threadId={threadId}\n                                            updateThreadButtonInfos={updateThreadButtonInfos}\n                                        />\n                                    ))}{' '}\n                                </List>\n                            </Grid>\n                        </Grid>\n                        <Grid item style={{ width: '70%' }}>\n                            {threadOpen ? (\n                                <Thread messages={messages} id={threadId} websocket={websocket} messageAmount={messageAmount} setMessageAmount={setMessageAmount} />\n                            ) : (\n                                <Grid container alignItems=\"center\" justify=\"center\" direction=\"column\" >\n                                    <Typography component=\"h1\" variant=\"h2\">Welcome</Typography>\n                                    <Typography component=\"div\" variant=\"body1\">This is Chat App made by Tommi.</Typography>\n                                </Grid>\n                            )}\n                        </Grid>\n                    </Grid>\n                </>\n            )}\n        </>\n    );\n\n}\n\nexport default Home","import { withRouter } from 'react-router-dom';\r\nimport { Button, Grid, TextField, Typography } from '@material-ui/core';\r\nimport useForm from '../hooks/formHooks';\r\nimport { useUsers } from '../hooks/apiHooks';\r\n\r\ninterface propType {\r\n    history: {\r\n        push: Function,\r\n    }\r\n}\r\n\r\nconst LoginForm = ({ history }: propType) => {\r\n\r\n    const { postLogin } = useUsers();\r\n    const doLogin = async () => {\r\n        try {\r\n            const userdata = await postLogin(inputs);\r\n            localStorage.setItem('id', userdata.id);\r\n            history.push('/');\r\n        } catch (e) {\r\n            console.log('doLogin', e.message);\r\n        }\r\n    };\r\n\r\n    const { inputs, handleInputChange, handleSubmit } = useForm(doLogin, {\r\n        username: '',\r\n        password: '',\r\n    });\r\n\r\n    return (\r\n        <Grid container>\r\n            <Grid\r\n                container\r\n                spacing={0}\r\n                direction=\"column\"\r\n                alignItems=\"center\"\r\n                justify=\"center\"\r\n            >\r\n                <Typography component=\"h1\" variant=\"h2\" gutterBottom>\r\n                    Login\r\n                </Typography>\r\n            </Grid>\r\n            <Grid\r\n                container\r\n                spacing={0}\r\n                direction=\"column\"\r\n                alignItems=\"center\"\r\n                justify=\"center\"\r\n            >\r\n                <form onSubmit={handleSubmit}>\r\n                    <Grid container direction=\"column\">\r\n                        <Grid container item>\r\n                            <TextField\r\n                                type=\"text\"\r\n                                name=\"username\"\r\n                                label=\"Username\"\r\n                                onChange={handleInputChange}\r\n                                value={inputs.username}\r\n                            />\r\n                        </Grid>\r\n                        <Grid container item>\r\n                            <TextField\r\n                                type=\"password\"\r\n                                name=\"password\"\r\n                                label=\"Password\"\r\n                                onChange={handleInputChange}\r\n                                value={inputs.password}\r\n                            />\r\n                        </Grid>\r\n\r\n                        <Grid container item>\r\n                            <Button\r\n                                fullWidth\r\n                                style={{ marginTop: '2rem', marginBottom: '0.5rem' }}\r\n                                color=\"primary\"\r\n                                type=\"submit\"\r\n                                variant=\"contained\"\r\n                            >\r\n                                Login\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n                </form>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n\r\n\r\nexport default withRouter(LoginForm);","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport useForm from '../hooks/formHooks';\r\nimport { useUsers } from '../hooks/apiHooks';\r\nimport { Grid, Typography, Button } from '@material-ui/core';\r\nimport { ValidatorForm, TextValidator } from 'react-material-ui-form-validator';\r\nimport { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\ninterface propType {\r\n    setToggle: Function\r\n}\r\n\r\nconst RegisterForm = ({ setToggle }: propType) => {\r\n    const { register, getUserAvailable } = useUsers();\r\n    const validators = {\r\n        username: ['required', 'minStringLength: 3', 'isAvailable'],\r\n        password: ['required', 'minStringLength:5'],\r\n        confirm: ['required', 'isPasswordMatch'],\r\n    };\r\n\r\n    const errorMessages = {\r\n        username: [\r\n            'Required field',\r\n            'Minimum of 3 characters',\r\n            'Username is not available',\r\n        ],\r\n        password: ['Required field', 'Minimum of 5 characters'],\r\n        confirm: ['Required field', 'Passwords do not match'],\r\n    };\r\n\r\n    const doRegister = async () => {\r\n        try {\r\n            const available = await getUserAvailable(inputs.username);\r\n            if (available) {\r\n                delete inputs.confirm;\r\n                const result = await register(inputs);\r\n                if (result.length > 0) {\r\n                    alert(result);\r\n                    setToggle(true);\r\n                }\r\n            }\r\n        } catch (e) {\r\n            console.log(e.message);\r\n        }\r\n    };\r\n\r\n    const { inputs, handleInputChange, handleSubmit } = useForm(doRegister, {\r\n        username: '',\r\n        password: '',\r\n        confirm: '',\r\n    });\r\n\r\n    useEffect(() => {\r\n        ValidatorForm.addValidationRule('isAvailable', async (value) => {\r\n            if (value.length > 2) {\r\n                try {\r\n                    const available = await getUserAvailable(value);\r\n                    return available;\r\n                } catch (e) {\r\n                    console.log(e.message);\r\n                    return true;\r\n                }\r\n            }\r\n        });\r\n\r\n        ValidatorForm.addValidationRule(\r\n            'isPasswordMatch',\r\n            (value) => value === inputs.password\r\n        );\r\n    }, [inputs]);\r\n\r\n    return (\r\n        <Grid container alignItems=\"center\">\r\n            <Grid\r\n                container\r\n                spacing={0}\r\n                direction=\"column\"\r\n                alignItems=\"center\"\r\n                justify=\"center\"\r\n            >\r\n                <Typography component=\"h1\" variant=\"h2\" gutterBottom>\r\n                    Register\r\n                </Typography>\r\n            </Grid>\r\n            <Grid item xs={12} container direction=\"column\" alignItems=\"center\">\r\n                <ValidatorForm onSubmit={handleSubmit}>\r\n                    <Grid container direction=\"column\">\r\n                        <Grid container item>\r\n                            <TextValidator\r\n                                fullWidth\r\n                                type=\"text\"\r\n                                name=\"username\"\r\n                                label=\"Username\"\r\n                                onChange={handleInputChange}\r\n                                value={inputs.username}\r\n                                validators={validators.username}\r\n                                errorMessages={errorMessages.username}\r\n                            />\r\n                        </Grid>\r\n\r\n                        <Grid container item>\r\n                            <TextValidator\r\n                                fullWidth\r\n                                type=\"password\"\r\n                                name=\"password\"\r\n                                label=\"Password\"\r\n                                onChange={handleInputChange}\r\n                                value={inputs.password}\r\n                                validators={validators.password}\r\n                                errorMessages={errorMessages.password}\r\n                            />\r\n                        </Grid>\r\n\r\n                        <Grid container item>\r\n                            <TextValidator\r\n                                fullWidth\r\n                                type=\"password\"\r\n                                name=\"confirm\"\r\n                                label=\"Confirm password\"\r\n                                onChange={handleInputChange}\r\n                                value={inputs.confirm}\r\n                                validators={validators.confirm}\r\n                                errorMessages={errorMessages.confirm}\r\n                            />\r\n                        </Grid>\r\n\r\n                        <Grid container item>\r\n                            <Button\r\n                                style={{ marginTop: '2rem', marginBottom: '0.5rem' }}\r\n                                fullWidth\r\n                                color=\"primary\"\r\n                                type=\"submit\"\r\n                                variant=\"contained\"\r\n                            >\r\n                                Register\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n                </ValidatorForm>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n\r\nRegisterForm.propTypes = {\r\n    setToggle: PropTypes.func,\r\n};\r\n\r\nexport default RegisterForm;","import LoginForm from '../components/loginForm';\r\nimport RegisterForm from '../components/registerForm';\r\nimport { Button, Grid } from '@material-ui/core';\r\nimport { useState } from 'react';\r\nimport Card from '@material-ui/core/Card';\r\n\r\nconst Login = () => {\r\n    const [toggle, setToggle] = useState(true);\r\n\r\n    const showHide = () => {\r\n        setToggle(!toggle);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Grid container justify=\"center\">\r\n                <Card\r\n                    style={{\r\n                        margin: '5rem 2rem 3rem 2rem',\r\n                        padding: '3rem',\r\n                        maxWidth: '18rem',\r\n                    }}\r\n                >\r\n                    {toggle ? <LoginForm /> : <RegisterForm setToggle={setToggle} />}\r\n                    <Grid container justify=\"center\">\r\n                        <Button onClick={showHide}>\r\n                            {toggle ? 'or register' : 'or login'}\r\n                        </Button>\r\n                    </Grid>\r\n                </Card>\r\n            </Grid>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Login;","import PropTypes from 'prop-types';\r\nimport { useContext, useEffect } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { MediaContext } from '../contexts/mediaContext';\r\nimport { WebsocketContext } from '../contexts/websocketContext';\r\nimport { useUsers } from '../hooks/apiHooks';\r\n\r\ninterface propType {\r\n    history: {\r\n        push: Function,\r\n    }\r\n}\r\n\r\nconst Logout = ({ history }: propType) => {\r\n    const { logout } = useUsers();\r\n    const { user, setUser } = useContext(MediaContext);\r\n    const { websocket } = useContext(WebsocketContext);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                console.log('USER:', user)\r\n                const isLoggedIn = await logout();\r\n                setUser(0);\r\n                if (websocket !== undefined) {\r\n                    websocket.close();\r\n                }\r\n                console.log('Logout success: ', isLoggedIn.success, user)\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        })();\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <Redirect to={'/login'} />\r\n        </>\r\n    );\r\n};\r\n\r\nLogout.propTypes = {\r\n    history: PropTypes.object,\r\n};\r\n\r\nexport default Logout;","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport { useContext } from 'react';\r\nimport { useEffect, useState } from 'react';\r\nimport { WebsocketContext } from '../contexts/websocketContext';\r\nimport { useUsers } from '../hooks/apiHooks';\r\n\r\nconst Profile = () => {\r\n    const [user, setUser] = useState({ id: '', username: '' })\r\n    const { websocket } = useContext(WebsocketContext);\r\n    const { getProfile } = useUsers();\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                if (websocket !== undefined) {\r\n                    websocket.close();\r\n                }\r\n                const result = await getProfile();\r\n                console.log('Profile: ', result);\r\n                setUser(result);\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        })();\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{ whiteSpace: 'pre-line' }}>\r\n            <h1>{!user ? \"Loading...\" : user.username + '\\n' + user.id}</h1>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Profile","import { Container } from '@material-ui/core';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Nav from './components/nav';\nimport { MediaProvider } from './contexts/mediaContext';\nimport { WebsocketProvider } from './contexts/websocketContext';\nimport Home from './views/home';\nimport Login from './views/login';\nimport Logout from './views/logout';\nimport Profile from './views/profile';\n\nconst App = () => {\n\n  return (\n    <Router>\n      <MediaProvider>\n        <WebsocketProvider>\n          <Container\n            maxWidth=\"xl\"\n            style={{\n              margin: 0,\n              padding: 0,\n            }}\n          >\n            <Nav />\n            <main style={{ marginTop: 64, textAlign: 'center', width: '100vw' }}>\n              <Switch>\n                <Route path=\"/\" exact component={Home} />\n                <Route path=\"/login\" component={Login} />\n                <Route path=\"/logout\" component={Logout} />\n                <Route path=\"/profile\" component={Profile} />\n              </Switch>\n            </main>\n\n          </Container>\n        </WebsocketProvider>\n      </MediaProvider>\n    </Router >\n\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"]}}